(this["webpackJsonpepcr-frontend"]=this["webpackJsonpepcr-frontend"]||[]).push([[0],{318:function(e,t,n){},337:function(e,t,n){},344:function(e,t){},346:function(e,t){},356:function(e,t){},358:function(e,t){},385:function(e,t){},387:function(e,t){},388:function(e,t){},393:function(e,t){},395:function(e,t){},401:function(e,t){},403:function(e,t){},422:function(e,t){},434:function(e,t){},437:function(e,t){},543:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),r=n(35),s=n.n(r),i=n(115),o=(n(318),n(15)),l=n(33),d=n(550),j=n(134),u=n(70),b=n(307),h=n(81),p=n(561),O=(n(319),n(565)),m=n(566),x=n(567),f=n(21),g=n.n(f),y=(n(337),n(338),n(231)),v=function(){var e=localStorage.getItem("user");return e?JSON.parse(e):null},S=function(){localStorage.getItem("EncryptedSymmmetricKey")||"/enroll"===window.location.pathname||window.open("/enroll","_self");var e=localStorage.getItem("token");return e?(sessionStorage.getItem("AESKEY")||(localStorage.removeItem("token"),localStorage.removeItem("user"),window.open("/login","_self")),e):null},k=function(e){sessionStorage.getItem("AESKEY")||function(e){var t=localStorage.getItem("EncryptedSymmmetricKey"),n=y.AES.decrypt(t,e).toString(y.enc.Utf8);sessionStorage.setItem("AESKEY",n)}(e)},I=function(){localStorage.removeItem("token"),localStorage.removeItem("user")},N=n(28),C=n(182),_=n(1),R=["component"];var w=function(e){var t=e.component,n=Object(C.a)(e,R);return Object(_.jsx)(l.b,Object(N.a)(Object(N.a)({},n),{},{render:function(e){return S()?Object(_.jsx)(t,Object(N.a)({},e)):Object(_.jsx)(l.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},M=["component"];var D=function(e){var t=e.component,n=Object(C.a)(e,M);return Object(_.jsx)(l.b,Object(N.a)(Object(N.a)({},n),{},{render:function(e){return S()?Object(_.jsx)(l.a,{to:{pathname:"/dashboard"}}):Object(_.jsx)(t,Object(N.a)({},e))}}))},A=n(560),P=n(557),T=n(43),Y=n(563),F=n(564);var V=function(e){var t=Object(c.useState)(e),n=Object(o.a)(t,2),a=n[0],r=n[1];return{value:a,onChange:function(e){r(e.target.value)}}},E=function(e){var t=Object(c.useState)(!1),n=Object(o.a)(t,2),a=n[0],r=n[1],s=V(""),i=V(""),l=Object(c.useState)(null),d=Object(o.a)(l,2),j=d[0],u=d[1];return Object(_.jsx)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},children:Object(_.jsxs)(A.b,{direction:"vertical",size:"middle",style:{width:"400px"},children:[j?Object(_.jsx)(p.a,{message:"Login Failed",description:j,type:"error",showIcon:!0,style:{textAlign:"left"}}):Object(_.jsx)(_.Fragment,{}),Object(_.jsx)(P.a,Object(N.a)(Object(N.a)({},s),{},{size:"large",placeholder:"Username",prefix:Object(_.jsx)(Y.a,{})})),Object(_.jsx)(P.a.Password,Object(N.a)(Object(N.a)({},i),{},{size:"large",placeholder:"Password",prefix:Object(_.jsx)(F.a,{})})),Object(_.jsx)(T.a,{type:"primary",size:"large",shape:"round",onClick:function(){u(null),r(!0),g.a.post("".concat("https://epcr-backend.lentorresidence.com","/users/signin"),{username:s.value,password:i.value}).then((function(e){var t,n;r(!1),t=e.data.token,n=e.data.user,localStorage.setItem("token",t),localStorage.setItem("user",JSON.stringify(n)),k(e.data.key),window.open("/select_patient","_self")})).catch((function(e){r(!1),e.reponse&&401===e.response.status?u(e.response.data.message):u("Something went wrong. Please try again later.")}))},loading:a,style:{width:"100%"},children:a?"Logging In...":"Login"})]})})},J=n(556);var B=function(e){var t=v();return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(J.a,{className:"site-page-header",title:"Settings"}),Object(_.jsxs)("div",{style:{padding:"30px"},children:[Object(_.jsx)(T.a,{type:"primary",onClick:function(){I(),window.open("/login","_self")},children:"Logout"},"console"),Object(_.jsx)("br",{}),Object(_.jsx)("br",{}),Object(_.jsx)(T.a,{type:"primary",onClick:function(){e.history.push("/users_module/reset_password/"+t.username)},children:"Change Password"},"console")]})]})},q=n(555),G=n(548);var z=function(e){var t=q.a.Text,n=Object(c.useState)(),a=Object(o.a)(n,2),r=a[0],s=a[1],i=Object(c.useState)(),l=Object(o.a)(i,2),d=l[0],j=l[1];return Object(c.useEffect)((function(){var t=S();t?(g.a.get("".concat("https://epcr-backend.lentorresidence.com","/users/verifyToken?token=").concat(t)).catch((function(e){I()})),g.a.post("".concat("https://epcr-backend.lentorresidence.com","/residents/listAdmitted"),{},{headers:{token:t}}).then((function(e){var t=e.data;t.map((function(e){e.value=e.bed,e.numeric=parseInt(e.bed.slice(0,-1))})),t.sort((function(e,t){return e.numeric<t.numeric?-1:e.numeric>t.numeric?1:0})),s(t)})).catch((function(e){console.log(e)}))):e.history.push("/login")}),[]),Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(J.a,{className:"site-page-header",title:"Select Patient"}),Object(_.jsx)("div",{style:{padding:"30px"},children:Object(_.jsxs)(A.b,{direction:"vertical",size:"middle",children:[Object(_.jsx)(t,{children:"Input Patient Bed"}),Object(_.jsx)(G.a,{style:{width:200},options:r,placeholder:"Select",onSelect:function(e,t){return function(e,t){j(t.value)}(0,t)},filterOption:function(e,t){return-1!==t.value.indexOf(e)},virtual:!1}),d&&Object(_.jsxs)("div",{children:[Object(_.jsxs)("p",{children:["Selected Bed: ",d]}),Object(_.jsx)(T.a,{type:"primary",onClick:function(){window.open("/patient_profile/".concat(d),"_self")},children:"Submit"})]})]})})]})};var U=function(){return Object(l.g)(),Object(c.useEffect)((function(){var e=S();e&&g.a.get("".concat("https://epcr-backend.lentorresidence.com","/users/verifyToken?token=").concat(e)).then((function(e){console.log(e)})).catch((function(e){I()}))}),[]),Object(_.jsx)("div",{children:Object(_.jsx)(J.a,{className:"site-page-header",title:"Announcements"})})},L=n(552),H=n(562),K=n(221),W=n(32),Q=n.n(W),X=n(231),Z=function(e){var t=sessionStorage.getItem("AESKEY");return X.AES.encrypt(e,t).toString()},$=function(e){var t=sessionStorage.getItem("AESKEY");return X.AES.encrypt(JSON.stringify(e),t).toString()},ee=function(e){var t=sessionStorage.getItem("AESKEY");return X.AES.decrypt(e,t).toString(X.enc.Utf8)},te=function(e){var t=sessionStorage.getItem("AESKEY");return X.AES.decrypt(JSON.parse(e),t).toString(X.enc.Utf8)},ne=n(143),ce=(n(287),[{title:"Date",key:"_id",dataIndex:"formVals",render:function(e){return Object(_.jsx)("p",{children:JSON.parse(e).date})}},{title:"Time",key:"_id",dataIndex:"formVals",render:function(e){return Object(_.jsx)("p",{children:JSON.parse(e).time})}},{title:"Restraints Applied Correctly",key:"_id",dataIndex:"formVals",render:function(e){return Object(_.jsx)("p",{children:JSON.parse(e).r1})}},{title:"Body & Limbs Comfortable",key:"_id",dataIndex:"formVals",render:function(e){return Object(_.jsx)("p",{children:JSON.parse(e).r2})}},{title:"Restrained Limbs",children:[{title:"Adequate Circulation",key:"_id",dataIndex:"formVals",render:function(e){return Object(_.jsx)("p",{children:JSON.parse(e).r3})}},{title:"Adequate ROM",key:"_id",dataIndex:"formVals",render:function(e){return Object(_.jsx)("p",{children:JSON.parse(e).r4})}}]},{title:"Skin Integrity Checked",key:"_id",dataIndex:"formVals",render:function(e){return Object(_.jsx)("p",{children:JSON.parse(e).r5})}},{title:"Type of Restraints",key:"_id",dataIndex:"formVals",render:function(e){return Object(_.jsx)("p",{children:JSON.parse(e)["r-restraints-type"]})}},{title:"Remarks",key:"_id",dataIndex:"formVals",render:function(e){return Object(_.jsx)("p",{children:JSON.parse(e)["r-remarks"]})}},{title:"Staff",key:"_id",dataIndex:"staff"},{title:"Submitted D/T",key:"_id",dataIndex:"creationDate",render:function(e){return Object(_.jsx)("p",{children:Q()(e).format("MMMM Do YYYY, h:mm:ss a")})}}]),ae=[{title:"Date",key:"_id",dataIndex:"formVals",render:function(e){return Object(_.jsx)("p",{children:JSON.parse(e).date})}},{title:"Time",key:"_id",dataIndex:"formVals",render:function(e){return Object(_.jsx)("p",{children:JSON.parse(e).time})}},{title:"General Condition",key:"_id",dataIndex:"formVals",render:function(e){return Object(_.jsx)("p",{children:JSON.parse(e).p1})}},{title:"Mental State",key:"_id",dataIndex:"formVals",render:function(e){return Object(_.jsx)("p",{children:JSON.parse(e).p2})}},{title:"Skin Care",key:"_id",dataIndex:"formVals",render:function(e){return Object(_.jsx)("p",{children:JSON.parse(e).p3})}},{title:"Hygiene/ Bathing",key:"_id",dataIndex:"formVals",render:function(e){return Object(_.jsx)("p",{children:JSON.parse(e).p4})}},{title:"Oral Care",key:"_id",dataIndex:"formVals",render:function(e){return Object(_.jsx)("p",{children:JSON.parse(e).p5})}},{title:"Feeding",key:"_id",dataIndex:"formVals",render:function(e){return Object(_.jsx)("p",{children:JSON.parse(e).p6})}},{title:"Bladder",key:"_id",dataIndex:"formVals",render:function(e){return Object(_.jsx)("p",{children:JSON.parse(e).p7})}},{title:"Bowel",key:"_id",dataIndex:"formVals",render:function(e){return Object(_.jsx)("p",{children:JSON.parse(e).p8})}},{title:"Mobility",key:"_id",dataIndex:"formVals",render:function(e){return Object(_.jsx)("p",{children:JSON.parse(e).p9})}},{title:"Rest at Night",key:"_id",dataIndex:"formVals",render:function(e){return Object(_.jsx)("p",{children:JSON.parse(e).p10})}},{title:"Therapy",key:"_id",dataIndex:"formVals",render:function(e){return Object(_.jsx)("p",{children:JSON.parse(e).p11})}},{title:"Visited",key:"_id",dataIndex:"formVals",render:function(e){return Object(_.jsx)("p",{children:JSON.parse(e).p12})}},{title:"Remarks",key:"_id",dataIndex:"formVals",render:function(e){return Object(_.jsx)("p",{children:JSON.parse(e)["r-remarks"]})}},{title:"Staff",key:"_id",dataIndex:"staff"},{title:"Submitted D/T",key:"_id",dataIndex:"creationDate",render:function(e){return Object(_.jsx)("p",{children:Q()(e).format("MMMM Do YYYY, h:mm:ss a")})}}];var re=function(e){return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsxs)("h4",{children:["Bed: ",e.patientData.bed,Object(_.jsx)("br",{}),"Name: ",ee(e.patientData.name),Object(_.jsx)("br",{}),"NRIC: ",ee(e.patientData.NRIC),Object(_.jsx)("br",{}),"Profile Creation:"," ",Q()(e.patientData.creationDate).format("MMMM Do YYYY, h:mm:ss a"),Object(_.jsx)("br",{}),"Status: ",e.patientData.status]}),Object(_.jsxs)("p",{children:["Identifier: ",e.patientData.uuid]})]})};n.p;var se=function(e){var t=Object(c.useState)(),n=Object(o.a)(t,2),a=n[0],r=n[1],s=Object(c.useState)(),i=Object(o.a)(s,2),d=i[0],j=i[1],u=Object(c.useState)({role:null}),b=Object(o.a)(u,2),h=b[0],p=b[1],O=Object(c.useState)(),m=Object(o.a)(O,2),x=m[0],f=m[1],y=Object(c.useState)([Q()().add(-2,"days").startOf("day"),Q()().endOf("day")]),k=Object(o.a)(y,2),N=k[0],C=k[1],R=Object(c.useState)(),w=Object(o.a)(R,2),M=w[0],D=w[1],P=L.a.RangePicker,Y=v(),F=Object(l.h)().bedNo,V=S();function E(e,t){return e.timeslot<t.timeslot?1:e.timeslot>t.timeslot?-1:0}function B(e,t){return e.dateTime<t.dateTime?1:e.dateTime>t.dateTime?-1:0}Object(c.useEffect)((function(){V?(g.a.get("".concat("https://epcr-backend.lentorresidence.com","/users/verifyToken?token=").concat(V)).then((function(e){p(Y.role)})).catch((function(e){I()})),g.a.post("".concat("https://epcr-backend.lentorresidence.com","/residents/getByBed"),{bed:F},{headers:{token:V}}).then((function(e){r(e.data[0])})).catch((function(e){console.log(e),j(e.response.data.error)}))):e.history.push("/login")}),[]),Object(c.useEffect)((function(){a&&(g.a.post("".concat("https://epcr-backend.lentorresidence.com","/forms/restraintsForm/submissionHistory"),{uuid:a.uuid,restraintsDatePicker:N},{headers:{token:V}}).then((function(e){var t=e.data;t.map((function(e){e.formVals=te(e.formData),e.timeslot=parseInt(e.timeslot)})),t.sort(E),t.sort(B),f(t)})).catch((function(e){console.log(e)})),g.a.post("".concat("https://epcr-backend.lentorresidence.com","/forms/progressRecordForm/submissionHistory"),{uuid:a.uuid,restraintsDatePicker:N},{headers:{token:V}}).then((function(e){var t=e.data;t.map((function(e){e.formVals=te(e.formData)}));var n=["ND","AM","PM"];t.sort((function(e,t){return n.indexOf(t.timeslot)-n.indexOf(e.timeslot)})),t.sort(B),D(t)})).catch((function(e){console.log(e)})))}),[a,N]);var q=window.matchMedia("(max-width: 600px)").matches;return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(T.a,{style:{margin:"10px"},onClick:function(){e.history.push("/select_patient")},type:"default",children:"Back to patient selector"}),Object(_.jsx)(J.a,{className:"site-page-header",title:"Patient Profile"}),Object(_.jsx)("div",{style:{padding:"30px"},children:Object(_.jsxs)(A.b,{direction:"vertical",size:"middle",children:[a&&Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(re,{patientData:a}),Object(_.jsx)("br",{}),Object(_.jsx)(T.a,{type:"primary",onClick:function(){e.history.push("/forms/restraints_form/".concat(a.uuid))},children:"Submit Restraints Form"}),Object(_.jsx)(T.a,{type:"primary",onClick:function(){e.history.push("/forms/progress_record_form/".concat(a.uuid))},style:{background:"#32a852"},children:"Submit Progress Record Form"}),Object(_.jsx)("br",{}),"full"==h&&Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("h4",{children:"Monitoring Toggle"}),Object(_.jsx)("p",{children:"Restraints Monitoring:"}),Object(_.jsx)(H.a,{defaultChecked:a.restraintsMonitoring,onChange:function(e){g.a.post("".concat("https://epcr-backend.lentorresidence.com","/residents/setRestraintsMonitoringStatus"),{uuid:a.uuid,monitor:e},{headers:{token:V}}).catch((function(e){console.log(e)}))}})," ","Progress Record Monitoring:",Object(_.jsx)(H.a,{defaultChecked:a.progressRecordMonitoring,onChange:function(e){g.a.post("".concat("https://epcr-backend.lentorresidence.com","/residents/setProgressRecordMonitoringStatus"),{uuid:a.uuid,monitor:e},{headers:{token:V}}).catch((function(e){console.log(e)}))}})]}),Object(_.jsx)("br",{}),Object(_.jsxs)(A.b,{direction:"vertical",size:12,children:[Object(_.jsx)("span",{children:"Select Date for Reports below"}),Object(_.jsx)(P,{defaultValue:[Q()().add(-2,"days").startOf("day"),Q()().startOf("day")],onChange:function(e){var t=e[1];t=Q()(t).endOf("day"),C([e[0],t])}})]}),Object(_.jsx)("h3",{children:"Restraints Form submission history"}),Object(_.jsx)(T.a,{style:{margin:"10px"},onClick:function(){!function(e,t){var n=new ne.default("landscape");n.text("Restraints Report",5,15),n.setFontSize(10),n.text("Resident Name: "+ee(e.name),5,30),n.text("Resident NRIC: "+ee(e.NRIC),5,35),n.text("Report Generated: "+Q()().toDate(),5,40);for(var c=[],a=0;a<t.length;a++){var r=[];console.log(JSON.parse(t[a].formVals).time),r.push(JSON.parse(t[a].formVals).date),r.push(JSON.parse(t[a].formVals).time),r.push(JSON.parse(t[a].formVals).r1),r.push(JSON.parse(t[a].formVals).r2),r.push(JSON.parse(t[a].formVals).r3),r.push(JSON.parse(t[a].formVals).r4),r.push(JSON.parse(t[a].formVals).r5),r.push(JSON.parse(t[a].formVals)["r-restraints-type"]),r.push(JSON.parse(t[a].formVals)["r-remarks"]),r.push(t[a].staff),r.push(Q()(t[a].creationDate).format("MMMM Do YYYY, h:mm:ss a")),c.push(r)}n.autoTable({theme:"grid",startY:50,head:[["Date","Time","Restraints Applied Correctly","Body & Limbs in Comfortable Position","Adequate Circulation (Restrained Limbs)","Adequate ROM (Restrained Limbs)","Skin Integrity Checked","Restraints Type","Remarks","Staff Signature","Submission D/T"]],body:c}),n.save("table.pdf")}(a,x)},type:"default",children:"Export Restraints Data"}),Object(_.jsx)("div",{className:"pcf",children:Object(_.jsx)(K.a,{style:{width:q?400:1100},scroll:{x:300},columns:ce,className:"table",data:x})}),Object(_.jsx)("h3",{children:"Progress Record Form submission history"}),Object(_.jsx)(T.a,{style:{margin:"10px"},onClick:function(){!function(e,t){var n=new ne.default("landscape");n.text("Progress Record Report",5,15),n.setFontSize(10),n.text("Resident Name: "+ee(e.name),5,30),n.text("Resident NRIC: "+ee(e.NRIC),5,35),n.text("Report Generated: "+Q()().toDate(),5,40),n.setFontSize(7);for(var c=[],a=0;a<t.length;a++){var r=[];console.log(JSON.parse(t[a].formVals)),r.push(JSON.parse(t[a].formVals).date),r.push(JSON.parse(t[a].formVals).time),r.push(JSON.parse(t[a].formVals).p1),r.push(JSON.parse(t[a].formVals).p2),r.push(JSON.parse(t[a].formVals).p3),r.push(JSON.parse(t[a].formVals).p4),r.push(JSON.parse(t[a].formVals).p5),r.push(JSON.parse(t[a].formVals).p6),r.push(JSON.parse(t[a].formVals).p7),r.push(JSON.parse(t[a].formVals).p8),r.push(JSON.parse(t[a].formVals).p9),r.push(JSON.parse(t[a].formVals).p10),r.push(JSON.parse(t[a].formVals).p11),r.push(JSON.parse(t[a].formVals).p12),r.push(JSON.parse(t[a].formVals)["r-remarks"]),r.push(t[a].staff),r.push(Q()(t[a].creationDate).format("MMMM Do YYYY, h:mm:ss a")),c.push(r)}n.autoTable({theme:"grid",startY:50,styles:{fontSize:7},head:[["Date","Time","General Condition","Mental State\t","Skin Care","Hygiene/Bathing","Oral Care","Feeding","Bladder","Bowel","Mobility","Rest at Night","Therapy","Visited","Remarks","Staff Signature","Submission D/T"]],body:c}),n.save("table.pdf")}(a,M)},type:"default",children:"Export Progress Record Data"}),Object(_.jsx)("div",{className:"pcf",children:Object(_.jsx)(K.a,{style:{width:q?400:1100},scroll:{x:300},columns:ae,data:M,className:"table"})})]}),d&&Object(_.jsx)("p",{children:d})]})})]})},ie=n(86),oe=n(554),le=n(180),de=n(559),je=ie.a.Option,ue={labelCol:{span:30,offset:0},wrapperCol:{span:50}};var be=function(e){var t=Object(c.useState)(),n=Object(o.a)(t,2),a=n[0],r=n[1],s=Object(c.useState)(),i=Object(o.a)(s,2),d=i[0],j=i[1],u=Object(c.useState)(null),b=Object(o.a)(u,2),h=b[0],p=(b[1],Object(c.useState)()),O=Object(o.a)(p,2),m=O[0],x=O[1],f=Object(c.useState)(!1),y=Object(o.a)(f,2),k=y[0],C=y[1],R=Object(l.h)().uuid,w=S();function M(){e.history.push("/patient_profile/"+a.bed,"_self")}return Object(c.useEffect)((function(){w?(g.a.get("".concat("https://epcr-backend.lentorresidence.com","/users/verifyToken?token=").concat(w)).then((function(e){x(v().username)})).catch((function(e){I()})),g.a.post("".concat("https://epcr-backend.lentorresidence.com","/residents/getByUUID"),{uuid:R},{headers:{token:w}}).then((function(e){r(e.data[0])})).catch((function(e){console.log(e.response.data.error),j(e.response.data.error)}))):e.history.push("/login")}),[]),Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(T.a,{style:{margin:"10px"},onClick:M,type:"default",children:"Back to patient profile"}),Object(_.jsx)(J.a,{className:"site-page-header",title:"Restraints Form"}),Object(_.jsx)("div",{style:{padding:"30px"},children:Object(_.jsxs)(A.b,{direction:"vertical",size:"middle",children:[a&&m&&!k&&Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(re,{patientData:a}),Object(_.jsxs)(oe.a,Object(N.a)(Object(N.a)({name:"validate_other"},ue),{},{onFinish:function(e){if(e.time){var t=Q()(e.date).startOf("day");e.date=e.date.format("YYYY-MM-DD"),console.log("Received values of form: ",JSON.stringify(e)),g.a.post("".concat("https://epcr-backend.lentorresidence.com","/forms/restraintsForm/submit"),{resident:R,formData:$(e),bed:a.bed,dateTime:t,timeslot:e.time},{headers:{token:w}}).then((function(e){C(!0)})).catch((function(e){console.log(e.response.data.error),j(e.response.data.error)}))}else alert("Time is missing")},children:[Object(_.jsx)(oe.a.Item,{name:"date",label:"Date",required:!0,children:Object(_.jsx)(L.a,{})}),Object(_.jsx)(oe.a.Item,{onChange:function(){console.log("time change")},name:"time",label:"Time",required:!0,children:Object(_.jsxs)(ie.a,{placeholder:"Select time of check",virtual:!1,children:[Object(_.jsx)(je,{value:"0000",children:"0000"}),Object(_.jsx)(je,{value:"0200",children:"0200"}),Object(_.jsx)(je,{value:"0400",children:"0400"}),Object(_.jsx)(je,{value:"0600",children:"0600"}),Object(_.jsx)(je,{value:"0800",children:"0800"}),Object(_.jsx)(je,{value:"1000",children:"1000"}),Object(_.jsx)(je,{value:"1200",children:"1200"}),Object(_.jsx)(je,{value:"1400",children:"1400"}),Object(_.jsx)(je,{value:"1600",children:"1600"}),Object(_.jsx)(je,{value:"1800",children:"1800"}),Object(_.jsx)(je,{value:"2000",children:"2000"}),Object(_.jsx)(je,{value:"2200",children:"2200"})]})}),h&&Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("p",{children:h}),Object(_.jsx)("p",{})]}),Object(_.jsx)(oe.a.Item,{name:"r1",label:"Restraints applied correctly",children:Object(_.jsxs)(le.a.Group,{children:[Object(_.jsx)(le.a,{value:"Y",children:"Yes"}),Object(_.jsx)(le.a,{value:"N",children:"No"}),Object(_.jsx)(le.a,{value:"",children:"NA"})]})}),Object(_.jsx)(oe.a.Item,{name:"r2",label:"Body & limbs in comfortable position",children:Object(_.jsxs)(le.a.Group,{children:[Object(_.jsx)(le.a,{value:"Y",children:"Yes"}),Object(_.jsx)(le.a,{value:"N",children:"No"}),Object(_.jsx)(le.a,{value:"",children:"NA"})]})}),Object(_.jsx)(oe.a.Item,{name:"r3",label:"(Restrained Extremities) Adequate circulation",children:Object(_.jsxs)(le.a.Group,{children:[Object(_.jsx)(le.a,{value:"Y",children:"Yes"}),Object(_.jsx)(le.a,{value:"N",children:"No"}),Object(_.jsx)(le.a,{value:"",children:"NA"})]})}),Object(_.jsx)(oe.a.Item,{name:"r4",label:"(Restrained Extremities) Adequate ROM",children:Object(_.jsxs)(le.a.Group,{children:[Object(_.jsx)(le.a,{value:"Y",children:"Yes"}),Object(_.jsx)(le.a,{value:"N",children:"No"}),Object(_.jsx)(le.a,{value:"",children:"NA"})]})}),Object(_.jsx)(oe.a.Item,{name:"r5",label:"Skin integrity checked",children:Object(_.jsxs)(le.a.Group,{children:[Object(_.jsx)(le.a,{value:"Y",children:"Yes"}),Object(_.jsx)(le.a,{value:"N",children:"No"}),Object(_.jsx)(le.a,{value:"",children:"NA"})]})}),Object(_.jsx)(oe.a.Item,{name:"r-restraints-type",label:"Type of Restraints",children:Object(_.jsx)(P.a,{})}),Object(_.jsx)(oe.a.Item,{name:"r-remarks",label:"Remarks",children:Object(_.jsx)(P.a,{})}),Object(_.jsx)(oe.a.Item,{name:"staff",label:"Submitted by",children:Object(_.jsx)("span",{className:"ant-form-text",children:m})}),Object(_.jsx)(oe.a.Item,{children:Object(_.jsx)(T.a,{type:"primary",htmlType:"submit",children:"Submit"})})]}))]}),k&&Object(_.jsx)(de.a,{status:"success",title:"Success!",subTitle:"You may view the submitted data on patient profile page",extra:[Object(_.jsx)(T.a,{type:"primary",onClick:function(){e.history.push("/select_patient/","_self")},children:"Select new patient"},"console"),Object(_.jsx)(T.a,{onClick:M,children:"Submit new form for same patient"},"buy")]}),d&&Object(_.jsx)("p",{children:d})]})})]})},he=n(549),pe=n(551),Oe=n(558);var me=function(e){q.a.Text,q.a.Link;var t=Object(c.useState)({username:null}),n=Object(o.a)(t,2),a=n[0],r=n[1],s=Object(c.useState)(),i=Object(o.a)(s,2),l=i[0],d=i[1],j=Object(c.useState)(),u=Object(o.a)(j,2),b=u[0],h=u[1],O=Object(c.useState)(),m=Object(o.a)(O,2),x=m[0],f=m[1],y=Object(c.useState)(),k=Object(o.a)(y,2),N=k[0],C=k[1],R=Object(c.useState)(),w=Object(o.a)(R,2),M=w[0],D=w[1],Y=S(),F=v();function V(){g.a.post("".concat("https://epcr-backend.lentorresidence.com","/residents/listAdmittedFullDetails"),{},{headers:{token:Y}}).then((function(e){var t=e.data;t.map((function(e){e.name=ee(e.name),e.NRIC=ee(e.NRIC),e.numeric=parseInt(e.bed)})),t.sort((function(e,t){return e.numeric<t.numeric?-1:e.numeric>t.numeric?1:0})),d(t)})).catch((function(e){console.log(e)}))}function E(){g.a.post("".concat("https://epcr-backend.lentorresidence.com","/residents/listDischargedFullDetails"),{},{headers:{token:Y}}).then((function(e){var t=e.data;t.map((function(e){e.name=ee(e.name),e.NRIC=ee(e.NRIC)})),h(t)})).catch((function(e){console.log(e)}))}Object(c.useEffect)((function(){Y?(g.a.get("".concat("https://epcr-backend.lentorresidence.com","/users/verifyToken?token=").concat(Y)).then((function(e){r(F)})).catch((function(e){I()})),V(),E()):e.history.push("/login")}),[]);var B=Object(c.useState)(!1),G=Object(o.a)(B,2),z=G[0],U=G[1];function L(e){}var K=[{title:"Name",key:"_id",dataIndex:"name"},{title:"NRIC",key:"_id",dataIndex:"NRIC"},{title:"Bed",key:"_id",dataIndex:"bed"},{title:"Initial admission",key:"_id",dataIndex:"creationDate",render:function(e){return Object(_.jsx)("p",{children:Q()(e).format("MMMM Do YYYY, h:mm:ss a")})}},{title:"Action",key:"action",width:100,render:function(t){return Object(_.jsxs)(A.b,{size:"middle",children:[Object(_.jsx)("a",{onClick:function(){e.history.push("/patient_profile/"+t.bed)},children:"View Patient"}),Object(_.jsx)(he.a,{title:"Are you sure to discharge this patient?",onConfirm:function(){return e=t.uuid,void g.a.post("".concat("https://epcr-backend.lentorresidence.com","/residents/discharge"),{uuid:e},{headers:{token:Y}}).then((function(e){V(),E()})).catch((function(e){console.log(e.error)}));var e},onCancel:"",okText:"Yes",cancelText:"No",children:Object(_.jsx)("a",{href:"#",children:"Discharge"})}),Object(_.jsx)(H.a,{checked:t.restraintsMonitoring,onChange:function(){console.log(t.restraintsMonitoring),function(e){var t;e.restraintsMonitoring?(t=!1,console.log("turn off")):(t=!0,console.log("turn on")),g.a.post("".concat("https://epcr-backend.lentorresidence.com","/residents/setRestraintsMonitoringStatus"),{uuid:e.uuid,monitor:t},{headers:{token:Y}}).then((function(e){V(),E()})).catch((function(e){console.log(e.error)}))}(t)},checkedChildren:"R",unCheckedChildren:"R"})," ",Object(_.jsx)(H.a,{checked:t.progressRecordMonitoring,onChange:function(){!function(e){var t;e.progressRecordMonitoring?(t=!1,console.log("turn off")):(t=!0,console.log("turn on")),g.a.post("".concat("https://epcr-backend.lentorresidence.com","/residents/setProgressRecordMonitoringStatus"),{uuid:e.uuid,monitor:t},{headers:{token:Y}}).then((function(e){V(),E()})).catch((function(e){console.log(e.error)}))}(t)},checkedChildren:"P",unCheckedChildren:"P"})]})}}],W=[{title:"Name",key:"_id",dataIndex:"name"},{title:"NRIC",key:"_id",dataIndex:"NRIC"},{title:"Bed",key:"_id",dataIndex:"bed"},{title:"Initial admission",key:"_id",dataIndex:"creationDate",render:function(e){return Object(_.jsx)("p",{children:Q()(e).format("MMMM Do YYYY, h:mm:ss a")})}},{title:"Action",key:"action",width:100,render:function(t){return Object(_.jsx)(A.b,{size:"middle",children:Object(_.jsx)("a",{onClick:function(){e.history.push("/patient_profile/"+t.bed)},children:"View Patient"})})}}],X=[{title:"Name",key:"_id",dataIndex:"name"},{title:"NRIC",key:"_id",dataIndex:"NRIC"},{title:"Initial admission",key:"_id",dataIndex:"creationDate",render:function(e){return Object(_.jsx)("p",{children:Q()(e).format("MMMM Do YYYY, h:mm:ss a")})}},{title:"Action",key:"action",width:100,render:function(t){return Object(_.jsxs)(A.b,{size:"middle",children:[Object(_.jsx)("a",{onClick:function(){e.history.push("/patient_profile/"+t.uuid)},children:"View Patient"}),Object(_.jsx)(T.a,{type:"secondary",onClick:function(){var e;C({uuid:(e=t).uuid,name:e.name}),D(null),U(!0)},children:"Re-admit"})]})}}];return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(J.a,{className:"site-page-header",title:"Residents Module"}),Object(_.jsxs)("div",{style:{padding:"30px"},children:[Object(_.jsxs)(A.b,{direction:"vertical",size:"middle",children:["full"==a.role&&Object(_.jsx)(T.a,{onClick:function(){e.history.push("/residents_module/admit")},children:"Admit New Patient"}),Object(_.jsx)("h3",{children:"Table of Admitted Patients"}),"full"==a.role&&Object(_.jsx)(pe.a,{columns:K,dataSource:l,onChange:L}),"restricted"==a.role&&Object(_.jsx)(pe.a,{columns:W,dataSource:l,onChange:L}),Object(_.jsx)("br",{}),"full"==a.role&&Object(_.jsxs)("div",{children:[Object(_.jsx)("h3",{children:"Table of Discharged Patients"}),Object(_.jsx)(pe.a,{columns:X,dataSource:b,onChange:L})]})]}),Object(_.jsxs)(Oe.a,{title:"Readmit Resident",visible:z,onOk:function(){g.a.post("".concat("https://epcr-backend.lentorresidence.com","/residents/readmit"),{uuid:N.uuid,bed:x},{headers:{token:Y}}).then((function(e){V(),E(),U(!1)})).catch((function(e){e.response.data.error&&D(e.response.data.error)}))},onCancel:function(){U(!1)},children:[N&&Object(_.jsx)("p",{children:N.name}),Object(_.jsx)(P.a,{name:"readmitNewBed",addonBefore:"Bed",onChange:function(e){f(e.target.value)}}),M&&Object(_.jsx)(p.a,{message:M,type:"error"})]})]})]})};var xe=function(e){var t=S(),n=Object(c.useState)(!1),a=Object(o.a)(n,2),r=a[0],s=a[1],i=Object(c.useState)(),l=Object(o.a)(i,2),d=l[0],j=l[1];function u(){e.history.push("/residents_module")}return Object(c.useEffect)((function(){t?g.a.get("".concat("https://epcr-backend.lentorresidence.com","/users/verifyToken?token=").concat(t)).catch((function(e){I()})):e.history.push("/login")}),[]),Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(T.a,{style:{margin:"10px"},onClick:u,type:"default",children:"Back"}),Object(_.jsx)(J.a,{className:"site-page-header",title:"Admit Patient"}),Object(_.jsx)("div",{style:{padding:"30px"},children:Object(_.jsxs)(A.b,{direction:"vertical",size:"middle",children:[d&&Object(_.jsx)(_.Fragment,{children:Object(_.jsx)(p.a,{message:"Error",description:d,type:"error",showIcon:!0})}),!r&&Object(_.jsx)("div",{children:Object(_.jsxs)(oe.a,Object(N.a)(Object(N.a)({name:"validate_other"},{labelCol:{span:30,offset:0},wrapperCol:{span:50}}),{},{onFinish:function(e){console.log("Received values of form: ",e),g.a.post("".concat("https://epcr-backend.lentorresidence.com","/residents/admit"),{bed:e.bed.toUpperCase(),name:Z(e.name.toUpperCase()),NRIC:Z(e.NRIC.toUpperCase())},{headers:{token:t}}).then((function(e){s(!0),j(null)})).catch((function(e){console.log(e.response.data.error),j(e.response.data.error)}))},children:[Object(_.jsx)(oe.a.Item,{name:"name",label:"Resident Name",required:!0,children:Object(_.jsx)(P.a,{required:!0})}),Object(_.jsx)(oe.a.Item,{name:"NRIC",label:"NRIC",required:!0,children:Object(_.jsx)(P.a,{required:!0})}),Object(_.jsx)(oe.a.Item,{name:"bed",label:"Resident Bed",required:!0,children:Object(_.jsx)(P.a,{required:!0})}),Object(_.jsx)(oe.a.Item,{children:Object(_.jsx)(T.a,{type:"primary",htmlType:"submit",children:"Submit"})})]}))}),r&&Object(_.jsx)(de.a,{status:"success",title:"Success!",subTitle:"Patient Admitted",extra:[Object(_.jsx)(T.a,{type:"primary",onClick:u,children:"Back"},"console")]})]})})]})},fe=n(150),ge=ie.a.Option,ye={labelCol:{span:30,offset:0},wrapperCol:{span:50}};var ve=function(e){var t=Object(c.useState)(),n=Object(o.a)(t,2),a=n[0],r=n[1],s=Object(c.useState)(),i=Object(o.a)(s,2),d=i[0],j=i[1],u=Object(c.useState)(),b=Object(o.a)(u,2),h=b[0],p=b[1],O=Object(c.useState)(!1),m=Object(o.a)(O,2),x=m[0],f=m[1],y=Object(l.h)().uuid,k=S();function C(){e.history.push("/patient_profile/"+a.bed,"_self")}return Object(c.useEffect)((function(){k?(g.a.get("".concat("https://epcr-backend.lentorresidence.com","/users/verifyToken?token=").concat(k)).then((function(e){p(v().username)})).catch((function(e){I()})),g.a.post("".concat("https://epcr-backend.lentorresidence.com","/residents/getByUUID"),{uuid:y},{headers:{token:k}}).then((function(e){r(e.data[0])})).catch((function(e){console.log(e)}))):e.history.push("/login")}),[]),Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(T.a,{style:{margin:"10px"},onClick:C,type:"default",children:"Back to patient profile"}),Object(_.jsx)(J.a,{className:"site-page-header",title:"Progress Record Form"}),Object(_.jsx)("div",{style:{padding:"30px"},children:Object(_.jsxs)(A.b,{direction:"vertical",size:"middle",children:[a&&h&&!x&&Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(re,{patientData:a}),Object(_.jsxs)(oe.a,Object(N.a)(Object(N.a)({name:"validate_other"},ye),{},{onFinish:function(e){if(e.time){var t=Q()(e.date).startOf("day");e.date=e.date.format("YYYY-MM-DD"),console.log("Received values of form: ",e),g.a.post("".concat("https://epcr-backend.lentorresidence.com","/forms/progressRecordForm/submit"),{resident:y,formData:$(e),dateTime:t,timeslot:e.time,bed:a.bed},{headers:{token:k}}).then((function(e){f(!0)})).catch((function(e){console.log(e.response.data.error),j(e.response.data.error)}))}else alert("Time is missing")},initialValues:{},children:[Object(_.jsx)(oe.a.Item,{name:"date",label:"Date",required:!0,children:Object(_.jsx)(L.a,{})}),Object(_.jsx)(oe.a.Item,{name:"time",label:"Time",required:!0,children:Object(_.jsxs)(ie.a,{placeholder:"Select time of check",virtual:!1,children:[Object(_.jsx)(ge,{value:"ND",children:"ND"}),Object(_.jsx)(ge,{value:"AM",children:"AM"}),Object(_.jsx)(ge,{value:"PM",children:"PM"})]})}),Object(_.jsx)(oe.a.Item,{name:"p1",label:"General Condition",children:Object(_.jsxs)(le.a.Group,{children:[Object(_.jsx)(le.a,{value:"Satisfactory",children:"Satisfactory"}),Object(_.jsx)(le.a,{value:"Unwell",children:"Unwell"}),Object(_.jsx)(le.a,{value:"Poor",children:"Poor"}),Object(_.jsx)(le.a,{value:"",children:"NA"})]})}),Object(_.jsx)(oe.a.Item,{name:"p2",label:"Mental State",children:Object(_.jsxs)(le.a.Group,{children:[Object(_.jsx)(le.a,{value:"Oriented",children:"Oriented"}),Object(_.jsx)(le.a,{value:"Confused",children:"Confused"}),Object(_.jsx)(le.a,{value:"Behavioural Problem",children:"Behavioural Problem"}),Object(_.jsx)(le.a,{value:"Uncommunicative",children:"Uncommunicative"}),Object(_.jsx)(le.a,{value:"",children:"NA"})]})}),Object(_.jsx)(oe.a.Item,{name:"p3",label:"Skin Care",children:Object(_.jsxs)(le.a.Group,{children:[Object(_.jsx)(le.a,{value:"Intact",children:"Intact"}),Object(_.jsx)(le.a,{value:"Impaired/Rashes",children:"Impaired/Rashes"}),Object(_.jsx)(le.a,{value:"Wound Care",children:"Wound Care"}),Object(_.jsx)(le.a,{value:"",children:"NA"})]})}),Object(_.jsx)(oe.a.Item,{name:"p4",label:"Hygiene/Bathing",children:Object(_.jsxs)(le.a.Group,{children:[Object(_.jsx)(le.a,{value:"Self",children:"Self"}),Object(_.jsx)(le.a,{value:"Assisted Bath",children:"Assisted Bath"}),Object(_.jsx)(le.a,{value:"Bed Bath",children:"Bed Bath"}),Object(_.jsx)(le.a,{value:"",children:"NA"})]})}),Object(_.jsx)(oe.a.Item,{name:"p5",label:"Oral Care",children:Object(_.jsxs)(le.a.Group,{children:[Object(_.jsx)(le.a,{value:"Self",children:"Self"}),Object(_.jsx)(le.a,{value:"Assisted",children:"Assisted"}),Object(_.jsx)(le.a,{value:"Totally Dependent",children:"Totally Dependent"}),Object(_.jsx)(le.a,{value:"",children:"NA"})]})}),Object(_.jsx)(oe.a.Item,{name:"p6",label:"Feeding",children:Object(_.jsxs)(le.a.Group,{children:[Object(_.jsx)(le.a,{value:"Self",children:"Self"}),Object(_.jsx)(le.a,{value:"Assisted",children:"Assisted"}),Object(_.jsx)(le.a,{value:"NGT/PEG",children:"NGT/PEG"}),Object(_.jsx)(le.a,{value:"",children:"NA"})]})}),Object(_.jsx)(oe.a.Item,{name:"p7",label:"Bladder",children:Object(_.jsxs)(fe.a.Group,{children:[Object(_.jsx)(fe.a,{value:"Continent",children:"Continent"}),Object(_.jsx)(fe.a,{value:"Incontinent(Diaper)",children:"Incontinent(Diaper)"}),Object(_.jsx)(fe.a,{value:"IDC/IMC/SPC",children:"IDC/IMC/SPC"})]})}),Object(_.jsx)(oe.a.Item,{name:"p8",label:"Bowel",children:Object(_.jsxs)(fe.a.Group,{children:[Object(_.jsx)(fe.a,{value:"Bowel Opened ",children:"Bowel Opened"}),Object(_.jsx)(fe.a,{value:"Bowel Not Opened",children:"Bowel Not Opened"}),Object(_.jsx)(fe.a,{value:"Continent ",children:"Continent"}),Object(_.jsx)(fe.a,{value:"Incontinent (Diaper) ",children:"Incontinent (Diaper)"}),Object(_.jsx)(fe.a,{value:"Colostomy Care ",children:"Colostomy Care"})]})}),Object(_.jsx)(oe.a.Item,{name:"p9",label:"Mobility",children:Object(_.jsxs)(fe.a.Group,{children:[Object(_.jsx)(fe.a,{value:"Ambulant",children:"Ambulant"}),Object(_.jsx)(fe.a,{value:"Requires Wheelchair",children:"Requires Wheelchair"}),Object(_.jsx)(fe.a,{value:"Requires Walking Aides",children:"Requires Walking Aides"}),Object(_.jsx)(fe.a,{value:"Requires 2hrly Turning",children:"Requires 2hrly Turning"})]})}),Object(_.jsx)(oe.a.Item,{name:"p10",label:"Rest During Night",children:Object(_.jsxs)(le.a.Group,{children:[Object(_.jsx)(le.a,{value:"Good",children:"Good"}),Object(_.jsx)(le.a,{value:"Restless/Interrupted",children:"Restless/Interrupted"}),Object(_.jsx)(le.a,{value:"",children:"NA"})]})}),Object(_.jsx)(oe.a.Item,{name:"p11",label:"Therapy",children:Object(_.jsxs)(le.a.Group,{children:[Object(_.jsx)(le.a,{value:"Active Exercise",children:"Active Exercise"}),Object(_.jsx)(le.a,{value:"Passive Exercise",children:"Passive Exercise"}),Object(_.jsx)(le.a,{value:"",children:"NA"})]})}),Object(_.jsx)(oe.a.Item,{name:"p12",label:"Visited by Relatives/Friend",children:Object(_.jsxs)(le.a.Group,{children:[Object(_.jsx)(le.a,{value:"Yes",children:"Yes"}),Object(_.jsx)(le.a,{value:"No",children:"No"}),Object(_.jsx)(le.a,{value:"",children:"NA"})]})}),Object(_.jsx)(oe.a.Item,{name:"r-remarks",label:"Remarks",children:Object(_.jsx)(P.a,{})}),Object(_.jsx)(oe.a.Item,{name:"staff",label:"Submitted by",children:Object(_.jsx)("span",{className:"ant-form-text",children:h})}),Object(_.jsx)(oe.a.Item,{children:Object(_.jsx)(T.a,{type:"primary",htmlType:"submit",children:"Submit"})})]}))]}),x&&Object(_.jsx)(de.a,{status:"success",title:"Success!",subTitle:"You may view the submitted data on patient profile page",extra:[Object(_.jsx)(T.a,{type:"primary",onClick:function(){e.history.push("/select_patient/","_self")},children:"Select new patient"},"console"),Object(_.jsx)(T.a,{onClick:C,children:"Submit new form for same patient"},"buy")]}),d&&Object(_.jsx)("p",{children:d})]})})]})};var Se=function(e){var t=Object(c.useState)(e),n=Object(o.a)(t,2),a=n[0],r=n[1];return{value:a,onChange:function(e){r(e.target.value)}}},ke=function(e){var t=Object(c.useState)(!1),n=Object(o.a)(t,2),a=n[0],r=n[1],s=Se(""),i=Object(c.useState)(null),l=Object(o.a)(i,2),d=l[0],j=l[1];return Object(c.useEffect)((function(){S()||"/login"===window.location.pathname||"/enroll"===window.location.pathname||window.open("/login","_self")}),[]),Object(_.jsx)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},children:Object(_.jsxs)(A.b,{direction:"vertical",size:"middle",style:{width:"400px"},children:[d?Object(_.jsx)(p.a,{message:"Login Failed",description:d,type:"error",showIcon:!0,style:{textAlign:"left"}}):Object(_.jsx)(_.Fragment,{}),Object(_.jsx)("h4",{children:"Enrollment Secret"}),Object(_.jsx)("p",{children:"Contact admin to assist with keying in enrollment secret"}),Object(_.jsx)(P.a,Object(N.a)(Object(N.a)({},s),{},{size:"large",placeholder:"Enrollment Secret",type:"password",prefix:Object(_.jsx)(Y.a,{})})),Object(_.jsx)(T.a,{type:"primary",size:"large",shape:"round",onClick:function(){j(null),r(!0),g.a.get("".concat("https://go.lentorresidence.com","/").concat(s.value),{timeout:1e3}).then((function(e){console.log(e.data),localStorage.setItem("EncryptedSymmmetricKey",e.data),window.open("/login","_self")})).catch((function(e){r(!1),e.reponse&&401===e.response.status?j(e.response.data.message):j("Enrollment Key Invalid. Please try again.")}))},loading:a,style:{width:"100%"},children:a?"Logging In...":"Login"})]})})};var Ie=function(e){var t=Object(c.useState)(),n=Object(o.a)(t,2),a=n[0],r=n[1];Object(c.useEffect)((function(){var t=S();t?(g.a.get("".concat("https://epcr-backend.lentorresidence.com","/users/verifyToken?token=").concat(t)).then((function(e){})).catch((function(e){I()})),g.a.post("".concat("https://epcr-backend.lentorresidence.com","/users/listStaff"),{},{headers:{token:t}}).then((function(e){r(e.data)})).catch((function(e){console.log(e)}))):e.history.push("/login")}),[]);var s=[{title:"Username",key:"_id",dataIndex:"username"},{title:"Email",key:"_id",dataIndex:"email"},{title:"Role",key:"_id",dataIndex:"role"},{title:"Date Created",key:"_id",dataIndex:"creationDate",render:function(e){return Object(_.jsx)("p",{children:Q()(e).format("MMMM Do YYYY, h:mm:ss a")})}},{title:"Action",key:"action",width:100,render:function(t){return Object(_.jsx)(A.b,{size:"middle",children:Object(_.jsx)("a",{onClick:function(){e.history.push("/users_module/reset_password/"+t.username)},children:"Reset Password"})})}}];return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(J.a,{className:"site-page-header",title:"User Management Module"}),Object(_.jsx)("div",{style:{padding:"30px"},children:Object(_.jsxs)(A.b,{direction:"vertical",size:"middle",children:[Object(_.jsx)(T.a,{onClick:function(){e.history.push("/users_module/addUser")},children:"Add new Staff"}),Object(_.jsx)("h3",{children:"Registed Staff List"}),Object(_.jsx)(pe.a,{columns:s,dataSource:a,onChange:function(e){console.log("params",e)}})]})})]})},Ne=n(297);Ne.config({allowPassphrases:!1,maxLength:128,minLength:10,minPhraseLength:20,minOptionalTestsToPass:7});var Ce=function(e){var t=S(),n=Object(c.useState)(!1),a=Object(o.a)(n,2),r=a[0],s=a[1],i=Object(c.useState)(),l=Object(o.a)(i,2),d=l[0],j=l[1],u=Object(c.useState)(),b=Object(o.a)(u,2),h=b[0],O=b[1],m=function(e){var t=Object(c.useState)(e),n=Object(o.a)(t,2),a=n[0],r=n[1];return{value:a,onChange:function(e){r(e.target.value);var t=Ne.test(e.target.value);O(t.requiredTestErrors)}}}("");function x(){e.history.push("/users_module")}return Object(c.useEffect)((function(){t?g.a.get("".concat("https://epcr-backend.lentorresidence.com","/users/verifyToken?token=").concat(t)).then((function(e){})).catch((function(e){I()})):e.history.push("/login")}),[]),Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(T.a,{style:{margin:"10px"},onClick:x,type:"default",children:"Back"}),Object(_.jsx)(J.a,{className:"site-page-header",title:"Add Staff User"}),Object(_.jsx)("div",{style:{padding:"30px"},children:Object(_.jsxs)(A.b,{direction:"vertical",size:"middle",children:[d&&Object(_.jsx)(_.Fragment,{children:Object(_.jsx)(p.a,{message:"Error",description:d,type:"error",showIcon:!0})}),!r&&Object(_.jsx)("div",{children:Object(_.jsxs)(oe.a,Object(N.a)(Object(N.a)({name:"validate_other"},{labelCol:{span:30,offset:0},wrapperCol:{span:50}}),{},{onFinish:function(e){console.log(h),console.log(h.length),0===h.length?g.a.post("".concat("https://epcr-backend.lentorresidence.com","/users/register"),{username:e.username.toUpperCase(),password:e.password,email:e.email,role:e.role},{headers:{token:t}}).then((function(e){s(!0),j(null)})).catch((function(e){console.log(e.response.data.message),j(e.response.data.message)})):alert("Password complexity requirements not met")},children:[Object(_.jsx)(oe.a.Item,{name:"username",label:"Username",required:!0,children:Object(_.jsx)(P.a,{required:!0})}),Object(_.jsx)(oe.a.Item,{name:"password",label:"Password",required:!0,children:Object(_.jsx)(P.a,Object(N.a)(Object(N.a)({},m),{},{type:"password",required:!0}))}),Object(_.jsx)("p",{children:h}),Object(_.jsx)(oe.a.Item,{name:"email",label:"Email Address",required:!0,children:Object(_.jsx)(P.a,{type:"email",required:!0})}),Object(_.jsx)(oe.a.Item,{name:"role",label:"Role",rules:[{required:!0}],children:Object(_.jsxs)(ie.a,{placeholder:"Select User Role",allowClear:!0,children:[Object(_.jsx)(Option,{value:"restricted",children:"Restricted (Staff)"}),Object(_.jsx)(Option,{value:"full",children:"Full (Admin)"})]})}),Object(_.jsx)(oe.a.Item,{children:Object(_.jsx)(T.a,{type:"primary",htmlType:"submit",children:"Submit"})})]}))}),r&&Object(_.jsx)(de.a,{status:"success",title:"Success!",subTitle:"Staff Account Created",extra:[Object(_.jsx)(T.a,{type:"primary",onClick:x,children:"Back"},"console")]})]})})]})},_e=n(297);_e.config({allowPassphrases:!1,maxLength:128,minLength:10,minPhraseLength:20,minOptionalTestsToPass:7});var Re=function(e){var t=S(),n=Object(l.h)().username,a=Object(c.useState)(!1),r=Object(o.a)(a,2),s=r[0],i=r[1],d=Object(c.useState)(),j=Object(o.a)(d,2),u=j[0],b=j[1],h=Object(c.useState)(),O=Object(o.a)(h,2),m=O[0],x=O[1],f=function(e){var t=Object(c.useState)(e),n=Object(o.a)(t,2),a=n[0],r=n[1];return{value:a,onChange:function(e){r(e.target.value);var t=_e.test(e.target.value);x(t.requiredTestErrors)}}}("");function y(){e.history.push("/")}return Object(c.useEffect)((function(){t?g.a.get("".concat("https://epcr-backend.lentorresidence.com","/users/verifyToken?token=").concat(t)).then((function(e){})).catch((function(e){I()})):e.history.push("/login")}),[]),Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(T.a,{style:{margin:"10px"},onClick:y,type:"default",children:"Back"}),Object(_.jsx)(J.a,{className:"site-page-header",title:"Reset Password"}),Object(_.jsx)("div",{style:{padding:"30px"},children:Object(_.jsxs)(A.b,{direction:"vertical",size:"middle",children:[u&&Object(_.jsx)(_.Fragment,{children:Object(_.jsx)(p.a,{message:"Error",description:u,type:"error",showIcon:!0})}),!s&&Object(_.jsx)("div",{children:Object(_.jsxs)(oe.a,Object(N.a)(Object(N.a)({name:"validate_other"},{labelCol:{span:30,offset:0},wrapperCol:{span:50}}),{},{onFinish:function(e){0===m.length?g.a.post("".concat("https://epcr-backend.lentorresidence.com","/users/resetPassword"),{username:n,password:e.password},{headers:{token:t}}).then((function(e){i(!0),b(null)})).catch((function(e){console.log(e.response.data.message),b(e.response.data.message)})):alert("Password complexity requirements not met")},children:[Object(_.jsx)(oe.a.Item,{name:"password",label:"Password",required:!0,children:Object(_.jsx)(P.a,Object(N.a)(Object(N.a)({},f),{},{type:"password",required:!0}))}),Object(_.jsx)("p",{children:m}),Object(_.jsx)(oe.a.Item,{children:Object(_.jsx)(T.a,{type:"primary",htmlType:"submit",children:"Submit"})})]}))}),s&&Object(_.jsx)(de.a,{status:"success",title:"Success!",subTitle:"Password reset successful",extra:[Object(_.jsx)(T.a,{type:"primary",onClick:y,children:"Back"},"console")]})]})})]})},we=n(553);var Me=function(e){var t=e.pendingSubmission,n=t["0000"].map((function(e){return Object(_.jsx)("li",{children:Object(_.jsx)("a",{href:"/patient_profile/".concat(e),children:e})},e)})),c=t["0200"].map((function(e){return Object(_.jsx)("li",{children:Object(_.jsx)("a",{href:"/patient_profile/".concat(e),children:e})},e)})),a=t["0400"].map((function(e){return Object(_.jsx)("li",{children:Object(_.jsx)("a",{href:"/patient_profile/".concat(e),children:e})},e)})),r=t["0600"].map((function(e){return Object(_.jsx)("li",{children:Object(_.jsx)("a",{href:"/patient_profile/".concat(e),children:e})},e)})),s=t["0800"].map((function(e){return Object(_.jsx)("li",{children:Object(_.jsx)("a",{href:"/patient_profile/".concat(e),children:e})},e)})),i=t[1e3].map((function(e){return Object(_.jsx)("li",{children:Object(_.jsx)("a",{href:"/patient_profile/".concat(e),children:e})},e)})),o=t[1200].map((function(e){return Object(_.jsx)("li",{children:Object(_.jsx)("a",{href:"/patient_profile/".concat(e),children:e})},e)})),l=t[1400].map((function(e){return Object(_.jsx)("li",{children:Object(_.jsx)("a",{href:"/patient_profile/".concat(e),children:e})},e)})),d=t[1600].map((function(e){return Object(_.jsx)("li",{children:Object(_.jsx)("a",{href:"/patient_profile/".concat(e),children:e})},e)})),b=t[1800].map((function(e){return Object(_.jsx)("li",{children:Object(_.jsx)("a",{href:"/patient_profile/".concat(e),children:e})},e)})),h=t[2e3].map((function(e){return Object(_.jsx)("li",{children:Object(_.jsx)("a",{href:"/patient_profile/".concat(e),children:e})},e)})),p=t[2200].map((function(e){return Object(_.jsx)("li",{children:Object(_.jsx)("a",{href:"/patient_profile/".concat(e),children:e})},e)}));return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("h3",{children:"Pending Submission for today (Restraints)"}),Object(_.jsxs)("div",{className:"site-card-wrapper",children:[Object(_.jsxs)(j.a,{gutter:16,children:[Object(_.jsx)(u.a,{span:8,children:Object(_.jsx)(we.a,{title:"0000H",bordered:!1,children:n})}),Object(_.jsx)(u.a,{span:8,children:Object(_.jsx)(we.a,{title:"0200H",bordered:!1,children:c})}),Object(_.jsx)(u.a,{span:8,children:Object(_.jsx)(we.a,{title:"0400H",bordered:!1,children:a})})]}),Object(_.jsx)("br",{}),Object(_.jsxs)(j.a,{gutter:16,children:[Object(_.jsx)(u.a,{span:8,children:Object(_.jsx)(we.a,{title:"0600H",bordered:!1,children:r})}),Object(_.jsx)(u.a,{span:8,children:Object(_.jsx)(we.a,{title:"0800H",bordered:!1,children:s})}),Object(_.jsx)(u.a,{span:8,children:Object(_.jsx)(we.a,{title:"1000H",bordered:!1,children:i})})]})," ",Object(_.jsx)("br",{}),Object(_.jsxs)(j.a,{gutter:16,children:[Object(_.jsx)(u.a,{span:8,children:Object(_.jsx)(we.a,{title:"1200H",bordered:!1,children:o})}),Object(_.jsx)(u.a,{span:8,children:Object(_.jsx)(we.a,{title:"1400H",bordered:!1,children:l})}),Object(_.jsx)(u.a,{span:8,children:Object(_.jsx)(we.a,{title:"1600H",bordered:!1,children:d})})]}),Object(_.jsx)("br",{}),Object(_.jsxs)(j.a,{gutter:16,children:[Object(_.jsx)(u.a,{span:8,children:Object(_.jsx)(we.a,{title:"1800H",bordered:!1,children:b})}),Object(_.jsx)(u.a,{span:8,children:Object(_.jsx)(we.a,{title:"2000H",bordered:!1,children:h})}),Object(_.jsx)(u.a,{span:8,children:Object(_.jsx)(we.a,{title:"2200H",bordered:!1,children:p})})]})]})]})};var De=function(e){var t=e.pendingSubmission,n=t.ND.map((function(e){return Object(_.jsx)("li",{children:Object(_.jsx)("a",{href:"/patient_profile/".concat(e),children:e})},e)})),c=t.AM.map((function(e){return Object(_.jsx)("li",{children:Object(_.jsx)("a",{href:"/patient_profile/".concat(e),children:e})},e)})),a=t.PM.map((function(e){return Object(_.jsx)("li",{children:Object(_.jsx)("a",{href:"/patient_profile/".concat(e),children:e})},e)}));return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("h3",{children:"Pending Submission for today (Progress Record)"}),Object(_.jsxs)("div",{className:"site-card-wrapper",children:[Object(_.jsxs)(j.a,{gutter:16,children:[Object(_.jsx)(u.a,{span:8,children:Object(_.jsx)(we.a,{title:"ND",bordered:!1,children:n})}),Object(_.jsx)(u.a,{span:8,children:Object(_.jsx)(we.a,{title:"AM",bordered:!1,children:c})}),Object(_.jsx)(u.a,{span:8,children:Object(_.jsx)(we.a,{title:"PM",bordered:!1,children:a})})]}),Object(_.jsx)("br",{})]})]})};var Ae=function(e){var t=Object(c.useState)(),n=Object(o.a)(t,2),a=n[0],r=n[1],s=Object(c.useState)(),i=Object(o.a)(s,2),l=i[0],d=i[1],j=Object(c.useState)(),u=Object(o.a)(j,2),b=u[0],h=u[1],p=Object(c.useState)(),O=Object(o.a)(p,2),m=O[0],x=O[1],f=Object(c.useState)(!1),y=Object(o.a)(f,2),v=y[0],k=y[1],N=Object(c.useState)(!1),C=Object(o.a)(N,2),R=C[0],w=C[1],M=function(){w(!1),k(!1)},D=function(){w(!1),k(!1)};Object(c.useEffect)((function(){var t=S();t?(g.a.get("".concat("https://epcr-backend.lentorresidence.com","/users/verifyToken?token=").concat(t)).then((function(e){})).catch((function(e){I()})),g.a.post("".concat("https://epcr-backend.lentorresidence.com","/completion_status/restraintsForm"),{date:E},{headers:{token:t}}).then((function(e){r(e.data)})).catch((function(e){console.log(e)})),g.a.post("".concat("https://epcr-backend.lentorresidence.com","/completion_status/progressForm"),{date:E},{headers:{token:t}}).then((function(e){h(e.data)})).catch((function(e){console.log(e)})),g.a.post("".concat("https://epcr-backend.lentorresidence.com","/residents/getRestraintsMonitoringStatus"),{},{headers:{token:t}}).then((function(e){console.log("restraints montor",e.data),d(e.data)})).catch((function(e){console.log(e)})),g.a.post("".concat("https://epcr-backend.lentorresidence.com","/residents/getProgressMonitoringStatus"),{},{headers:{token:t}}).then((function(e){console.log("restraints montor",e.data),x(e.data)})).catch((function(e){console.log(e)}))):e.history.push("/login")}),[]);var P=null===l||void 0===l?void 0:l.map((function(e){return Object(_.jsx)("li",{children:e.bed},e._id)})),Y=null===m||void 0===m?void 0:m.map((function(e){return Object(_.jsx)("li",{children:e.bed},e._id)})),F=Object(c.useState)(Q()().add(0,"days").startOf("day")),V=Object(o.a)(F,2),E=V[0];return V[1],Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(J.a,{className:"site-page-header",title:"Completion Status Module"}),Object(_.jsx)("div",{style:{padding:"30px"},children:Object(_.jsxs)(A.b,{direction:"vertical",size:"middle",children:[a&&Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(Me,{pendingSubmission:a}),Object(_.jsx)("br",{}),Object(_.jsx)(T.a,{type:"primary",onClick:function(){k(!0)},children:"Residents under Restraints Monitoring"}),Object(_.jsx)(Oe.a,{title:"Residents under Restraints Monitoring",visible:v,onOk:M,onCancel:D,children:l&&Object(_.jsx)(_.Fragment,{children:P})})]}),b&&Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(De,{pendingSubmission:b}),Object(_.jsx)("br",{}),Object(_.jsx)(T.a,{type:"primary",onClick:function(){w(!0)},children:"Residents under Progress Monitoring"}),Object(_.jsx)(Oe.a,{title:"Residents under Progress Monitoring",visible:R,onOk:M,onCancel:D,children:m&&Object(_.jsx)(_.Fragment,{children:Y})})]})]})})]})};var Pe=function(){var e=Object(c.useState)(!0),t=Object(o.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)({username:null}),s=Object(o.a)(r,2),i=s[0],f=s[1],y=Object(c.useState)(!1),k=Object(o.a)(y,2),N=k[0],C=k[1],R=d.a.Header,M=d.a.Footer,A=d.a.Sider,P=d.a.Content,T=Object(l.g)(),Y=v();return Object(c.useEffect)((function(){g.a.get("".concat("https://epcr-backend.lentorresidence.com","/networkTest"),{timeout:3e3}).then((function(e){console.log("IP Whitelisted"),C(!1)})).catch((function(e){C(!0)}));var e=S();e||"/login"===window.location.pathname||"/enroll"===window.location.pathname?g.a.get("".concat("https://epcr-backend.lentorresidence.com","/users/verifyToken?token=").concat(e),{timeout:4e3}).then((function(e){a(!1),f(Y)})).catch((function(e){I(),a(!1)})):window.open("/login","_self")}),[]),n&&S()?Object(_.jsx)("div",{className:"content",children:"Checking Authentication..."}):Object(_.jsx)("div",{className:"App",children:Object(_.jsxs)(d.a,{style:{minHeight:"100vh"},children:[Object(_.jsxs)(R,{className:"header",children:[Object(_.jsx)("div",{className:"logo"}),Object(_.jsx)(j.a,{justify:"end",children:null!=i.username&&Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(u.a,{span:1,children:Object(_.jsx)(b.a,{size:40,children:i.username})}),Object(_.jsx)(u.a,{span:1})]})})]}),Object(_.jsxs)(d.a,{children:["/login"!==window.location.pathname?Object(_.jsx)(_.Fragment,{children:Object(_.jsxs)(A,{breakpoint:"lg",collapsedWidth:"0",onBreakpoint:function(e){console.log(e)},onCollapse:function(e,t){console.log(e,t)},children:[Object(_.jsx)("div",{className:"logo"}),Object(_.jsxs)(h.a,{theme:"dark",mode:"inline",defaultSelectedKeys:["1"],children:[Object(_.jsx)(h.a.Item,{icon:Object(_.jsx)(O.a,{}),onClick:function(){return T.push("/select_patient")},children:"Forms"},"1"),Object(_.jsx)(h.a.Item,{icon:Object(_.jsx)(m.a,{}),onClick:function(){return T.push("/residents_module")},children:"Residents Module"},"2"),"full"===i.role&&Object(_.jsx)(h.a.Item,{icon:Object(_.jsx)(m.a,{}),onClick:function(){return T.push("/users_module")},children:"Users Module"},"3"),Object(_.jsx)(h.a.Item,{icon:Object(_.jsx)(x.a,{}),onClick:function(){return T.push("/announcement")},children:"Announcements"},"4"),Object(_.jsx)(h.a.Item,{icon:Object(_.jsx)(x.a,{}),onClick:function(){return T.push("/settings")},children:"Settings"},"5"),Object(_.jsx)(h.a.Item,{icon:Object(_.jsx)(x.a,{}),onClick:function(){return T.push("/completion_status")},children:"Completion Status"},"6")]})]})}):Object(_.jsx)(_.Fragment,{}),Object(_.jsxs)(d.a,{children:[N?Object(_.jsx)(p.a,{message:"Network Error",description:"Please connect to TLR Wifi",type:"error",showIcon:!0,style:{textAlign:"left"}}):Object(_.jsx)(_.Fragment,{}),Object(_.jsx)(P,{children:Object(_.jsx)("div",{className:"content",children:Object(_.jsxs)(l.d,{children:[Object(_.jsx)(D,{path:"/login",component:E}),Object(_.jsx)(D,{path:"/enroll",component:ke}),Object(_.jsx)(w,{path:"/settings",component:B}),Object(_.jsx)(w,{path:"/announcement",component:U}),Object(_.jsx)(w,{exact:!0,path:["/select_patient","/"],component:z}),Object(_.jsx)(w,{exact:!0,path:["/patient_profile/:bedNo","/"],component:se}),Object(_.jsx)(w,{exact:!0,path:["/forms/restraints_form/:uuid","/"],component:be}),Object(_.jsx)(w,{exact:!0,path:["/forms/progress_record_form/:uuid","/"],component:ve}),Object(_.jsx)(w,{exact:!0,path:["/residents_module/","/"],component:me}),Object(_.jsx)(w,{exact:!0,path:["/residents_module/admit","/"],component:xe}),Object(_.jsx)(w,{exact:!0,path:["/users_module","/"],component:Ie}),Object(_.jsx)(w,{exact:!0,path:["/users_module/addUser","/"],component:Ce}),Object(_.jsx)(w,{exact:!0,path:["/users_module/reset_password/:username","/"],component:Re}),Object(_.jsx)(w,{exact:!0,path:["/completion_status","/"],component:Ae})]})})}),Object(_.jsx)(M,{children:"ePCR"})]})]})]})})},Te=function(e){e&&e instanceof Function&&n.e(6).then(n.bind(null,940)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),r(e),s(e)}))};s.a.render(Object(_.jsx)(a.a.StrictMode,{children:Object(_.jsx)(i.a,{children:Object(_.jsx)(Pe,{})})}),document.getElementById("root")),Te()}},[[543,1,2]]]);
//# sourceMappingURL=main.ab2bc071.chunk.js.map