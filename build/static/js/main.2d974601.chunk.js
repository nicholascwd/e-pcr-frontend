(this["webpackJsonpepcr-frontend"]=this["webpackJsonpepcr-frontend"]||[]).push([[0],{318:function(e,t,n){},337:function(e,t,n){},344:function(e,t){},346:function(e,t){},356:function(e,t){},358:function(e,t){},385:function(e,t){},387:function(e,t){},388:function(e,t){},393:function(e,t){},395:function(e,t){},401:function(e,t){},403:function(e,t){},422:function(e,t){},434:function(e,t){},437:function(e,t){},543:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),c=n(35),r=n.n(c),i=n(115),o=(n(318),n(20)),l=n(32),d=n(550),j=n(133),u=n(70),b=n(307),h=n(81),p=n(561),O=(n(319),n(565)),m=n(566),x=n(567),f=n(23),g=n.n(f),y=(n(337),n(338),n(231)),v=function(){var e=localStorage.getItem("user");return e?JSON.parse(e):null},S=function(){localStorage.getItem("EncryptedSymmmetricKey")||"/enroll"===window.location.pathname||window.open("/enroll","_self");var e=localStorage.getItem("token");return e?(sessionStorage.getItem("AESKEY")||(localStorage.removeItem("token"),localStorage.removeItem("user"),window.open("/login","_self")),e):null},k=function(e){sessionStorage.getItem("AESKEY")||function(e){var t=localStorage.getItem("EncryptedSymmmetricKey"),n=y.AES.decrypt(t,e).toString(y.enc.Utf8);sessionStorage.setItem("AESKEY",n)}(e)},I=function(){localStorage.removeItem("token"),localStorage.removeItem("user")},N=n(28),C=n(181),w=n(1),R=["component"];var _=function(e){var t=e.component,n=Object(C.a)(e,R);return Object(w.jsx)(l.b,Object(N.a)(Object(N.a)({},n),{},{render:function(e){return S()?Object(w.jsx)(t,Object(N.a)({},e)):Object(w.jsx)(l.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},A=["component"];var T=function(e){var t=e.component,n=Object(C.a)(e,A);return Object(w.jsx)(l.b,Object(N.a)(Object(N.a)({},n),{},{render:function(e){return S()?Object(w.jsx)(l.a,{to:{pathname:"/dashboard"}}):Object(w.jsx)(t,Object(N.a)({},e))}}))},D=n(560),F=n(557),M=n(43),P=n(563),z=n(564);var V=function(e){var t=Object(a.useState)(e),n=Object(o.a)(t,2),s=n[0],c=n[1];return{value:s,onChange:function(e){c(e.target.value)}}},E=function(e){var t=Object(a.useState)(!1),n=Object(o.a)(t,2),s=n[0],c=n[1],r=V(""),i=V(""),l=Object(a.useState)(null),d=Object(o.a)(l,2),j=d[0],u=d[1];return Object(w.jsx)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},children:Object(w.jsxs)(D.b,{direction:"vertical",size:"middle",style:{width:"400px"},children:[j?Object(w.jsx)(p.a,{message:"Login Failed",description:j,type:"error",showIcon:!0,style:{textAlign:"left"}}):Object(w.jsx)(w.Fragment,{}),Object(w.jsx)(F.a,Object(N.a)(Object(N.a)({},r),{},{size:"large",placeholder:"Username",prefix:Object(w.jsx)(P.a,{})})),Object(w.jsx)(F.a.Password,Object(N.a)(Object(N.a)({},i),{},{size:"large",placeholder:"Password",prefix:Object(w.jsx)(z.a,{})})),Object(w.jsx)(M.a,{type:"primary",size:"large",shape:"round",onClick:function(){u(null),c(!0),g.a.post("".concat("https://e-pcr-backend.sutdsh.xyz","/users/signin"),{username:r.value,password:i.value}).then((function(e){var t,n;c(!1),t=e.data.token,n=e.data.user,localStorage.setItem("token",t),localStorage.setItem("user",JSON.stringify(n)),k(e.data.key),window.open("/select_patient","_self")})).catch((function(e){c(!1),e.reponse&&401===e.response.status?u(e.response.data.message):u("Something went wrong. Please try again later.")}))},loading:s,style:{width:"100%"},children:s?"Logging In...":"Login"})]})})},J=n(556);var Y=function(e){var t=v();return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(J.a,{className:"site-page-header",title:"Settings"}),Object(w.jsxs)("div",{style:{padding:"30px"},children:[Object(w.jsx)(M.a,{type:"primary",onClick:function(){I(),window.open("/login","_self")},children:"Logout"},"console"),Object(w.jsx)("br",{}),Object(w.jsx)("br",{}),Object(w.jsx)(M.a,{type:"primary",onClick:function(){e.history.push("/users_module/reset_password/"+t.username)},children:"Change Password"},"console")]})]})},B=n(555),q=n(548);var G=function(e){var t=B.a.Text,n=Object(a.useState)(),s=Object(o.a)(n,2),c=s[0],r=s[1],i=Object(a.useState)(),l=Object(o.a)(i,2),d=l[0],j=l[1];return Object(a.useEffect)((function(){var t=S();t?(g.a.get("".concat("https://e-pcr-backend.sutdsh.xyz","/users/verifyToken?token=").concat(t)).catch((function(e){I()})),g.a.post("".concat("https://e-pcr-backend.sutdsh.xyz","/residents/listAdmitted"),{},{headers:{token:t}}).then((function(e){var t=e.data;t.map((function(e){e.value=e.bed,e.numeric=parseInt(e.bed.slice(0,-1))})),t.sort((function(e,t){return e.numeric<t.numeric?-1:e.numeric>t.numeric?1:0})),r(t)})).catch((function(e){console.log(e)}))):e.history.push("/login")}),[]),Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(J.a,{className:"site-page-header",title:"Select Patient"}),Object(w.jsx)("div",{style:{padding:"30px"},children:Object(w.jsxs)(D.b,{direction:"vertical",size:"middle",children:[Object(w.jsx)(t,{children:"Input Patient Bed"}),Object(w.jsx)(q.a,{style:{width:200},options:c,placeholder:"Select",onSelect:function(e,t){return function(e,t){j(t.value)}(0,t)},filterOption:function(e,t){return-1!==t.value.indexOf(e)},virtual:!1}),d&&Object(w.jsxs)("div",{children:[Object(w.jsxs)("p",{children:["Selected Bed: ",d]}),Object(w.jsx)(M.a,{type:"primary",onClick:function(){window.open("/patient_profile/".concat(d),"_self")},children:"Submit"})]})]})})]})};var U=function(){return Object(l.g)(),Object(a.useEffect)((function(){var e=S();e&&g.a.get("".concat("https://e-pcr-backend.sutdsh.xyz","/users/verifyToken?token=").concat(e)).then((function(e){console.log(e)})).catch((function(e){I()}))}),[]),Object(w.jsx)("div",{children:Object(w.jsx)(J.a,{className:"site-page-header",title:"Announcements"})})},L=n(552),K=n(562),W=n(222),H=n(33),Q=n.n(H),X=n(231),Z=function(e){var t=sessionStorage.getItem("AESKEY");return X.AES.encrypt(e,t).toString()},$=function(e){var t=sessionStorage.getItem("AESKEY");return X.AES.encrypt(JSON.stringify(e),t).toString()},ee=function(e){var t=sessionStorage.getItem("AESKEY");return X.AES.decrypt(e,t).toString(X.enc.Utf8)},te=function(e){var t=sessionStorage.getItem("AESKEY");return X.AES.decrypt(JSON.parse(e),t).toString(X.enc.Utf8)},ne=n(142),ae=(n(287),[{title:"Date",key:"_id",dataIndex:"formVals",render:function(e){return Object(w.jsx)("p",{children:JSON.parse(e).date})}},{title:"Time",key:"_id",dataIndex:"formVals",render:function(e){return Object(w.jsx)("p",{children:JSON.parse(e).time})}},{title:"Restraints Applied Correctly",key:"_id",dataIndex:"formVals",render:function(e){return Object(w.jsx)("p",{children:JSON.parse(e).r1})}},{title:"Body & Limbs Comfortable",key:"_id",dataIndex:"formVals",render:function(e){return Object(w.jsx)("p",{children:JSON.parse(e).r2})}},{title:"Restrained Limbs",children:[{title:"Adequate Circulation",key:"_id",dataIndex:"formVals",render:function(e){return Object(w.jsx)("p",{children:JSON.parse(e).r3})}},{title:"Adequate ROM",key:"_id",dataIndex:"formVals",render:function(e){return Object(w.jsx)("p",{children:JSON.parse(e).r4})}}]},{title:"Skin Integrity Checked",key:"_id",dataIndex:"formVals",render:function(e){return Object(w.jsx)("p",{children:JSON.parse(e).r5})}},{title:"Type of Restraints",key:"_id",dataIndex:"formVals",render:function(e){return Object(w.jsx)("p",{children:JSON.parse(e)["r-restraints-type"]})}},{title:"Remarks",key:"_id",dataIndex:"formVals",render:function(e){return Object(w.jsx)("p",{children:JSON.parse(e)["r-remarks"]})}},{title:"Staff",key:"_id",dataIndex:"staff"},{title:"Submitted D/T",key:"_id",dataIndex:"creationDate",render:function(e){return Object(w.jsx)("p",{children:Q()(e).format("MMMM Do YYYY, h:mm:ss a")})}}]),se=[{title:"Date",key:"_id",dataIndex:"formVals",render:function(e){return Object(w.jsx)("p",{children:JSON.parse(e).date})}},{title:"Time",key:"_id",dataIndex:"formVals",render:function(e){return Object(w.jsx)("p",{children:JSON.parse(e).time})}},{title:"General Condition",key:"_id",dataIndex:"formVals",render:function(e){return Object(w.jsx)("p",{children:JSON.parse(e).p1})}},{title:"Mental State",key:"_id",dataIndex:"formVals",render:function(e){return Object(w.jsx)("p",{children:JSON.parse(e).p2})}},{title:"Skin Care",key:"_id",dataIndex:"formVals",render:function(e){return Object(w.jsx)("p",{children:JSON.parse(e).p3})}},{title:"Hygiene/ Bathing",key:"_id",dataIndex:"formVals",render:function(e){return Object(w.jsx)("p",{children:JSON.parse(e).p4})}},{title:"Oral Care",key:"_id",dataIndex:"formVals",render:function(e){return Object(w.jsx)("p",{children:JSON.parse(e).p5})}},{title:"Feeding",key:"_id",dataIndex:"formVals",render:function(e){return Object(w.jsx)("p",{children:JSON.parse(e).p6})}},{title:"Bladder",key:"_id",dataIndex:"formVals",render:function(e){return Object(w.jsx)("p",{children:JSON.parse(e).p7})}},{title:"Bowel",key:"_id",dataIndex:"formVals",render:function(e){return Object(w.jsx)("p",{children:JSON.parse(e).p8})}},{title:"Mobility",key:"_id",dataIndex:"formVals",render:function(e){return Object(w.jsx)("p",{children:JSON.parse(e).p9})}},{title:"Rest at Night",key:"_id",dataIndex:"formVals",render:function(e){return Object(w.jsx)("p",{children:JSON.parse(e).p10})}},{title:"Therapy",key:"_id",dataIndex:"formVals",render:function(e){return Object(w.jsx)("p",{children:JSON.parse(e).p11})}},{title:"Visited",key:"_id",dataIndex:"formVals",render:function(e){return Object(w.jsx)("p",{children:JSON.parse(e).p12})}},{title:"Remarks",key:"_id",dataIndex:"formVals",render:function(e){return Object(w.jsx)("p",{children:JSON.parse(e)["r-remarks"]})}},{title:"Staff",key:"_id",dataIndex:"staff"},{title:"Submitted D/T",key:"_id",dataIndex:"creationDate",render:function(e){return Object(w.jsx)("p",{children:Q()(e).format("MMMM Do YYYY, h:mm:ss a")})}}];var ce=function(e){return console.log("props ",e),Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)("h4",{children:["Bed: ",e.patientData.bed,Object(w.jsx)("br",{}),"Name: ",ee(e.patientData.name),Object(w.jsx)("br",{}),"NRIC: ",ee(e.patientData.NRIC),Object(w.jsx)("br",{}),"Profile Creation:"," ",Q()(e.patientData.creationDate).format("MMMM Do YYYY, h:mm:ss a"),Object(w.jsx)("br",{}),"Status: ",e.patientData.status]}),Object(w.jsxs)("p",{children:["Identifier: ",e.patientData.uuid]})]})};n.p;var re=function(e){var t=Object(a.useState)(),n=Object(o.a)(t,2),s=n[0],c=n[1],r=Object(a.useState)(),i=Object(o.a)(r,2),d=i[0],j=i[1],u=Object(a.useState)(),b=Object(o.a)(u,2),h=b[0],p=b[1],O=Object(a.useState)([Q()().add(-2,"days").startOf("day"),Q()().endOf("day")]),m=Object(o.a)(O,2),x=m[0],f=m[1],y=Object(a.useState)(),v=Object(o.a)(y,2),k=v[0],N=v[1],C=L.a.RangePicker,R=Object(l.h)().bedNo,_=S();Object(a.useEffect)((function(){_?(g.a.get("".concat("https://e-pcr-backend.sutdsh.xyz","/users/verifyToken?token=").concat(_)).then((function(e){})).catch((function(e){I()})),g.a.post("".concat("https://e-pcr-backend.sutdsh.xyz","/residents/getByBed"),{bed:R},{headers:{token:_}}).then((function(e){c(e.data[0])})).catch((function(e){console.log(e),j(e.response.data.error)}))):e.history.push("/login")}),[]),Object(a.useEffect)((function(){s&&(g.a.post("".concat("https://e-pcr-backend.sutdsh.xyz","/forms/restraintsForm/submissionHistory"),{uuid:s.uuid,restraintsDatePicker:x},{headers:{token:_}}).then((function(e){var t=e.data;t.map((function(e){e.formVals=te(e.formData)})),p(t),console.log(t)})).catch((function(e){console.log(e)})),g.a.post("".concat("https://e-pcr-backend.sutdsh.xyz","/forms/progressRecordForm/submissionHistory"),{uuid:s.uuid,restraintsDatePicker:x},{headers:{token:_}}).then((function(e){var t=e.data;t.map((function(e){e.formVals=te(e.formData)})),N(t)})).catch((function(e){console.log(e)})))}),[s,x]);var A=window.matchMedia("(max-width: 600px)").matches;return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(M.a,{style:{margin:"10px"},onClick:function(){e.history.push("/select_patient")},type:"default",children:"Back to patient selector"}),Object(w.jsx)(J.a,{className:"site-page-header",title:"Patient Profile"}),Object(w.jsx)("div",{style:{padding:"30px"},children:Object(w.jsxs)(D.b,{direction:"vertical",size:"middle",children:[s&&Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(ce,{patientData:s}),Object(w.jsx)("br",{}),Object(w.jsx)(M.a,{type:"primary",onClick:function(){e.history.push("/forms/restraints_form/".concat(s.uuid))},children:"Submit Restraints Form"}),Object(w.jsx)(M.a,{type:"primary",onClick:function(){e.history.push("/forms/progress_record_form/".concat(s.uuid))},children:"Submit Progress Record Form"}),Object(w.jsx)("br",{}),Object(w.jsx)("h4",{children:"Monitoring Toggle"}),Object(w.jsx)("p",{children:"Restraints Monitoring:"}),Object(w.jsx)(K.a,{defaultChecked:s.restraintsMonitoring,onChange:function(e){g.a.post("".concat("https://e-pcr-backend.sutdsh.xyz","/residents/setRestraintsMonitoringStatus"),{uuid:s.uuid,monitor:e},{headers:{token:_}}).catch((function(e){console.log(e)}))}}),"Progress Record Monitoring:",Object(w.jsx)(K.a,{defaultChecked:s.progressRecordMonitoring,onChange:function(e){g.a.post("".concat("https://e-pcr-backend.sutdsh.xyz","/residents/setProgressRecordMonitoringStatus"),{uuid:s.uuid,monitor:e},{headers:{token:_}}).catch((function(e){console.log(e)}))}}),Object(w.jsx)("br",{}),Object(w.jsxs)(D.b,{direction:"vertical",size:12,children:[Object(w.jsx)("span",{children:"Select Date for Reports below"}),Object(w.jsx)(C,{defaultValue:[Q()().add(-2,"days").startOf("day"),Q()().startOf("day")],onChange:function(e){var t=e[1];t=Q()(t).endOf("day"),console.log(Q()(t).format()),f([e[0],t])}})]}),Object(w.jsx)("h3",{children:"Restraints Form submission history"}),Object(w.jsx)(M.a,{style:{margin:"10px"},onClick:function(){!function(e,t){var n=new ne.default("landscape");n.text("Restraints Report",5,15),n.setFontSize(10),n.text("Resident Name: "+ee(e.name),5,30),n.text("Resident NRIC: "+ee(e.NRIC),5,35),n.text("Report Generated: "+Q()().toDate(),5,40);for(var a=[],s=0;s<t.length;s++){var c=[];console.log(JSON.parse(t[s].formVals).time),c.push(JSON.parse(t[s].formVals).date),c.push(JSON.parse(t[s].formVals).time),c.push(JSON.parse(t[s].formVals).r1),c.push(JSON.parse(t[s].formVals).r2),c.push(JSON.parse(t[s].formVals).r3),c.push(JSON.parse(t[s].formVals).r4),c.push(JSON.parse(t[s].formVals).r5),c.push(JSON.parse(t[s].formVals)["r-restraints-type"]),c.push(JSON.parse(t[s].formVals)["r-remarks"]),c.push(t[s].staff),a.push(c)}n.autoTable({theme:"grid",startY:50,head:[["Date","Time","Restraints Applied Correctly","Body & Limbs in Comfortable Position","Adequate Circulation (Restrained Limbs)","Adequate ROM (Restrained Limbs)","Skin Integrity Checked","Restraints Type","Remarks","Staff Signature"]],body:a}),n.save("table.pdf")}(s,h)},type:"default",children:"Export Restraints Data"}),Object(w.jsx)("div",{className:"pcf",children:Object(w.jsx)(W.a,{style:{width:A?400:1100},scroll:{x:300},columns:ae,className:"table",data:h})}),Object(w.jsx)("h3",{children:"Progress Record Form submission history"}),Object(w.jsx)(M.a,{style:{margin:"10px"},onClick:function(){!function(e,t){var n=new ne.default("landscape");n.text("Progress Record Report",5,15),n.setFontSize(10),n.text("Resident Name: "+ee(e.name),5,30),n.text("Resident NRIC: "+ee(e.NRIC),5,35),n.text("Report Generated: "+Q()().toDate(),5,40),n.setFontSize(7);for(var a=[],s=0;s<t.length;s++){var c=[];console.log(JSON.parse(t[s].formVals)),c.push(JSON.parse(t[s].formVals).date),c.push(JSON.parse(t[s].formVals).time),c.push(JSON.parse(t[s].formVals).p1),c.push(JSON.parse(t[s].formVals).p2),c.push(JSON.parse(t[s].formVals).p3),c.push(JSON.parse(t[s].formVals).p4),c.push(JSON.parse(t[s].formVals).p5),c.push(JSON.parse(t[s].formVals).p6),c.push(JSON.parse(t[s].formVals).p7),c.push(JSON.parse(t[s].formVals).p8),c.push(JSON.parse(t[s].formVals).p9),c.push(JSON.parse(t[s].formVals).p10),c.push(JSON.parse(t[s].formVals).p11),c.push(JSON.parse(t[s].formVals).p12),c.push(JSON.parse(t[s].formVals)["r-remarks"]),c.push(t[s].staff),a.push(c)}n.autoTable({theme:"grid",startY:50,styles:{fontSize:7},head:[["Date","Time","General Condition","Mental State\t","Skin Care","Hygiene/Bathing","Oral Care","Feeding","Bladder","Bowel","Mobility","Rest at Night","Therapy","Visited","Remarks","Staff Signature"]],body:a}),n.save("table.pdf")}(s,k)},type:"default",children:"Export Progress Record Data"}),Object(w.jsx)("div",{className:"pcf",children:Object(w.jsx)(W.a,{style:{width:A?400:1100},scroll:{x:300},columns:se,data:k,className:"table"})})]}),d&&Object(w.jsx)("p",{children:d})]})})]})},ie=n(86),oe=n(554),le=n(179),de=n(559),je=ie.a.Option,ue={labelCol:{span:30,offset:0},wrapperCol:{span:50}};var be=function(e){var t=Object(a.useState)(),n=Object(o.a)(t,2),s=n[0],c=n[1],r=Object(a.useState)(),i=Object(o.a)(r,2),d=i[0],j=i[1],u=Object(a.useState)(),b=Object(o.a)(u,2),h=b[0],p=b[1],O=Object(a.useState)(!1),m=Object(o.a)(O,2),x=m[0],f=m[1],y=Object(l.h)().uuid,k=S();function C(){e.history.push("/patient_profile/"+s.bed,"_self")}return Object(a.useEffect)((function(){k?(g.a.get("".concat("https://e-pcr-backend.sutdsh.xyz","/users/verifyToken?token=").concat(k)).then((function(e){p(v().username)})).catch((function(e){I()})),g.a.post("".concat("https://e-pcr-backend.sutdsh.xyz","/residents/getByUUID"),{uuid:y},{headers:{token:k}}).then((function(e){c(e.data[0])})).catch((function(e){console.log(e.response.data.error),j(e.response.data.error)}))):e.history.push("/login")}),[]),Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(M.a,{style:{margin:"10px"},onClick:C,type:"default",children:"Back to patient profile"}),Object(w.jsx)(J.a,{className:"site-page-header",title:"Restraints Form"}),Object(w.jsx)("div",{style:{padding:"30px"},children:Object(w.jsxs)(D.b,{direction:"vertical",size:"middle",children:[s&&h&&!x&&Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(ce,{patientData:s}),Object(w.jsxs)(oe.a,Object(N.a)(Object(N.a)({name:"validate_other"},ue),{},{onFinish:function(e){if(e.time){var t=Q()(e.date).startOf("day");e.date=e.date.format("YYYY-MM-DD"),console.log("Received values of form: ",JSON.stringify(e)),g.a.post("".concat("https://e-pcr-backend.sutdsh.xyz","/forms/restraintsForm/submit"),{resident:y,formData:$(e),bed:s.bed,dateTime:t,timeslot:e.time},{headers:{token:k}}).then((function(e){f(!0)})).catch((function(e){console.log(e.response.data.error),j(e.response.data.error)}))}else alert("Time is missing")},children:[Object(w.jsx)(oe.a.Item,{name:"date",label:"Date",required:!0,children:Object(w.jsx)(L.a,{})}),Object(w.jsx)(oe.a.Item,{name:"time",label:"Time",required:!0,children:Object(w.jsxs)(ie.a,{placeholder:"Select time of check",virtual:!1,children:[Object(w.jsx)(je,{value:"0000",children:"12am midnight"}),Object(w.jsx)(je,{value:"0200",children:"2am"}),Object(w.jsx)(je,{value:"0400",children:"4am"}),Object(w.jsx)(je,{value:"0600",children:"6am"}),Object(w.jsx)(je,{value:"0800",children:"8am"}),Object(w.jsx)(je,{value:"1000",children:"10am"}),Object(w.jsx)(je,{value:"1200",children:"12pm noon"}),Object(w.jsx)(je,{value:"1400",children:"2pm"}),Object(w.jsx)(je,{value:"1600",children:"4pm"}),Object(w.jsx)(je,{value:"1800",children:"6pm"}),Object(w.jsx)(je,{value:"2000",children:"8pm"}),Object(w.jsx)(je,{value:"2200",children:"10pm"})]})}),Object(w.jsx)(oe.a.Item,{name:"r1",label:"Restraints applied correctly",children:Object(w.jsxs)(le.a.Group,{children:[Object(w.jsx)(le.a,{value:"Y",children:"Yes"}),Object(w.jsx)(le.a,{value:"N",children:"No"}),Object(w.jsx)(le.a,{value:"",children:"NA"})]})}),Object(w.jsx)(oe.a.Item,{name:"r2",label:"Body & limbs in comfortable position",children:Object(w.jsxs)(le.a.Group,{children:[Object(w.jsx)(le.a,{value:"Y",children:"Yes"}),Object(w.jsx)(le.a,{value:"N",children:"No"}),Object(w.jsx)(le.a,{value:"",children:"NA"})]})}),Object(w.jsx)(oe.a.Item,{name:"r3",label:"(Restrained Extremities) Adequate circulation",children:Object(w.jsxs)(le.a.Group,{children:[Object(w.jsx)(le.a,{value:"Y",children:"Yes"}),Object(w.jsx)(le.a,{value:"N",children:"No"}),Object(w.jsx)(le.a,{value:"",children:"NA"})]})}),Object(w.jsx)(oe.a.Item,{name:"r4",label:"(Restrained Extremities) Adequate ROM",children:Object(w.jsxs)(le.a.Group,{children:[Object(w.jsx)(le.a,{value:"Y",children:"Yes"}),Object(w.jsx)(le.a,{value:"N",children:"No"}),Object(w.jsx)(le.a,{value:"",children:"NA"})]})}),Object(w.jsx)(oe.a.Item,{name:"r5",label:"Skin integrity checked",children:Object(w.jsxs)(le.a.Group,{children:[Object(w.jsx)(le.a,{value:"Y",children:"Yes"}),Object(w.jsx)(le.a,{value:"N",children:"No"}),Object(w.jsx)(le.a,{value:"",children:"NA"})]})}),Object(w.jsx)(oe.a.Item,{name:"r-restraints-type",label:"Type of Restraints",children:Object(w.jsx)(F.a,{})}),Object(w.jsx)(oe.a.Item,{name:"r-remarks",label:"Remarks",children:Object(w.jsx)(F.a,{})}),Object(w.jsx)(oe.a.Item,{name:"staff",label:"Submitted by",children:Object(w.jsx)("span",{className:"ant-form-text",children:h})}),Object(w.jsx)(oe.a.Item,{children:Object(w.jsx)(M.a,{type:"primary",htmlType:"submit",children:"Submit"})})]}))]}),x&&Object(w.jsx)(de.a,{status:"success",title:"Success!",subTitle:"You may view the submitted data on patient profile page",extra:[Object(w.jsx)(M.a,{type:"primary",onClick:function(){e.history.push("/select_patient/","_self")},children:"Select new patient"},"console"),Object(w.jsx)(M.a,{onClick:C,children:"Submit new form for same patient"},"buy")]}),d&&Object(w.jsx)("p",{children:d})]})})]})},he=n(549),pe=n(551);var Oe=function(e){B.a.Text,B.a.Link;var t=Object(a.useState)(),n=Object(o.a)(t,2),s=n[0],c=n[1],r=Object(a.useState)(),i=Object(o.a)(r,2),l=i[0],d=i[1],j=S();function u(){g.a.post("".concat("https://e-pcr-backend.sutdsh.xyz","/residents/listAdmittedFullDetails"),{},{headers:{token:j}}).then((function(e){var t=e.data;console.log(t),t.map((function(e){e.name=ee(e.name),e.NRIC=ee(e.NRIC)})),c(t)})).catch((function(e){console.log(e)}))}function b(e){g.a.post("".concat("https://e-pcr-backend.sutdsh.xyz","/residents/discharge"),{uuid:e},{headers:{token:j}}).then((function(e){u()})).catch((function(e){console.log(e)}))}function h(e){console.log("params",e)}Object(a.useEffect)((function(){j?(g.a.get("".concat("https://e-pcr-backend.sutdsh.xyz","/users/verifyToken?token=").concat(j)).then((function(e){})).catch((function(e){I()})),u(),g.a.post("".concat("https://e-pcr-backend.sutdsh.xyz","/residents/listDischargedFullDetails"),{},{headers:{token:j}}).then((function(e){var t=e.data;console.log(t),t.map((function(e){e.name=ee(e.name),e.NRIC=ee(e.NRIC)})),d(t)})).catch((function(e){console.log(e)}))):e.history.push("/login")}),[]);var p=[{title:"Name",key:"_id",dataIndex:"name"},{title:"NRIC",key:"_id",dataIndex:"NRIC"},{title:"Bed",key:"_id",dataIndex:"bed"},{title:"Initial admission",key:"_id",dataIndex:"creationDate",render:function(e){return Object(w.jsx)("p",{children:Q()(e).format("MMMM Do YYYY, h:mm:ss a")})}},{title:"Action",key:"action",width:100,render:function(t){return Object(w.jsxs)(D.b,{size:"middle",children:[Object(w.jsx)("a",{onClick:function(){e.history.push("/patient_profile/"+t.bed)},children:"View Patient"}),Object(w.jsx)(he.a,{title:"Are you sure to discharge this patient?",onConfirm:function(){return b(t.uuid)},onCancel:"",okText:"Yes",cancelText:"No",children:Object(w.jsx)("a",{href:"#",children:"Discharge"})})]})}}],O=[{title:"Name",key:"_id",dataIndex:"name"},{title:"NRIC",key:"_id",dataIndex:"NRIC"},{title:"Bed",key:"_id",dataIndex:"bed"},{title:"Initial admission",key:"_id",dataIndex:"creationDate",render:function(e){return Object(w.jsx)("p",{children:Q()(e).format("MMMM Do YYYY, h:mm:ss a")})}},{title:"Action",key:"action",width:100,render:function(t){return Object(w.jsxs)(D.b,{size:"middle",children:[Object(w.jsx)("a",{onClick:function(){e.history.push("/patient_profile/"+t.bed)},children:"View Patient"}),Object(w.jsx)(he.a,{title:"Feature in progress.",onConfirm:function(){return b(t.uuid)},onCancel:"",okText:"Yes",cancelText:"No",children:Object(w.jsx)("a",{href:"#",children:"Readmit"})})]})}}];return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(J.a,{className:"site-page-header",title:"Residents Module"}),Object(w.jsx)("div",{style:{padding:"30px"},children:Object(w.jsxs)(D.b,{direction:"vertical",size:"middle",children:[Object(w.jsx)(M.a,{onClick:function(){e.history.push("/residents_module/admit")},children:"Admit New Patient"}),Object(w.jsx)("h3",{children:"Table of Admitted Patients"}),Object(w.jsx)(pe.a,{columns:p,dataSource:s,onChange:h}),Object(w.jsx)("br",{}),Object(w.jsx)("h3",{children:"Table of Discharged Patients (Re-admission function not implemented yet)"}),Object(w.jsx)(pe.a,{columns:O,dataSource:l,onChange:h})]})})]})};var me=function(e){var t=S(),n=Object(a.useState)(!1),s=Object(o.a)(n,2),c=s[0],r=s[1],i=Object(a.useState)(),l=Object(o.a)(i,2),d=l[0],j=l[1];function u(){e.history.push("/residents_module")}return Object(a.useEffect)((function(){t?g.a.get("".concat("https://e-pcr-backend.sutdsh.xyz","/users/verifyToken?token=").concat(t)).catch((function(e){I()})):e.history.push("/login")}),[]),Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(M.a,{style:{margin:"10px"},onClick:u,type:"default",children:"Back"}),Object(w.jsx)(J.a,{className:"site-page-header",title:"Admit Patient"}),Object(w.jsx)("div",{style:{padding:"30px"},children:Object(w.jsxs)(D.b,{direction:"vertical",size:"middle",children:[d&&Object(w.jsx)(w.Fragment,{children:Object(w.jsx)(p.a,{message:"Error",description:d,type:"error",showIcon:!0})}),!c&&Object(w.jsx)("div",{children:Object(w.jsxs)(oe.a,Object(N.a)(Object(N.a)({name:"validate_other"},{labelCol:{span:30,offset:0},wrapperCol:{span:50}}),{},{onFinish:function(e){console.log("Received values of form: ",e),g.a.post("".concat("https://e-pcr-backend.sutdsh.xyz","/residents/admit"),{bed:e.bed.toUpperCase(),name:Z(e.name.toUpperCase()),NRIC:Z(e.NRIC.toUpperCase())},{headers:{token:t}}).then((function(e){r(!0),j(null)})).catch((function(e){console.log(e.response.data.message),j(e.response.data.message)}))},children:[Object(w.jsx)(oe.a.Item,{name:"name",label:"Resident Name",required:!0,children:Object(w.jsx)(F.a,{required:!0})}),Object(w.jsx)(oe.a.Item,{name:"NRIC",label:"NRIC",required:!0,children:Object(w.jsx)(F.a,{required:!0})}),Object(w.jsx)(oe.a.Item,{name:"bed",label:"Resident Bed",required:!0,children:Object(w.jsx)(F.a,{required:!0})}),Object(w.jsx)(oe.a.Item,{children:Object(w.jsx)(M.a,{type:"primary",htmlType:"submit",children:"Submit"})})]}))}),c&&Object(w.jsx)(de.a,{status:"success",title:"Success!",subTitle:"Patient Admitted",extra:[Object(w.jsx)(M.a,{type:"primary",onClick:u,children:"Back"},"console")]})]})})]})},xe=n(149),fe=ie.a.Option,ge={labelCol:{span:30,offset:0},wrapperCol:{span:50}};var ye=function(e){var t=Object(a.useState)(),n=Object(o.a)(t,2),s=n[0],c=n[1],r=Object(a.useState)(),i=Object(o.a)(r,2),d=i[0],j=i[1],u=Object(a.useState)(),b=Object(o.a)(u,2),h=b[0],p=b[1],O=Object(a.useState)(!1),m=Object(o.a)(O,2),x=m[0],f=m[1],y=Object(l.h)().uuid,k=S();function C(){e.history.push("/patient_profile/"+s.bed,"_self")}return Object(a.useEffect)((function(){k?(g.a.get("".concat("https://e-pcr-backend.sutdsh.xyz","/users/verifyToken?token=").concat(k)).then((function(e){p(v().username)})).catch((function(e){I()})),g.a.post("".concat("https://e-pcr-backend.sutdsh.xyz","/residents/getByUUID"),{uuid:y},{headers:{token:k}}).then((function(e){c(e.data[0])})).catch((function(e){console.log(e)}))):e.history.push("/login")}),[]),Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(M.a,{style:{margin:"10px"},onClick:C,type:"default",children:"Back to patient profile"}),Object(w.jsx)(J.a,{className:"site-page-header",title:"Progress Record Form"}),Object(w.jsx)("div",{style:{padding:"30px"},children:Object(w.jsxs)(D.b,{direction:"vertical",size:"middle",children:[s&&h&&!x&&Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(ce,{patientData:s}),Object(w.jsxs)(oe.a,Object(N.a)(Object(N.a)({name:"validate_other"},ge),{},{onFinish:function(e){if(e.time){var t=Q()(e.date).startOf("day");e.date=e.date.format("YYYY-MM-DD"),console.log("Received values of form: ",e),g.a.post("".concat("https://e-pcr-backend.sutdsh.xyz","/forms/progressRecordForm/submit"),{resident:y,formData:$(e),dateTime:t,timeslot:e.time,bed:s.bed},{headers:{token:k}}).then((function(e){f(!0)})).catch((function(e){console.log(e.response.data.error),j(e.response.data.error)}))}else alert("Time is missing")},initialValues:{},children:[Object(w.jsx)(oe.a.Item,{name:"date",label:"Date",required:!0,children:Object(w.jsx)(L.a,{})}),Object(w.jsx)(oe.a.Item,{name:"time",label:"Time",required:!0,children:Object(w.jsxs)(ie.a,{placeholder:"Select time of check",virtual:!1,children:[Object(w.jsx)(fe,{value:"ND",children:"ND"}),Object(w.jsx)(fe,{value:"AM",children:"AM"}),Object(w.jsx)(fe,{value:"PM",children:"PM"})]})}),Object(w.jsx)(oe.a.Item,{name:"p1",label:"General Condition",children:Object(w.jsxs)(le.a.Group,{children:[Object(w.jsx)(le.a,{value:"Satisfactory",children:"Satisfactory"}),Object(w.jsx)(le.a,{value:"Unwell",children:"Unwell"}),Object(w.jsx)(le.a,{value:"Poor",children:"Poor"}),Object(w.jsx)(le.a,{value:"",children:"NA"})]})}),Object(w.jsx)(oe.a.Item,{name:"p2",label:"Mental State",children:Object(w.jsxs)(le.a.Group,{children:[Object(w.jsx)(le.a,{value:"Oriented",children:"Oriented"}),Object(w.jsx)(le.a,{value:"Confused",children:"Confused"}),Object(w.jsx)(le.a,{value:"Behavioural Problem",children:"Behavioural Problem"}),Object(w.jsx)(le.a,{value:"Uncommunicative",children:"Uncommunicative"}),Object(w.jsx)(le.a,{value:"",children:"NA"})]})}),Object(w.jsx)(oe.a.Item,{name:"p3",label:"Skin Care",children:Object(w.jsxs)(le.a.Group,{children:[Object(w.jsx)(le.a,{value:"Intact",children:"Intact"}),Object(w.jsx)(le.a,{value:"Impaired/Rashes",children:"Impaired/Rashes"}),Object(w.jsx)(le.a,{value:"Wound Care",children:"Wound Care"}),Object(w.jsx)(le.a,{value:"",children:"NA"})]})}),Object(w.jsx)(oe.a.Item,{name:"p4",label:"Hygiene/Bathing",children:Object(w.jsxs)(le.a.Group,{children:[Object(w.jsx)(le.a,{value:"Self",children:"Self"}),Object(w.jsx)(le.a,{value:"Assisted Bath",children:"Assisted Bath"}),Object(w.jsx)(le.a,{value:"Bed Bath",children:"Bed Bath"}),Object(w.jsx)(le.a,{value:"",children:"NA"})]})}),Object(w.jsx)(oe.a.Item,{name:"p5",label:"Oral Care",children:Object(w.jsxs)(le.a.Group,{children:[Object(w.jsx)(le.a,{value:"Self",children:"Self"}),Object(w.jsx)(le.a,{value:"Assisted",children:"Assisted"}),Object(w.jsx)(le.a,{value:"Totally Dependent",children:"Totally Dependent"}),Object(w.jsx)(le.a,{value:"",children:"NA"})]})}),Object(w.jsx)(oe.a.Item,{name:"p6",label:"Feeding",children:Object(w.jsxs)(le.a.Group,{children:[Object(w.jsx)(le.a,{value:"Self",children:"Self"}),Object(w.jsx)(le.a,{value:"Assisted",children:"Assisted"}),Object(w.jsx)(le.a,{value:"NGT/PEG",children:"NGT/PEG"}),Object(w.jsx)(le.a,{value:"",children:"NA"})]})}),Object(w.jsx)(oe.a.Item,{name:"p7",label:"Bladder",children:Object(w.jsxs)(le.a.Group,{children:[Object(w.jsx)(le.a,{value:"Continent",children:"Continent"}),Object(w.jsx)(le.a,{value:"Incontinent(Diaper)",children:"Incontinent(Diaper)"}),Object(w.jsx)(le.a,{value:"IDC/IMC/SPC",children:"IDC/IMC/SPC"}),Object(w.jsx)(le.a,{value:"",children:"NA"})]})}),Object(w.jsx)(oe.a.Item,{name:"p8",label:"Bowel",children:Object(w.jsxs)(xe.a.Group,{children:[Object(w.jsx)(xe.a,{value:"Bowel Opened ",children:"Bowel Opened"}),Object(w.jsx)(xe.a,{value:"Bowel Not Opened",children:"Bowel Not Opened"}),Object(w.jsx)(xe.a,{value:"Continent ",children:"Continent"}),Object(w.jsx)(xe.a,{value:"Incontinent (Diaper) ",children:"Incontinent (Diaper)"}),Object(w.jsx)(xe.a,{value:"Colostomy Care ",children:"Colostomy Care"})]})}),Object(w.jsx)(oe.a.Item,{name:"p9",label:"Mobility",children:Object(w.jsxs)(xe.a.Group,{children:[Object(w.jsx)(xe.a,{value:"Ambulant",children:"Ambulant"}),Object(w.jsx)(xe.a,{value:"Requires Wheelchair",children:"Requires Wheelchair"}),Object(w.jsx)(xe.a,{value:"Requires Walking Aides",children:"Requires Walking Aides"}),Object(w.jsx)(xe.a,{value:"Requires 2hrly Turning",children:"Requires 2hrly Turning"})]})}),Object(w.jsx)(oe.a.Item,{name:"p10",label:"Rest During Night",children:Object(w.jsxs)(le.a.Group,{children:[Object(w.jsx)(le.a,{value:"Good",children:"Good"}),Object(w.jsx)(le.a,{value:"Restless/Interrupted",children:"Restless/Interrupted"}),Object(w.jsx)(le.a,{value:"",children:"NA"})]})}),Object(w.jsx)(oe.a.Item,{name:"p11",label:"Therapy",children:Object(w.jsxs)(le.a.Group,{children:[Object(w.jsx)(le.a,{value:"Active Exercise",children:"Active Exercise"}),Object(w.jsx)(le.a,{value:"Passive Exercise",children:"Passive Exercise"}),Object(w.jsx)(le.a,{value:"",children:"NA"})]})}),Object(w.jsx)(oe.a.Item,{name:"p12",label:"Visited by Relatives/Friend",children:Object(w.jsxs)(le.a.Group,{children:[Object(w.jsx)(le.a,{value:"Yes",children:"Yes"}),Object(w.jsx)(le.a,{value:"No",children:"No"}),Object(w.jsx)(le.a,{value:"",children:"NA"})]})}),Object(w.jsx)(oe.a.Item,{name:"r-remarks",label:"Remarks",children:Object(w.jsx)(F.a,{})}),Object(w.jsx)(oe.a.Item,{name:"staff",label:"Submitted by",children:Object(w.jsx)("span",{className:"ant-form-text",children:h})}),Object(w.jsx)(oe.a.Item,{children:Object(w.jsx)(M.a,{type:"primary",htmlType:"submit",children:"Submit"})})]}))]}),x&&Object(w.jsx)(de.a,{status:"success",title:"Success!",subTitle:"You may view the submitted data on patient profile page",extra:[Object(w.jsx)(M.a,{type:"primary",onClick:function(){e.history.push("/select_patient/","_self")},children:"Select new patient"},"console"),Object(w.jsx)(M.a,{onClick:C,children:"Submit new form for same patient"},"buy")]}),d&&Object(w.jsx)("p",{children:d})]})})]})};var ve=function(e){var t=Object(a.useState)(e),n=Object(o.a)(t,2),s=n[0],c=n[1];return{value:s,onChange:function(e){c(e.target.value)}}},Se=function(e){var t=Object(a.useState)(!1),n=Object(o.a)(t,2),s=n[0],c=n[1],r=ve(""),i=Object(a.useState)(null),l=Object(o.a)(i,2),d=l[0],j=l[1];return Object(a.useEffect)((function(){S()||"/login"===window.location.pathname||"/enroll"===window.location.pathname||window.open("/login","_self")}),[]),Object(w.jsx)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},children:Object(w.jsxs)(D.b,{direction:"vertical",size:"middle",style:{width:"400px"},children:[d?Object(w.jsx)(p.a,{message:"Login Failed",description:d,type:"error",showIcon:!0,style:{textAlign:"left"}}):Object(w.jsx)(w.Fragment,{}),Object(w.jsx)("h4",{children:"Enrollment Secret"}),Object(w.jsx)("p",{children:"Contact admin to assist with keying in enrollment secret"}),Object(w.jsx)(F.a,Object(N.a)(Object(N.a)({},r),{},{size:"large",placeholder:"Enrollment Secret",type:"password",prefix:Object(w.jsx)(P.a,{})})),Object(w.jsx)(M.a,{type:"primary",size:"large",shape:"round",onClick:function(){j(null),c(!0),g.a.get("".concat("https://go.lentorresidence.com","/").concat(r.value),{timeout:1e3}).then((function(e){console.log(e.data),localStorage.setItem("EncryptedSymmmetricKey",e.data),window.open("/login","_self")})).catch((function(e){c(!1),e.reponse&&401===e.response.status?j(e.response.data.message):j("Enrollment Key Invalid. Please try again.")}))},loading:s,style:{width:"100%"},children:s?"Logging In...":"Login"})]})})};var ke=function(e){var t=Object(a.useState)(),n=Object(o.a)(t,2),s=n[0],c=n[1];Object(a.useEffect)((function(){var t=S();t?(g.a.get("".concat("https://e-pcr-backend.sutdsh.xyz","/users/verifyToken?token=").concat(t)).then((function(e){})).catch((function(e){I()})),g.a.post("".concat("https://e-pcr-backend.sutdsh.xyz","/users/listStaff"),{},{headers:{token:t}}).then((function(e){c(e.data)})).catch((function(e){console.log(e)}))):e.history.push("/login")}),[]);var r=[{title:"Username",key:"_id",dataIndex:"username"},{title:"Email",key:"_id",dataIndex:"email"},{title:"Role",key:"_id",dataIndex:"role"},{title:"Date Created",key:"_id",dataIndex:"creationDate",render:function(e){return Object(w.jsx)("p",{children:Q()(e).format("MMMM Do YYYY, h:mm:ss a")})}},{title:"Action",key:"action",width:100,render:function(t){return Object(w.jsx)(D.b,{size:"middle",children:Object(w.jsx)("a",{onClick:function(){e.history.push("/users_module/reset_password/"+t.username)},children:"Reset Password"})})}}];return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(J.a,{className:"site-page-header",title:"User Management Module"}),Object(w.jsx)("div",{style:{padding:"30px"},children:Object(w.jsxs)(D.b,{direction:"vertical",size:"middle",children:[Object(w.jsx)(M.a,{onClick:function(){e.history.push("/users_module/addUser")},children:"Add new Staff"}),Object(w.jsx)("h3",{children:"Registed Staff List"}),Object(w.jsx)(pe.a,{columns:r,dataSource:s,onChange:function(e){console.log("params",e)}})]})})]})},Ie=n(297);Ie.config({allowPassphrases:!1,maxLength:128,minLength:10,minPhraseLength:20,minOptionalTestsToPass:7});var Ne=function(e){var t=S(),n=Object(a.useState)(!1),s=Object(o.a)(n,2),c=s[0],r=s[1],i=Object(a.useState)(),l=Object(o.a)(i,2),d=l[0],j=l[1],u=Object(a.useState)(),b=Object(o.a)(u,2),h=b[0],O=b[1],m=function(e){var t=Object(a.useState)(e),n=Object(o.a)(t,2),s=n[0],c=n[1];return{value:s,onChange:function(e){c(e.target.value);var t=Ie.test(e.target.value);O(t.requiredTestErrors)}}}("");function x(){e.history.push("/users_module")}return Object(a.useEffect)((function(){t?g.a.get("".concat("https://e-pcr-backend.sutdsh.xyz","/users/verifyToken?token=").concat(t)).then((function(e){})).catch((function(e){I()})):e.history.push("/login")}),[]),Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(M.a,{style:{margin:"10px"},onClick:x,type:"default",children:"Back"}),Object(w.jsx)(J.a,{className:"site-page-header",title:"Add Staff User"}),Object(w.jsx)("div",{style:{padding:"30px"},children:Object(w.jsxs)(D.b,{direction:"vertical",size:"middle",children:[d&&Object(w.jsx)(w.Fragment,{children:Object(w.jsx)(p.a,{message:"Error",description:d,type:"error",showIcon:!0})}),!c&&Object(w.jsx)("div",{children:Object(w.jsxs)(oe.a,Object(N.a)(Object(N.a)({name:"validate_other"},{labelCol:{span:30,offset:0},wrapperCol:{span:50}}),{},{onFinish:function(e){console.log(h),console.log(h.length),0===h.length?g.a.post("".concat("https://e-pcr-backend.sutdsh.xyz","/users/register"),{username:e.username.toUpperCase(),password:e.password,email:e.email,role:e.role},{headers:{token:t}}).then((function(e){r(!0),j(null)})).catch((function(e){console.log(e.response.data.message),j(e.response.data.message)})):alert("Password complexity requirements not met")},children:[Object(w.jsx)(oe.a.Item,{name:"username",label:"Username",required:!0,children:Object(w.jsx)(F.a,{required:!0})}),Object(w.jsx)(oe.a.Item,{name:"password",label:"Password",required:!0,children:Object(w.jsx)(F.a,Object(N.a)(Object(N.a)({},m),{},{type:"password",required:!0}))}),Object(w.jsx)("p",{children:h}),Object(w.jsx)(oe.a.Item,{name:"email",label:"Email Address",required:!0,children:Object(w.jsx)(F.a,{type:"email",required:!0})}),Object(w.jsx)(oe.a.Item,{name:"role",label:"Role",rules:[{required:!0}],children:Object(w.jsxs)(ie.a,{placeholder:"Select User Role",allowClear:!0,children:[Object(w.jsx)(Option,{value:"restricted",children:"Restricted (Staff)"}),Object(w.jsx)(Option,{value:"full",children:"Full (Admin)"})]})}),Object(w.jsx)(oe.a.Item,{children:Object(w.jsx)(M.a,{type:"primary",htmlType:"submit",children:"Submit"})})]}))}),c&&Object(w.jsx)(de.a,{status:"success",title:"Success!",subTitle:"Staff Account Created",extra:[Object(w.jsx)(M.a,{type:"primary",onClick:x,children:"Back"},"console")]})]})})]})},Ce=n(297);Ce.config({allowPassphrases:!1,maxLength:128,minLength:10,minPhraseLength:20,minOptionalTestsToPass:7});var we=function(e){var t=S(),n=Object(l.h)().username,s=Object(a.useState)(!1),c=Object(o.a)(s,2),r=c[0],i=c[1],d=Object(a.useState)(),j=Object(o.a)(d,2),u=j[0],b=j[1],h=Object(a.useState)(),O=Object(o.a)(h,2),m=O[0],x=O[1],f=function(e){var t=Object(a.useState)(e),n=Object(o.a)(t,2),s=n[0],c=n[1];return{value:s,onChange:function(e){c(e.target.value);var t=Ce.test(e.target.value);x(t.requiredTestErrors)}}}("");function y(){e.history.push("/")}return Object(a.useEffect)((function(){t?g.a.get("".concat("https://e-pcr-backend.sutdsh.xyz","/users/verifyToken?token=").concat(t)).then((function(e){})).catch((function(e){I()})):e.history.push("/login")}),[]),Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(M.a,{style:{margin:"10px"},onClick:y,type:"default",children:"Back"}),Object(w.jsx)(J.a,{className:"site-page-header",title:"Reset Password"}),Object(w.jsx)("div",{style:{padding:"30px"},children:Object(w.jsxs)(D.b,{direction:"vertical",size:"middle",children:[u&&Object(w.jsx)(w.Fragment,{children:Object(w.jsx)(p.a,{message:"Error",description:u,type:"error",showIcon:!0})}),!r&&Object(w.jsx)("div",{children:Object(w.jsxs)(oe.a,Object(N.a)(Object(N.a)({name:"validate_other"},{labelCol:{span:30,offset:0},wrapperCol:{span:50}}),{},{onFinish:function(e){0===m.length?g.a.post("".concat("https://e-pcr-backend.sutdsh.xyz","/users/resetPassword"),{username:n,password:e.password},{headers:{token:t}}).then((function(e){i(!0),b(null)})).catch((function(e){console.log(e.response.data.message),b(e.response.data.message)})):alert("Password complexity requirements not met")},children:[Object(w.jsx)(oe.a.Item,{name:"password",label:"Password",required:!0,children:Object(w.jsx)(F.a,Object(N.a)(Object(N.a)({},f),{},{type:"password",required:!0}))}),Object(w.jsx)("p",{children:m}),Object(w.jsx)(oe.a.Item,{children:Object(w.jsx)(M.a,{type:"primary",htmlType:"submit",children:"Submit"})})]}))}),r&&Object(w.jsx)(de.a,{status:"success",title:"Success!",subTitle:"Password reset successful",extra:[Object(w.jsx)(M.a,{type:"primary",onClick:y,children:"Back"},"console")]})]})})]})},Re=n(558),_e=n(553);var Ae=function(e){var t=e.pendingSubmission,n=t["0000"].map((function(e){return Object(w.jsx)("li",{children:e},e)})),a=t["0200"].map((function(e){return Object(w.jsx)("li",{children:e},e)})),s=t["0400"].map((function(e){return Object(w.jsx)("li",{children:e},e)})),c=t["0600"].map((function(e){return Object(w.jsx)("li",{children:e},e)})),r=t["0800"].map((function(e){return Object(w.jsx)("li",{children:e},e)})),i=t[1e3].map((function(e){return Object(w.jsx)("li",{children:e},e)})),o=t[1200].map((function(e){return Object(w.jsx)("li",{children:e},e)})),l=t[1400].map((function(e){return Object(w.jsx)("li",{children:e},e)})),d=t[1600].map((function(e){return Object(w.jsx)("li",{children:e},e)})),b=t[1800].map((function(e){return Object(w.jsx)("li",{children:e},e)})),h=t[2e3].map((function(e){return Object(w.jsx)("li",{children:e},e)})),p=t[2200].map((function(e){return Object(w.jsx)("li",{children:e},e)}));return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("h3",{children:"Pending Submission for today (Restraints)"}),Object(w.jsxs)("div",{className:"site-card-wrapper",children:[Object(w.jsxs)(j.a,{gutter:16,children:[Object(w.jsx)(u.a,{span:8,children:Object(w.jsx)(_e.a,{title:"0000",bordered:!1,children:n})}),Object(w.jsx)(u.a,{span:8,children:Object(w.jsx)(_e.a,{title:"0200",bordered:!1,children:a})}),Object(w.jsx)(u.a,{span:8,children:Object(w.jsx)(_e.a,{title:"0400",bordered:!1,children:s})})]}),Object(w.jsx)("br",{}),Object(w.jsxs)(j.a,{gutter:16,children:[Object(w.jsx)(u.a,{span:8,children:Object(w.jsx)(_e.a,{title:"0600",bordered:!1,children:c})}),Object(w.jsx)(u.a,{span:8,children:Object(w.jsx)(_e.a,{title:"0800",bordered:!1,children:r})}),Object(w.jsx)(u.a,{span:8,children:Object(w.jsx)(_e.a,{title:"1000",bordered:!1,children:i})})]})," ",Object(w.jsx)("br",{}),Object(w.jsxs)(j.a,{gutter:16,children:[Object(w.jsx)(u.a,{span:8,children:Object(w.jsx)(_e.a,{title:"1200",bordered:!1,children:o})}),Object(w.jsx)(u.a,{span:8,children:Object(w.jsx)(_e.a,{title:"1400",bordered:!1,children:l})}),Object(w.jsx)(u.a,{span:8,children:Object(w.jsx)(_e.a,{title:"1600",bordered:!1,children:d})})]}),Object(w.jsx)("br",{}),Object(w.jsxs)(j.a,{gutter:16,children:[Object(w.jsx)(u.a,{span:8,children:Object(w.jsx)(_e.a,{title:"1800",bordered:!1,children:b})}),Object(w.jsx)(u.a,{span:8,children:Object(w.jsx)(_e.a,{title:"2000",bordered:!1,children:h})}),Object(w.jsx)(u.a,{span:8,children:Object(w.jsx)(_e.a,{title:"2200",bordered:!1,children:p})})]})]})]})};var Te=function(e){var t=Object(a.useState)(),n=Object(o.a)(t,2),s=n[0],c=n[1],r=Object(a.useState)(),i=Object(o.a)(r,2),l=i[0],d=i[1],j=Object(a.useState)(!1),u=Object(o.a)(j,2),b=u[0],h=u[1];Object(a.useEffect)((function(){var t=S();t?(g.a.get("".concat("https://e-pcr-backend.sutdsh.xyz","/users/verifyToken?token=").concat(t)).then((function(e){})).catch((function(e){I()})),g.a.post("".concat("https://e-pcr-backend.sutdsh.xyz","/completion_status/restraintsForm"),{date:x},{headers:{token:t}}).then((function(e){c(e.data)})).catch((function(e){console.log(e)})),g.a.post("".concat("https://e-pcr-backend.sutdsh.xyz","/residents/getRestraintsMonitoringStatus"),{},{headers:{token:t}}).then((function(e){console.log("restraints montor",e.data),d(e.data)})).catch((function(e){console.log(e)}))):e.history.push("/login")}),[]);var p=null===l||void 0===l?void 0:l.map((function(e){return Object(w.jsx)("li",{children:e.bed},e._id)})),O=Object(a.useState)(Q()().add(0,"days").startOf("day")),m=Object(o.a)(O,2),x=m[0];return m[1],Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(J.a,{className:"site-page-header",title:"Completion Status Module"}),Object(w.jsx)("div",{style:{padding:"30px"},children:Object(w.jsx)(D.b,{direction:"vertical",size:"middle",children:s&&Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(Ae,{pendingSubmission:s}),Object(w.jsx)("br",{}),Object(w.jsx)(M.a,{type:"primary",onClick:function(){h(!0)},children:"Residents under Restraints Monitoring"}),Object(w.jsx)(Re.a,{title:"Residents under Restraints Monitoring",visible:b,onOk:function(){h(!1)},children:l&&Object(w.jsx)(w.Fragment,{children:p})})]})})})]})};var De=function(){var e=Object(a.useState)(!0),t=Object(o.a)(e,2),n=t[0],s=t[1],c=Object(a.useState)({username:null}),r=Object(o.a)(c,2),i=r[0],f=r[1],y=Object(a.useState)(!1),k=Object(o.a)(y,2),N=k[0],C=k[1],R=d.a.Header,A=d.a.Footer,D=d.a.Sider,F=d.a.Content,M=Object(l.g)(),P=v();return Object(a.useEffect)((function(){g.a.get("".concat("https://e-pcr-backend.sutdsh.xyz","/networkTest"),{timeout:3e3}).then((function(e){console.log("IP Whitelisted"),C(!1)})).catch((function(e){C(!0)}));var e=S();e||"/login"===window.location.pathname||"/enroll"===window.location.pathname?g.a.get("".concat("https://e-pcr-backend.sutdsh.xyz","/users/verifyToken?token=").concat(e),{timeout:4e3}).then((function(e){s(!1),f(P)})).catch((function(e){I(),s(!1)})):window.open("/login","_self")}),[]),n&&S()?Object(w.jsx)("div",{className:"content",children:"Checking Authentication..."}):Object(w.jsx)("div",{className:"App",children:Object(w.jsxs)(d.a,{style:{minHeight:"100vh"},children:[Object(w.jsxs)(R,{className:"header",children:[Object(w.jsx)("div",{className:"logo"}),Object(w.jsx)(j.a,{justify:"end",children:null!=i.username&&Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(u.a,{span:1,children:Object(w.jsx)(b.a,{size:40,children:i.username})}),Object(w.jsx)(u.a,{span:1})]})})]}),Object(w.jsxs)(d.a,{children:["/login"!==window.location.pathname?Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)(D,{breakpoint:"lg",collapsedWidth:"0",onBreakpoint:function(e){console.log(e)},onCollapse:function(e,t){console.log(e,t)},children:[Object(w.jsx)("div",{className:"logo"}),Object(w.jsxs)(h.a,{theme:"dark",mode:"inline",defaultSelectedKeys:["1"],children:[Object(w.jsx)(h.a.Item,{icon:Object(w.jsx)(O.a,{}),onClick:function(){return M.push("/select_patient")},children:"Forms"},"1"),Object(w.jsx)(h.a.Item,{icon:Object(w.jsx)(m.a,{}),onClick:function(){return M.push("/residents_module")},children:"Residents Module"},"2"),"full"===i.role&&Object(w.jsx)(h.a.Item,{icon:Object(w.jsx)(m.a,{}),onClick:function(){return M.push("/users_module")},children:"Users Module"},"3"),Object(w.jsx)(h.a.Item,{icon:Object(w.jsx)(x.a,{}),onClick:function(){return M.push("/announcement")},children:"Announcements"},"4"),Object(w.jsx)(h.a.Item,{icon:Object(w.jsx)(x.a,{}),onClick:function(){return M.push("/settings")},children:"Settings"},"5"),Object(w.jsx)(h.a.Item,{icon:Object(w.jsx)(x.a,{}),onClick:function(){return M.push("/completion_status")},children:"Completion Status"},"6")]})]})}):Object(w.jsx)(w.Fragment,{}),Object(w.jsxs)(d.a,{children:[N?Object(w.jsx)(p.a,{message:"Network Error",description:"Please connect to TLR Wifi",type:"error",showIcon:!0,style:{textAlign:"left"}}):Object(w.jsx)(w.Fragment,{}),Object(w.jsx)(F,{children:Object(w.jsx)("div",{className:"content",children:Object(w.jsxs)(l.d,{children:[Object(w.jsx)(T,{path:"/login",component:E}),Object(w.jsx)(T,{path:"/enroll",component:Se}),Object(w.jsx)(_,{path:"/settings",component:Y}),Object(w.jsx)(_,{path:"/announcement",component:U}),Object(w.jsx)(_,{exact:!0,path:["/select_patient","/"],component:G}),Object(w.jsx)(_,{exact:!0,path:["/patient_profile/:bedNo","/"],component:re}),Object(w.jsx)(_,{exact:!0,path:["/forms/restraints_form/:uuid","/"],component:be}),Object(w.jsx)(_,{exact:!0,path:["/forms/progress_record_form/:uuid","/"],component:ye}),Object(w.jsx)(_,{exact:!0,path:["/residents_module/","/"],component:Oe}),Object(w.jsx)(_,{exact:!0,path:["/residents_module/admit","/"],component:me}),Object(w.jsx)(_,{exact:!0,path:["/users_module","/"],component:ke}),Object(w.jsx)(_,{exact:!0,path:["/users_module/addUser","/"],component:Ne}),Object(w.jsx)(_,{exact:!0,path:["/users_module/reset_password/:username","/"],component:we}),Object(w.jsx)(_,{exact:!0,path:["/completion_status","/"],component:Te})]})})}),Object(w.jsx)(A,{children:"ePCR"})]})]})]})})},Fe=function(e){e&&e instanceof Function&&n.e(6).then(n.bind(null,940)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),a(e),s(e),c(e),r(e)}))};r.a.render(Object(w.jsx)(s.a.StrictMode,{children:Object(w.jsx)(i.a,{children:Object(w.jsx)(De,{})})}),document.getElementById("root")),Fe()}},[[543,1,2]]]);
//# sourceMappingURL=main.2d974601.chunk.js.map