(this["webpackJsonpepcr-frontend"]=this["webpackJsonpepcr-frontend"]||[]).push([[0],{333:function(e,t,n){},351:function(e,t,n){},358:function(e,t){},360:function(e,t){},370:function(e,t){},372:function(e,t){},399:function(e,t){},401:function(e,t){},402:function(e,t){},407:function(e,t){},409:function(e,t){},415:function(e,t){},417:function(e,t){},436:function(e,t){},448:function(e,t){},451:function(e,t){},594:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(35),s=n.n(r),i=n(118),o=(n(333),n(15)),l=n(34),d=n(602),j=n(137),u=n(75),b=n(321),h=n(85),p=n(613),O=(n(231),n(617)),m=n(618),x=n(619),f=n(21),g=n.n(f),y=(n(351),n(352),n(240)),v=function(){var e=localStorage.getItem("user");return e?JSON.parse(e):null},k=function(){localStorage.getItem("EncryptedSymmmetricKey")||"/enroll"===window.location.pathname||window.open("/enroll","_self");var e=localStorage.getItem("token");return e?(sessionStorage.getItem("AESKEY")||(localStorage.removeItem("token"),localStorage.removeItem("user"),window.open("/login","_self")),e):null},S=function(e){sessionStorage.getItem("AESKEY")||function(e){var t=localStorage.getItem("EncryptedSymmmetricKey"),n=y.AES.decrypt(t,e).toString(y.enc.Utf8);sessionStorage.setItem("AESKEY",n)}(e)},N=function(){localStorage.removeItem("token"),localStorage.removeItem("user")},C=n(29),I=n(186),R=n(1),_=["component"];var w=function(e){var t=e.component,n=Object(I.a)(e,_);return Object(R.jsx)(l.b,Object(C.a)(Object(C.a)({},n),{},{render:function(e){return k()?Object(R.jsx)(t,Object(C.a)({},e)):Object(R.jsx)(l.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},F=["component"];var M=function(e){var t=e.component,n=Object(I.a)(e,F);return Object(R.jsx)(l.b,Object(C.a)(Object(C.a)({},n),{},{render:function(e){return k()?Object(R.jsx)(l.a,{to:{pathname:"/dashboard"}}):Object(R.jsx)(t,Object(C.a)({},e))}}))},D=n(612),A=n(609),P=n(46),T=n(615),Y=n(616);var V=function(e){var t=Object(a.useState)(e),n=Object(o.a)(t,2),c=n[0],r=n[1];return{value:c,onChange:function(e){r(e.target.value)}}},E=function(e){var t=Object(a.useState)(!1),n=Object(o.a)(t,2),c=n[0],r=n[1],s=V(""),i=V(""),l=Object(a.useState)(null),d=Object(o.a)(l,2),j=d[0],u=d[1];return Object(R.jsx)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},children:Object(R.jsxs)(D.b,{direction:"vertical",size:"middle",style:{width:"400px"},children:[j?Object(R.jsx)(p.a,{message:"Login Failed",description:j,type:"error",showIcon:!0,style:{textAlign:"left"}}):Object(R.jsx)(R.Fragment,{}),Object(R.jsx)(A.a,Object(C.a)(Object(C.a)({},s),{},{size:"large",placeholder:"Username",prefix:Object(R.jsx)(T.a,{})})),Object(R.jsx)(A.a.Password,Object(C.a)(Object(C.a)({},i),{},{size:"large",placeholder:"Password",prefix:Object(R.jsx)(Y.a,{})})),Object(R.jsx)(P.a,{type:"primary",size:"large",shape:"round",onClick:function(){u(null),r(!0),g.a.post("".concat("https://epcr-backend.lentorresidence.com","/users/signin"),{username:s.value,password:i.value}).then((function(e){var t,n;r(!1),t=e.data.token,n=e.data.user,localStorage.setItem("token",t),localStorage.setItem("user",JSON.stringify(n)),S(e.data.key),window.open("/select_patient","_self")})).catch((function(e){r(!1),e.reponse&&401===e.response.status?u(e.response.data.message):u("Something went wrong. Please try again later.")}))},loading:c,style:{width:"100%"},children:c?"Logging In...":"Login"})]})})},J=n(608);var B=function(e){var t=v();return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(J.a,{className:"site-page-header",title:"Settings"}),Object(R.jsxs)("div",{style:{padding:"30px"},children:[Object(R.jsx)(P.a,{type:"primary",onClick:function(){N(),window.open("/login","_self")},children:"Logout"},"console"),Object(R.jsx)("br",{}),Object(R.jsx)("br",{}),Object(R.jsx)(P.a,{type:"primary",onClick:function(){e.history.push("/users_module/reset_password/"+t.username)},children:"Change Password"},"console")]})]})},q=n(607),G=n(600);var z=function(e){var t=q.a.Text,n=Object(a.useState)(),c=Object(o.a)(n,2),r=c[0],s=c[1],i=Object(a.useState)(),l=Object(o.a)(i,2),d=l[0],j=l[1];return Object(a.useEffect)((function(){var t=k();t?(g.a.get("".concat("https://epcr-backend.lentorresidence.com","/users/verifyToken?token=").concat(t)).catch((function(e){N()})),g.a.post("".concat("https://epcr-backend.lentorresidence.com","/residents/listAdmitted"),{},{headers:{token:t}}).then((function(e){var t=e.data;t.map((function(e){e.value=e.bed,e.numeric=parseInt(e.bed.slice(0,-1))})),t.sort((function(e,t){return e.numeric<t.numeric?-1:e.numeric>t.numeric?1:0})),s(t)})).catch((function(e){console.log(e)}))):e.history.push("/login")}),[]),Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(J.a,{className:"site-page-header",title:"Select Patient"}),Object(R.jsx)("div",{style:{padding:"30px"},children:Object(R.jsxs)(D.b,{direction:"vertical",size:"middle",children:[Object(R.jsx)(t,{children:"Input Patient Bed"}),Object(R.jsx)(G.a,{style:{width:200},options:r,placeholder:"Select",onSelect:function(e,t){return function(e,t){j(t.value)}(0,t)},filterOption:function(e,t){return-1!==t.value.indexOf(e)},virtual:!1}),d&&Object(R.jsxs)("div",{children:[Object(R.jsxs)("p",{children:["Selected Bed: ",d]}),Object(R.jsx)(P.a,{type:"primary",onClick:function(){window.open("/patient_profile/".concat(d),"_self")},children:"Submit"})]})]})})]})};var L=function(){return Object(l.g)(),Object(a.useEffect)((function(){var e=k();e&&g.a.get("".concat("https://epcr-backend.lentorresidence.com","/users/verifyToken?token=").concat(e)).then((function(e){console.log(e)})).catch((function(e){N()}))}),[]),Object(R.jsx)("div",{children:Object(R.jsx)(J.a,{className:"site-page-header",title:"Announcements"})})},U=n(604),H=n(614),K=(n(593),n(228)),W=n.n(K),Q=n(33),X=n.n(Q),Z=n(240),$=function(e){var t=sessionStorage.getItem("AESKEY");return Z.AES.encrypt(e,t).toString()},ee=function(e){var t=sessionStorage.getItem("AESKEY");return Z.AES.encrypt(JSON.stringify(e),t).toString()},te=function(e){var t=sessionStorage.getItem("AESKEY");return Z.AES.decrypt(e,t).toString(Z.enc.Utf8)},ne=function(e){var t=sessionStorage.getItem("AESKEY");return Z.AES.decrypt(JSON.parse(e),t).toString(Z.enc.Utf8)},ae=n(146),ce=(n(301),[{text:"Date",key:"_id",dataField:"formVals",formatter:function(e){return Object(R.jsx)("p",{children:JSON.parse(e).date})}},{text:"Time",key:"_id",dataField:"formVals",formatter:function(e){return Object(R.jsx)("p",{children:JSON.parse(e).time})}},{text:"Restraints Applied Correctly",key:"_id",dataField:"formVals",formatter:function(e){return Object(R.jsx)("p",{children:JSON.parse(e).r1})}},{text:"Body & Limbs Comfortable",key:"_id",dataField:"formVals",formatter:function(e){return Object(R.jsx)("p",{children:JSON.parse(e).r2})}},{text:"Adequate Circulation (Restrained Limbs)",key:"_id",dataField:"formVals",formatter:function(e){return Object(R.jsx)("p",{children:JSON.parse(e).r3})}},{text:"Adequate ROM (Restrained Limbs)",key:"_id",dataField:"formVals",formatter:function(e){return Object(R.jsx)("p",{children:JSON.parse(e).r4})}},{text:"Skin Integrity Checked",key:"_id",dataField:"formVals",formatter:function(e){return Object(R.jsx)("p",{children:JSON.parse(e).r5})}},{text:"Type of Restraints",key:"_id",dataField:"formVals",formatter:function(e){return Object(R.jsx)("p",{children:JSON.parse(e)["r-restraints-type"]})}},{text:"Remarks",key:"_id",dataField:"formVals",formatter:function(e){return Object(R.jsx)("p",{children:JSON.parse(e)["r-remarks"]})}},{text:"Staff",key:"_id",dataField:"staff"},{text:"Submitted D/T",key:"_id",dataField:"creationDate",formatter:function(e){return Object(R.jsx)("p",{children:X()(e).format("MMMM Do YYYY, h:mm:ss a")})}}]),re=[{text:"Date",key:"_id",dataField:"formVals",formatter:function(e){return Object(R.jsx)("p",{children:JSON.parse(e).date})}},{text:"Time",key:"_id",dataField:"formVals",formatter:function(e){return Object(R.jsx)("p",{children:JSON.parse(e).time})}},{text:"General Condition",key:"_id",dataField:"formVals",formatter:function(e){return Object(R.jsx)("p",{children:JSON.parse(e).p1})}},{text:"Mental State",key:"_id",dataField:"formVals",formatter:function(e){return Object(R.jsx)("p",{children:JSON.parse(e).p2})}},{text:"Skin Care",key:"_id",dataField:"formVals",formatter:function(e){return Object(R.jsx)("p",{children:JSON.parse(e).p3})}},{text:"Hygiene/ Bathing",key:"_id",dataField:"formVals",formatter:function(e){return Object(R.jsx)("p",{children:JSON.parse(e).p4})}},{text:"Oral Care",key:"_id",dataField:"formVals",formatter:function(e){return Object(R.jsx)("p",{children:JSON.parse(e).p5})}},{text:"Feeding",key:"_id",dataField:"formVals",formatter:function(e){return Object(R.jsx)("p",{children:JSON.parse(e).p6})}},{text:"Bladder",key:"_id",dataField:"formVals",formatter:function(e){return Object(R.jsx)("p",{children:JSON.parse(e).p7})}},{text:"Bowel",key:"_id",dataField:"formVals",formatter:function(e){return Object(R.jsx)("p",{children:JSON.parse(e).p8})}},{text:"Mobility",key:"_id",dataField:"formVals",formatter:function(e){return Object(R.jsx)("p",{children:JSON.parse(e).p9})}},{text:"Rest at Night",key:"_id",dataField:"formVals",formatter:function(e){return Object(R.jsx)("p",{children:JSON.parse(e).p10})}},{text:"Therapy",key:"_id",dataField:"formVals",formatter:function(e){return Object(R.jsx)("p",{children:JSON.parse(e).p11})}},{text:"Visited",key:"_id",dataField:"formVals",formatter:function(e){return Object(R.jsx)("p",{children:JSON.parse(e).p12})}},{text:"Remarks",key:"_id",dataField:"formVals",formatter:function(e){return Object(R.jsx)("p",{children:JSON.parse(e)["r-remarks"]})}},{text:"Staff",key:"_id",dataField:"staff"},{text:"Submitted D/T",key:"_id",dataField:"creationDate",formatter:function(e){return Object(R.jsx)("p",{children:X()(e).format("MMMM Do YYYY, h:mm:ss a")})}}];var se=function(e){return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsxs)("h4",{children:["Bed: ",e.patientData.bed,Object(R.jsx)("br",{}),"Name: ",te(e.patientData.name),Object(R.jsx)("br",{}),"NRIC: ",te(e.patientData.NRIC),Object(R.jsx)("br",{}),"Profile Creation:"," ",X()(e.patientData.creationDate).format("MMMM Do YYYY, h:mm:ss a"),Object(R.jsx)("br",{}),"Status: ",e.patientData.status]}),Object(R.jsxs)("p",{children:["Identifier: ",e.patientData.uuid]})]})};n.p;var ie=function(e){var t=Object(a.useState)(),n=Object(o.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)(),i=Object(o.a)(s,2),d=i[0],j=(i[1],Object(a.useState)({role:null})),u=Object(o.a)(j,2),b=u[0],h=u[1],p=Object(a.useState)(),O=Object(o.a)(p,2),m=O[0],x=O[1],f=Object(a.useState)([X()().add(-2,"days").startOf("day"),X()().endOf("day")]),y=Object(o.a)(f,2),S=y[0],C=y[1],I=Object(a.useState)(),_=Object(o.a)(I,2),w=_[0],F=_[1],M=U.a.RangePicker,A=v(),T=Object(l.h)().bedNo,Y=k();function V(e,t){return e.timeslot<t.timeslot?1:e.timeslot>t.timeslot?-1:0}function E(e,t){return e.dateTime<t.dateTime?1:e.dateTime>t.dateTime?-1:0}return Object(a.useEffect)((function(){Y?(g.a.get("".concat("https://epcr-backend.lentorresidence.com","/users/verifyToken?token=").concat(Y)).then((function(e){h(A.role)})).catch((function(e){N()})),g.a.post("".concat("https://epcr-backend.lentorresidence.com","/residents/getByBed"),{bed:T},{headers:{token:Y}}).then((function(e){r(e.data[0])})).catch((function(e){console.log(e)}))):e.history.push("/login")}),[]),Object(a.useEffect)((function(){c&&(g.a.post("".concat("https://epcr-backend.lentorresidence.com","/forms/restraintsForm/submissionHistory"),{uuid:c.uuid,restraintsDatePicker:S},{headers:{token:Y}}).then((function(e){var t=e.data;t.map((function(e){e.formVals=ne(e.formData),e.timeslot=parseInt(e.timeslot)})),t.sort(V),t.sort(E),x(t),console.log("FDR",t)})).catch((function(e){console.log(e)})),g.a.post("".concat("https://epcr-backend.lentorresidence.com","/forms/progressRecordForm/submissionHistory"),{uuid:c.uuid,restraintsDatePicker:S},{headers:{token:Y}}).then((function(e){var t=e.data;t.map((function(e){e.formVals=ne(e.formData)}));var n=["ND","AM","PM"];t.sort((function(e,t){return n.indexOf(t.timeslot)-n.indexOf(e.timeslot)})),t.sort(E),F(t)})).catch((function(e){console.log(e)})))}),[c,S]),window.matchMedia("(max-width: 600px)").matches,Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(P.a,{style:{margin:"10px"},onClick:function(){e.history.push("/select_patient")},type:"default",children:"Back to patient selector"}),Object(R.jsx)(J.a,{className:"site-page-header",title:"Patient Profile"}),Object(R.jsx)("div",{style:{padding:"30px"},children:Object(R.jsxs)(D.b,{direction:"vertical",size:"middle",children:[c&&Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(se,{patientData:c}),Object(R.jsx)("br",{}),Object(R.jsx)(P.a,{type:"primary",onClick:function(){e.history.push("/forms/restraints_form/".concat(c.uuid))},children:"Submit Restraints Form"}),Object(R.jsx)(P.a,{type:"primary",onClick:function(){e.history.push("/forms/progress_record_form/".concat(c.uuid))},style:{background:"#32a852"},children:"Submit Progress Record Form"}),Object(R.jsx)("br",{}),"full"==b&&Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)("h4",{children:"Monitoring Toggle"}),Object(R.jsx)("p",{children:"Restraints Monitoring:"}),Object(R.jsx)(H.a,{defaultChecked:c.restraintsMonitoring,onChange:function(e){g.a.post("".concat("https://epcr-backend.lentorresidence.com","/residents/setRestraintsMonitoringStatus"),{uuid:c.uuid,monitor:e},{headers:{token:Y}}).catch((function(e){console.log(e)}))}})," ","Progress Record Monitoring:",Object(R.jsx)(H.a,{defaultChecked:c.progressRecordMonitoring,onChange:function(e){g.a.post("".concat("https://epcr-backend.lentorresidence.com","/residents/setProgressRecordMonitoringStatus"),{uuid:c.uuid,monitor:e},{headers:{token:Y}}).catch((function(e){console.log(e)}))}})]}),Object(R.jsx)("br",{}),Object(R.jsxs)(D.b,{direction:"vertical",size:12,children:[Object(R.jsx)("span",{children:"Select Date for Reports below"}),Object(R.jsx)(M,{defaultValue:[X()().add(-2,"days").startOf("day"),X()().startOf("day")],onChange:function(e){var t=e[1];t=X()(t).endOf("day"),C([e[0],t])}})]}),Object(R.jsx)("h3",{children:"Restraints Form submission history"}),Object(R.jsx)(P.a,{style:{margin:"10px"},onClick:function(){!function(e,t){var n=new ae.default("landscape");n.text("Restraints Report",5,15),n.setFontSize(10),n.text("Resident Name: "+te(e.name),5,30),n.text("Resident NRIC: "+te(e.NRIC),5,35),n.text("Report Generated: "+X()().toDate(),5,40);for(var a=[],c=0;c<t.length;c++){var r=[];console.log(JSON.parse(t[c].formVals).time),r.push(JSON.parse(t[c].formVals).date),r.push(JSON.parse(t[c].formVals).time),r.push(JSON.parse(t[c].formVals).r1),r.push(JSON.parse(t[c].formVals).r2),r.push(JSON.parse(t[c].formVals).r3),r.push(JSON.parse(t[c].formVals).r4),r.push(JSON.parse(t[c].formVals).r5),r.push(JSON.parse(t[c].formVals)["r-restraints-type"]),r.push(JSON.parse(t[c].formVals)["r-remarks"]),r.push(t[c].staff),r.push(X()(t[c].creationDate).format("MMMM Do YYYY, h:mm:ss a")),a.push(r)}n.autoTable({theme:"grid",startY:50,head:[["Date","Time","Restraints Applied Correctly","Body & Limbs in Comfortable Position","Adequate Circulation (Restrained Limbs)","Adequate ROM (Restrained Limbs)","Skin Integrity Checked","Restraints Type","Remarks","Staff Signature","Submission D/T"]],body:a}),n.save("table.pdf")}(c,m)},type:"default",children:"Export Restraints Data"}),Object(R.jsx)("div",{className:"pcf",children:m&&Object(R.jsx)(W.a,{keyField:"id",data:m,columns:ce})}),Object(R.jsx)("h3",{children:"Progress Record Form submission history"}),Object(R.jsx)(P.a,{style:{margin:"10px"},onClick:function(){!function(e,t){var n=new ae.default("landscape");n.text("Progress Record Report",5,15),n.setFontSize(10),n.text("Resident Name: "+te(e.name),5,30),n.text("Resident NRIC: "+te(e.NRIC),5,35),n.text("Report Generated: "+X()().toDate(),5,40),n.setFontSize(7);for(var a=[],c=0;c<t.length;c++){var r=[];console.log(JSON.parse(t[c].formVals)),r.push(JSON.parse(t[c].formVals).date),r.push(JSON.parse(t[c].formVals).time),r.push(JSON.parse(t[c].formVals).p1),r.push(JSON.parse(t[c].formVals).p2),r.push(JSON.parse(t[c].formVals).p3),r.push(JSON.parse(t[c].formVals).p4),r.push(JSON.parse(t[c].formVals).p5),r.push(JSON.parse(t[c].formVals).p6),r.push(JSON.parse(t[c].formVals).p7),r.push(JSON.parse(t[c].formVals).p8),r.push(JSON.parse(t[c].formVals).p9),r.push(JSON.parse(t[c].formVals).p10),r.push(JSON.parse(t[c].formVals).p11),r.push(JSON.parse(t[c].formVals).p12),r.push(JSON.parse(t[c].formVals)["r-remarks"]),r.push(t[c].staff),r.push(X()(t[c].creationDate).format("MMMM Do YYYY, h:mm:ss a")),a.push(r)}n.autoTable({theme:"grid",startY:50,styles:{fontSize:7},head:[["Date","Time","General Condition","Mental State\t","Skin Care","Hygiene/Bathing","Oral Care","Feeding","Bladder","Bowel","Mobility","Rest at Night","Therapy","Visited","Remarks","Staff Signature","Submission D/T"]],body:a}),n.save("table.pdf")}(c,w)},type:"default",children:"Export Progress Record Data"}),Object(R.jsx)("div",{className:"pcf",children:w&&Object(R.jsx)(W.a,{keyField:"id",data:w,columns:re})})]}),d&&Object(R.jsx)("p",{children:d})]})})]})},oe=n(90),le=n(606),de=n(184),je=n(611),ue=oe.a.Option,be={labelCol:{span:30,offset:0},wrapperCol:{span:50}};var he=function(e){var t=Object(a.useState)(),n=Object(o.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)(),i=Object(o.a)(s,2),d=i[0],j=i[1],u=Object(a.useState)(null),b=Object(o.a)(u,2),h=b[0],p=(b[1],Object(a.useState)()),O=Object(o.a)(p,2),m=O[0],x=O[1],f=Object(a.useState)(!1),y=Object(o.a)(f,2),S=y[0],I=y[1],_=Object(l.h)().uuid,w=k();function F(){e.history.push("/patient_profile/"+c.bed,"_self")}return Object(a.useEffect)((function(){w?(g.a.get("".concat("https://epcr-backend.lentorresidence.com","/users/verifyToken?token=").concat(w)).then((function(e){x(v().username)})).catch((function(e){N()})),g.a.post("".concat("https://epcr-backend.lentorresidence.com","/residents/getByUUID"),{uuid:_},{headers:{token:w}}).then((function(e){r(e.data[0])})).catch((function(e){console.log(e.response.data.error),j(e.response.data.error)}))):e.history.push("/login")}),[]),Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(P.a,{style:{margin:"10px"},onClick:F,type:"default",children:"Back to patient profile"}),Object(R.jsx)(J.a,{className:"site-page-header",title:"Restraints Form"}),Object(R.jsx)("div",{style:{padding:"30px"},children:Object(R.jsxs)(D.b,{direction:"vertical",size:"middle",children:[c&&m&&!S&&Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(se,{patientData:c}),Object(R.jsxs)(le.a,Object(C.a)(Object(C.a)({name:"validate_other"},be),{},{onFinish:function(e){if(e.time){var t=X()(e.date).startOf("day");e.date=e.date.format("YYYY-MM-DD"),console.log("Received values of form: ",JSON.stringify(e)),g.a.post("".concat("https://epcr-backend.lentorresidence.com","/forms/restraintsForm/submit"),{resident:_,formData:ee(e),bed:c.bed,dateTime:t,timeslot:e.time},{headers:{token:w}}).then((function(e){I(!0)})).catch((function(e){console.log(e.response.data.error),j(e.response.data.error)}))}else alert("Time is missing")},children:[Object(R.jsx)(le.a.Item,{name:"date",label:"Date",required:!0,children:Object(R.jsx)(U.a,{})}),Object(R.jsx)(le.a.Item,{onChange:function(){console.log("time change")},name:"time",label:"Time",required:!0,children:Object(R.jsxs)(oe.a,{placeholder:"Select time of check",virtual:!1,children:[Object(R.jsx)(ue,{value:"0000",children:"0000"}),Object(R.jsx)(ue,{value:"0200",children:"0200"}),Object(R.jsx)(ue,{value:"0400",children:"0400"}),Object(R.jsx)(ue,{value:"0600",children:"0600"}),Object(R.jsx)(ue,{value:"0800",children:"0800"}),Object(R.jsx)(ue,{value:"1000",children:"1000"}),Object(R.jsx)(ue,{value:"1200",children:"1200"}),Object(R.jsx)(ue,{value:"1400",children:"1400"}),Object(R.jsx)(ue,{value:"1600",children:"1600"}),Object(R.jsx)(ue,{value:"1800",children:"1800"}),Object(R.jsx)(ue,{value:"2000",children:"2000"}),Object(R.jsx)(ue,{value:"2200",children:"2200"})]})}),h&&Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)("p",{children:h}),Object(R.jsx)("p",{})]}),Object(R.jsx)(le.a.Item,{name:"r1",label:"1. Restraints applied correctly",children:Object(R.jsxs)(de.a.Group,{children:[Object(R.jsx)(de.a,{value:"Y",children:"Yes"}),Object(R.jsx)(de.a,{value:"N",children:"No"}),Object(R.jsx)(de.a,{value:"",children:"NA"})]})}),Object(R.jsx)(le.a.Item,{name:"r2",label:"2. Body & limbs in comfortable position",children:Object(R.jsxs)(de.a.Group,{children:[Object(R.jsx)(de.a,{value:"Y",children:"Yes"}),Object(R.jsx)(de.a,{value:"N",children:"No"}),Object(R.jsx)(de.a,{value:"",children:"NA"})]})}),Object(R.jsx)(le.a.Item,{name:"r3",label:"3. (Restrained Extremities) Adequate circulation",children:Object(R.jsxs)(de.a.Group,{children:[Object(R.jsx)(de.a,{value:"Y",children:"Yes"}),Object(R.jsx)(de.a,{value:"N",children:"No"}),Object(R.jsx)(de.a,{value:"",children:"NA"})]})}),Object(R.jsx)(le.a.Item,{name:"r4",label:"4. (Restrained Extremities) Adequate ROM",children:Object(R.jsxs)(de.a.Group,{children:[Object(R.jsx)(de.a,{value:"Y",children:"Yes"}),Object(R.jsx)(de.a,{value:"N",children:"No"}),Object(R.jsx)(de.a,{value:"",children:"NA"})]})}),Object(R.jsx)(le.a.Item,{name:"r5",label:"5. Skin integrity checked",children:Object(R.jsxs)(de.a.Group,{children:[Object(R.jsx)(de.a,{value:"Y",children:"Yes"}),Object(R.jsx)(de.a,{value:"N",children:"No"}),Object(R.jsx)(de.a,{value:"",children:"NA"})]})}),Object(R.jsx)(le.a.Item,{name:"r-restraints-type",label:"6. Type of Restraints",children:Object(R.jsx)(A.a,{})}),Object(R.jsx)(le.a.Item,{name:"r-remarks",label:"7. Remarks",children:Object(R.jsx)(A.a,{})}),Object(R.jsx)(le.a.Item,{name:"staff",label:"Submitted by",children:Object(R.jsx)("span",{className:"ant-form-text",children:m})}),Object(R.jsx)(le.a.Item,{children:Object(R.jsx)(P.a,{type:"primary",htmlType:"submit",children:"Submit"})})]}))]}),S&&Object(R.jsx)(je.a,{status:"success",title:"Success!",subTitle:"You may view the submitted data on patient profile page",extra:[Object(R.jsx)(P.a,{type:"primary",onClick:function(){e.history.push("/select_patient/","_self")},children:"Select new patient"},"console"),Object(R.jsx)(P.a,{onClick:F,children:"Submit new form for same patient"},"buy")]}),d&&Object(R.jsx)("p",{children:d})]})})]})},pe=n(601),Oe=n(603),me=n(610);var xe=function(e){q.a.Text,q.a.Link;var t=Object(a.useState)({username:null}),n=Object(o.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)(),i=Object(o.a)(s,2),l=i[0],d=i[1],j=Object(a.useState)(),u=Object(o.a)(j,2),b=u[0],h=u[1],O=Object(a.useState)(),m=Object(o.a)(O,2),x=m[0],f=m[1],y=Object(a.useState)(),S=Object(o.a)(y,2),C=S[0],I=S[1],_=Object(a.useState)(),w=Object(o.a)(_,2),F=w[0],M=w[1],T=k(),Y=v();function V(){g.a.post("".concat("https://epcr-backend.lentorresidence.com","/residents/listAdmittedFullDetails"),{},{headers:{token:T}}).then((function(e){var t=e.data;t.map((function(e){e.name=te(e.name),e.NRIC=te(e.NRIC),e.numeric=parseInt(e.bed)})),t.sort((function(e,t){return e.numeric<t.numeric?-1:e.numeric>t.numeric?1:0})),d(t)})).catch((function(e){console.log(e)}))}function E(){g.a.post("".concat("https://epcr-backend.lentorresidence.com","/residents/listDischargedFullDetails"),{},{headers:{token:T}}).then((function(e){var t=e.data;t.map((function(e){e.name=te(e.name),e.NRIC=te(e.NRIC)})),h(t)})).catch((function(e){console.log(e)}))}Object(a.useEffect)((function(){T?(g.a.get("".concat("https://epcr-backend.lentorresidence.com","/users/verifyToken?token=").concat(T)).then((function(e){r(Y)})).catch((function(e){N()})),V(),E()):e.history.push("/login")}),[]);var B=Object(a.useState)(!1),G=Object(o.a)(B,2),z=G[0],L=G[1];function U(e){}var K=[{title:"Name",key:"_id",dataIndex:"name"},{title:"NRIC",key:"_id",dataIndex:"NRIC"},{title:"Bed",key:"_id",dataIndex:"bed"},{title:"Initial admission",key:"_id",dataIndex:"creationDate",render:function(e){return Object(R.jsx)("p",{children:X()(e).format("MMMM Do YYYY, h:mm:ss a")})}},{title:"Action",key:"action",width:100,render:function(t){return Object(R.jsxs)(D.b,{size:"middle",children:[Object(R.jsx)("a",{onClick:function(){e.history.push("/patient_profile/"+t.bed)},children:"View Patient"}),Object(R.jsx)(pe.a,{title:"Are you sure to discharge this patient?",onConfirm:function(){return e=t.uuid,void g.a.post("".concat("https://epcr-backend.lentorresidence.com","/residents/discharge"),{uuid:e},{headers:{token:T}}).then((function(e){V(),E()})).catch((function(e){console.log(e.error)}));var e},onCancel:"",okText:"Yes",cancelText:"No",children:Object(R.jsx)("a",{href:"#",children:"Discharge"})}),Object(R.jsx)(H.a,{checked:t.restraintsMonitoring,onChange:function(){console.log(t.restraintsMonitoring),function(e){var t;e.restraintsMonitoring?(t=!1,console.log("turn off")):(t=!0,console.log("turn on")),g.a.post("".concat("https://epcr-backend.lentorresidence.com","/residents/setRestraintsMonitoringStatus"),{uuid:e.uuid,monitor:t},{headers:{token:T}}).then((function(e){V(),E()})).catch((function(e){console.log(e.error)}))}(t)},checkedChildren:"R",unCheckedChildren:"R"})," ",Object(R.jsx)(H.a,{checked:t.progressRecordMonitoring,onChange:function(){!function(e){var t;e.progressRecordMonitoring?(t=!1,console.log("turn off")):(t=!0,console.log("turn on")),g.a.post("".concat("https://epcr-backend.lentorresidence.com","/residents/setProgressRecordMonitoringStatus"),{uuid:e.uuid,monitor:t},{headers:{token:T}}).then((function(e){V(),E()})).catch((function(e){console.log(e.error)}))}(t)},checkedChildren:"P",unCheckedChildren:"P"})]})}}],W=[{title:"Name",key:"_id",dataIndex:"name"},{title:"NRIC",key:"_id",dataIndex:"NRIC"},{title:"Bed",key:"_id",dataIndex:"bed"},{title:"Initial admission",key:"_id",dataIndex:"creationDate",render:function(e){return Object(R.jsx)("p",{children:X()(e).format("MMMM Do YYYY, h:mm:ss a")})}},{title:"Action",key:"action",width:100,render:function(t){return Object(R.jsx)(D.b,{size:"middle",children:Object(R.jsx)("a",{onClick:function(){e.history.push("/patient_profile/"+t.bed)},children:"View Patient"})})}}],Q=[{title:"Name",key:"_id",dataIndex:"name"},{title:"NRIC",key:"_id",dataIndex:"NRIC"},{title:"Initial admission",key:"_id",dataIndex:"creationDate",render:function(e){return Object(R.jsx)("p",{children:X()(e).format("MMMM Do YYYY, h:mm:ss a")})}},{title:"Action",key:"action",width:100,render:function(t){return Object(R.jsxs)(D.b,{size:"middle",children:[Object(R.jsx)("a",{onClick:function(){e.history.push("/patient_profile/"+t.uuid)},children:"View Patient"}),Object(R.jsx)(P.a,{type:"secondary",onClick:function(){var e;I({uuid:(e=t).uuid,name:e.name}),M(null),L(!0)},children:"Re-admit"})]})}}];return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(J.a,{className:"site-page-header",title:"Residents Module"}),Object(R.jsxs)("div",{style:{padding:"30px"},children:[Object(R.jsxs)(D.b,{direction:"vertical",size:"middle",children:["full"==c.role&&Object(R.jsx)(P.a,{onClick:function(){e.history.push("/residents_module/admit")},children:"Admit New Patient"}),Object(R.jsx)("h3",{children:"Table of Admitted Patients"}),"full"==c.role&&Object(R.jsx)(Oe.a,{columns:K,dataSource:l,onChange:U}),"restricted"==c.role&&Object(R.jsx)(Oe.a,{columns:W,dataSource:l,onChange:U}),Object(R.jsx)("br",{}),"full"==c.role&&Object(R.jsxs)("div",{children:[Object(R.jsx)("h3",{children:"Table of Discharged Patients"}),Object(R.jsx)(Oe.a,{columns:Q,dataSource:b,onChange:U})]})]}),Object(R.jsxs)(me.a,{title:"Readmit Resident",visible:z,onOk:function(){g.a.post("".concat("https://epcr-backend.lentorresidence.com","/residents/readmit"),{uuid:C.uuid,bed:x},{headers:{token:T}}).then((function(e){V(),E(),L(!1)})).catch((function(e){e.response.data.error&&M(e.response.data.error)}))},onCancel:function(){L(!1)},children:[C&&Object(R.jsx)("p",{children:C.name}),Object(R.jsx)(A.a,{name:"readmitNewBed",addonBefore:"Bed",onChange:function(e){f(e.target.value)}}),F&&Object(R.jsx)(p.a,{message:F,type:"error"})]})]})]})};var fe=function(e){var t=k(),n=Object(a.useState)(!1),c=Object(o.a)(n,2),r=c[0],s=c[1],i=Object(a.useState)(),l=Object(o.a)(i,2),d=l[0],j=l[1];function u(){e.history.push("/residents_module")}return Object(a.useEffect)((function(){t?g.a.get("".concat("https://epcr-backend.lentorresidence.com","/users/verifyToken?token=").concat(t)).catch((function(e){N()})):e.history.push("/login")}),[]),Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(P.a,{style:{margin:"10px"},onClick:u,type:"default",children:"Back"}),Object(R.jsx)(J.a,{className:"site-page-header",title:"Admit Patient"}),Object(R.jsx)("div",{style:{padding:"30px"},children:Object(R.jsxs)(D.b,{direction:"vertical",size:"middle",children:[d&&Object(R.jsx)(R.Fragment,{children:Object(R.jsx)(p.a,{message:"Error",description:d,type:"error",showIcon:!0})}),!r&&Object(R.jsx)("div",{children:Object(R.jsxs)(le.a,Object(C.a)(Object(C.a)({name:"validate_other"},{labelCol:{span:30,offset:0},wrapperCol:{span:50}}),{},{onFinish:function(e){console.log("Received values of form: ",e),g.a.post("".concat("https://epcr-backend.lentorresidence.com","/residents/admit"),{bed:e.bed.toUpperCase(),name:$(e.name.toUpperCase()),NRIC:$(e.NRIC.toUpperCase())},{headers:{token:t}}).then((function(e){s(!0),j(null)})).catch((function(e){console.log(e.response.data.error),j(e.response.data.error)}))},children:[Object(R.jsx)(le.a.Item,{name:"name",label:"Resident Name",required:!0,children:Object(R.jsx)(A.a,{required:!0})}),Object(R.jsx)(le.a.Item,{name:"NRIC",label:"NRIC",required:!0,children:Object(R.jsx)(A.a,{required:!0})}),Object(R.jsx)(le.a.Item,{name:"bed",label:"Resident Bed",required:!0,children:Object(R.jsx)(A.a,{required:!0})}),Object(R.jsx)(le.a.Item,{children:Object(R.jsx)(P.a,{type:"primary",htmlType:"submit",children:"Submit"})})]}))}),r&&Object(R.jsx)(je.a,{status:"success",title:"Success!",subTitle:"Patient Admitted",extra:[Object(R.jsx)(P.a,{type:"primary",onClick:u,children:"Back"},"console")]})]})})]})},ge=n(153),ye=oe.a.Option,ve={labelCol:{span:30,offset:0},wrapperCol:{span:50}};var ke=function(e){var t=Object(a.useState)(),n=Object(o.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)(),i=Object(o.a)(s,2),d=i[0],j=i[1],u=Object(a.useState)(),b=Object(o.a)(u,2),h=b[0],p=b[1],O=Object(a.useState)(!1),m=Object(o.a)(O,2),x=m[0],f=m[1],y=Object(l.h)().uuid,S=k();function I(){e.history.push("/patient_profile/"+c.bed,"_self")}return Object(a.useEffect)((function(){S?(g.a.get("".concat("https://epcr-backend.lentorresidence.com","/users/verifyToken?token=").concat(S)).then((function(e){p(v().username)})).catch((function(e){N()})),g.a.post("".concat("https://epcr-backend.lentorresidence.com","/residents/getByUUID"),{uuid:y},{headers:{token:S}}).then((function(e){r(e.data[0])})).catch((function(e){console.log(e)}))):e.history.push("/login")}),[]),Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(P.a,{style:{margin:"10px"},onClick:I,type:"default",children:"Back to patient profile"}),Object(R.jsx)(J.a,{className:"site-page-header",title:"Progress Record Form"}),Object(R.jsx)("div",{style:{padding:"30px"},children:Object(R.jsxs)(D.b,{direction:"vertical",size:"middle",children:[c&&h&&!x&&Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(se,{patientData:c}),Object(R.jsxs)(le.a,Object(C.a)(Object(C.a)({name:"validate_other"},ve),{},{onFinish:function(e){if(e.time){var t=X()(e.date).startOf("day");e.date=e.date.format("YYYY-MM-DD"),console.log("Received values of form: ",e),g.a.post("".concat("https://epcr-backend.lentorresidence.com","/forms/progressRecordForm/submit"),{resident:y,formData:ee(e),dateTime:t,timeslot:e.time,bed:c.bed},{headers:{token:S}}).then((function(e){f(!0)})).catch((function(e){console.log(e.response.data.error),j(e.response.data.error)}))}else alert("Time is missing")},initialValues:{},children:[Object(R.jsx)(le.a.Item,{name:"date",label:"Date",required:!0,children:Object(R.jsx)(U.a,{})}),Object(R.jsx)(le.a.Item,{name:"time",label:"Time",required:!0,children:Object(R.jsxs)(oe.a,{placeholder:"Select time of check",virtual:!1,children:[Object(R.jsx)(ye,{value:"ND",children:"ND"}),Object(R.jsx)(ye,{value:"AM",children:"AM"}),Object(R.jsx)(ye,{value:"PM",children:"PM"})]})}),Object(R.jsx)(le.a.Item,{name:"p1",label:"1. General Condition",children:Object(R.jsxs)(de.a.Group,{children:[Object(R.jsx)(de.a,{value:"Satisfactory",children:"Satisfactory"}),Object(R.jsx)(de.a,{value:"Unwell",children:"Unwell"}),Object(R.jsx)(de.a,{value:"Poor",children:"Poor"}),Object(R.jsx)(de.a,{value:"",children:"NA"})]})}),Object(R.jsx)(le.a.Item,{name:"p2",label:"2. Mental State",children:Object(R.jsxs)(de.a.Group,{children:[Object(R.jsx)(de.a,{value:"Oriented",children:"Oriented"}),Object(R.jsx)(de.a,{value:"Confused",children:"Confused"}),Object(R.jsx)(de.a,{value:"Behavioural Problem",children:"Behavioural Problem"}),Object(R.jsx)(de.a,{value:"Uncommunicative",children:"Uncommunicative"}),Object(R.jsx)(de.a,{value:"",children:"NA"})]})}),Object(R.jsx)(le.a.Item,{name:"p3",label:"3. Skin Care",children:Object(R.jsxs)(de.a.Group,{children:[Object(R.jsx)(de.a,{value:"Intact",children:"Intact"}),Object(R.jsx)(de.a,{value:"Impaired/Rashes",children:"Impaired/Rashes"}),Object(R.jsx)(de.a,{value:"Wound Care",children:"Wound Care"}),Object(R.jsx)(de.a,{value:"",children:"NA"})]})}),Object(R.jsx)(le.a.Item,{name:"p4",label:"4. Hygiene/Bathing",children:Object(R.jsxs)(de.a.Group,{children:[Object(R.jsx)(de.a,{value:"Self",children:"Self"}),Object(R.jsx)(de.a,{value:"Assisted Bath",children:"Assisted Bath"}),Object(R.jsx)(de.a,{value:"Bed Bath",children:"Bed Bath"}),Object(R.jsx)(de.a,{value:"",children:"NA"})]})}),Object(R.jsx)(le.a.Item,{name:"p5",label:"5. Oral Care",children:Object(R.jsxs)(de.a.Group,{children:[Object(R.jsx)(de.a,{value:"Self",children:"Self"}),Object(R.jsx)(de.a,{value:"Assisted",children:"Assisted"}),Object(R.jsx)(de.a,{value:"Totally Dependent",children:"Totally Dependent"}),Object(R.jsx)(de.a,{value:"",children:"NA"})]})}),Object(R.jsx)(le.a.Item,{name:"p6",label:"6. Feeding",children:Object(R.jsxs)(de.a.Group,{children:[Object(R.jsx)(de.a,{value:"Self",children:"Self"}),Object(R.jsx)(de.a,{value:"Assisted",children:"Assisted"}),Object(R.jsx)(de.a,{value:"NGT/PEG",children:"NGT/PEG"}),Object(R.jsx)(de.a,{value:"",children:"NA"})]})}),Object(R.jsx)(le.a.Item,{name:"p7",label:"7. Bladder",children:Object(R.jsxs)(ge.a.Group,{children:[Object(R.jsx)(ge.a,{value:"Continent",children:"Continent"}),Object(R.jsx)(ge.a,{value:"Incontinent(Diaper)",children:"Incontinent(Diaper)"}),Object(R.jsx)(ge.a,{value:"IDC/IMC/SPC",children:"IDC/IMC/SPC"})]})}),Object(R.jsx)(le.a.Item,{name:"p8",label:"8. Bowel",children:Object(R.jsxs)(ge.a.Group,{children:[Object(R.jsx)(ge.a,{value:"Bowel Opened ",children:"Bowel Opened"}),Object(R.jsx)(ge.a,{value:"Bowel Not Opened",children:"Bowel Not Opened"}),Object(R.jsx)(ge.a,{value:"Continent ",children:"Continent"}),Object(R.jsx)(ge.a,{value:"Incontinent (Diaper) ",children:"Incontinent (Diaper)"}),Object(R.jsx)(ge.a,{value:"Colostomy Care ",children:"Colostomy Care"})]})}),Object(R.jsx)(le.a.Item,{name:"p9",label:"9. Mobility",children:Object(R.jsxs)(ge.a.Group,{children:[Object(R.jsx)(ge.a,{value:"Ambulant",children:"Ambulant"}),Object(R.jsx)(ge.a,{value:"Requires Wheelchair",children:"Requires Wheelchair"}),Object(R.jsx)(ge.a,{value:"Requires Walking Aides",children:"Requires Walking Aides"}),Object(R.jsx)(ge.a,{value:"Requires 2hrly Turning",children:"Requires 2hrly Turning"})]})}),Object(R.jsx)(le.a.Item,{name:"p10",label:"10. Rest During Night",children:Object(R.jsxs)(de.a.Group,{children:[Object(R.jsx)(de.a,{value:"Good",children:"Good"}),Object(R.jsx)(de.a,{value:"Restless/Interrupted",children:"Restless/Interrupted"}),Object(R.jsx)(de.a,{value:"",children:"NA"})]})}),Object(R.jsx)(le.a.Item,{name:"p11",label:"11. Therapy",children:Object(R.jsxs)(de.a.Group,{children:[Object(R.jsx)(de.a,{value:"Active Exercise",children:"Active Exercise"}),Object(R.jsx)(de.a,{value:"Passive Exercise",children:"Passive Exercise"}),Object(R.jsx)(de.a,{value:"",children:"NA"})]})}),Object(R.jsx)(le.a.Item,{name:"p12",label:"12. Visited by Relatives/Friend",children:Object(R.jsxs)(de.a.Group,{children:[Object(R.jsx)(de.a,{value:"Yes",children:"Yes"}),Object(R.jsx)(de.a,{value:"No",children:"No"}),Object(R.jsx)(de.a,{value:"",children:"NA"})]})}),Object(R.jsx)(le.a.Item,{name:"r-remarks",label:"13. Remarks",children:Object(R.jsx)(A.a,{})}),Object(R.jsx)(le.a.Item,{name:"staff",label:"Submitted by",children:Object(R.jsx)("span",{className:"ant-form-text",children:h})}),Object(R.jsx)(le.a.Item,{children:Object(R.jsx)(P.a,{type:"primary",htmlType:"submit",children:"Submit"})})]}))]}),x&&Object(R.jsx)(je.a,{status:"success",title:"Success!",subTitle:"You may view the submitted data on patient profile page",extra:[Object(R.jsx)(P.a,{type:"primary",onClick:function(){e.history.push("/select_patient/","_self")},children:"Select new patient"},"console"),Object(R.jsx)(P.a,{onClick:I,children:"Submit new form for same patient"},"buy")]}),d&&Object(R.jsx)("p",{children:d})]})})]})};var Se=function(e){var t=Object(a.useState)(e),n=Object(o.a)(t,2),c=n[0],r=n[1];return{value:c,onChange:function(e){r(e.target.value)}}},Ne=function(e){var t=Object(a.useState)(!1),n=Object(o.a)(t,2),c=n[0],r=n[1],s=Se(""),i=Object(a.useState)(null),l=Object(o.a)(i,2),d=l[0],j=l[1];return Object(a.useEffect)((function(){k()||"/login"===window.location.pathname||"/enroll"===window.location.pathname||window.open("/login","_self")}),[]),Object(R.jsx)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},children:Object(R.jsxs)(D.b,{direction:"vertical",size:"middle",style:{width:"400px"},children:[d?Object(R.jsx)(p.a,{message:"Login Failed",description:d,type:"error",showIcon:!0,style:{textAlign:"left"}}):Object(R.jsx)(R.Fragment,{}),Object(R.jsx)("h4",{children:"Enrollment Secret"}),Object(R.jsx)("p",{children:"Contact admin to assist with keying in enrollment secret"}),Object(R.jsx)(A.a,Object(C.a)(Object(C.a)({},s),{},{size:"large",placeholder:"Enrollment Secret",type:"password",prefix:Object(R.jsx)(T.a,{})})),Object(R.jsx)(P.a,{type:"primary",size:"large",shape:"round",onClick:function(){j(null),r(!0),g.a.get("".concat("https://go.lentorresidence.com","/").concat(s.value),{timeout:1e3}).then((function(e){console.log(e.data),localStorage.setItem("EncryptedSymmmetricKey",e.data),window.open("/login","_self")})).catch((function(e){r(!1),e.reponse&&401===e.response.status?j(e.response.data.message):j("Enrollment Key Invalid. Please try again.")}))},loading:c,style:{width:"100%"},children:c?"Logging In...":"Login"})]})})};var Ce=function(e){var t=Object(a.useState)(),n=Object(o.a)(t,2),c=n[0],r=n[1];Object(a.useEffect)((function(){var t=k();t?(g.a.get("".concat("https://epcr-backend.lentorresidence.com","/users/verifyToken?token=").concat(t)).then((function(e){})).catch((function(e){N()})),g.a.post("".concat("https://epcr-backend.lentorresidence.com","/users/listStaff"),{},{headers:{token:t}}).then((function(e){r(e.data)})).catch((function(e){console.log(e)}))):e.history.push("/login")}),[]);var s=[{title:"Username",key:"_id",dataIndex:"username"},{title:"Email",key:"_id",dataIndex:"email"},{title:"Role",key:"_id",dataIndex:"role"},{title:"Date Created",key:"_id",dataIndex:"creationDate",render:function(e){return Object(R.jsx)("p",{children:X()(e).format("MMMM Do YYYY, h:mm:ss a")})}},{title:"Action",key:"action",width:100,render:function(t){return Object(R.jsx)(D.b,{size:"middle",children:Object(R.jsx)("a",{onClick:function(){e.history.push("/users_module/reset_password/"+t.username)},children:"Reset Password"})})}}];return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(J.a,{className:"site-page-header",title:"User Management Module"}),Object(R.jsx)("div",{style:{padding:"30px"},children:Object(R.jsxs)(D.b,{direction:"vertical",size:"middle",children:[Object(R.jsx)(P.a,{onClick:function(){e.history.push("/users_module/addUser")},children:"Add new Staff"}),Object(R.jsx)("h3",{children:"Registed Staff List"}),Object(R.jsx)(Oe.a,{columns:s,dataSource:c,onChange:function(e){console.log("params",e)}})]})})]})},Ie=n(311);Ie.config({allowPassphrases:!1,maxLength:128,minLength:10,minPhraseLength:20,minOptionalTestsToPass:7});var Re=function(e){var t=k(),n=Object(a.useState)(!1),c=Object(o.a)(n,2),r=c[0],s=c[1],i=Object(a.useState)(),l=Object(o.a)(i,2),d=l[0],j=l[1],u=Object(a.useState)(),b=Object(o.a)(u,2),h=b[0],O=b[1],m=function(e){var t=Object(a.useState)(e),n=Object(o.a)(t,2),c=n[0],r=n[1];return{value:c,onChange:function(e){r(e.target.value);var t=Ie.test(e.target.value);O(t.requiredTestErrors)}}}("");function x(){e.history.push("/users_module")}return Object(a.useEffect)((function(){t?g.a.get("".concat("https://epcr-backend.lentorresidence.com","/users/verifyToken?token=").concat(t)).then((function(e){})).catch((function(e){N()})):e.history.push("/login")}),[]),Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(P.a,{style:{margin:"10px"},onClick:x,type:"default",children:"Back"}),Object(R.jsx)(J.a,{className:"site-page-header",title:"Add Staff User"}),Object(R.jsx)("div",{style:{padding:"30px"},children:Object(R.jsxs)(D.b,{direction:"vertical",size:"middle",children:[d&&Object(R.jsx)(R.Fragment,{children:Object(R.jsx)(p.a,{message:"Error",description:d,type:"error",showIcon:!0})}),!r&&Object(R.jsx)("div",{children:Object(R.jsxs)(le.a,Object(C.a)(Object(C.a)({name:"validate_other"},{labelCol:{span:30,offset:0},wrapperCol:{span:50}}),{},{onFinish:function(e){console.log(h),console.log(h.length),0===h.length?g.a.post("".concat("https://epcr-backend.lentorresidence.com","/users/register"),{username:e.username.toUpperCase(),password:e.password,email:e.email,role:e.role},{headers:{token:t}}).then((function(e){s(!0),j(null)})).catch((function(e){console.log(e.response.data.message),j(e.response.data.message)})):alert("Password complexity requirements not met")},children:[Object(R.jsx)(le.a.Item,{name:"username",label:"Username",required:!0,children:Object(R.jsx)(A.a,{required:!0})}),Object(R.jsx)(le.a.Item,{name:"password",label:"Password",required:!0,children:Object(R.jsx)(A.a,Object(C.a)(Object(C.a)({},m),{},{type:"password",required:!0}))}),Object(R.jsx)("p",{children:h}),Object(R.jsx)(le.a.Item,{name:"email",label:"Email Address",required:!0,children:Object(R.jsx)(A.a,{type:"email",required:!0})}),Object(R.jsx)(le.a.Item,{name:"role",label:"Role",rules:[{required:!0}],children:Object(R.jsxs)(oe.a,{placeholder:"Select User Role",allowClear:!0,children:[Object(R.jsx)(Option,{value:"restricted",children:"Restricted (Staff)"}),Object(R.jsx)(Option,{value:"full",children:"Full (Admin)"})]})}),Object(R.jsx)(le.a.Item,{children:Object(R.jsx)(P.a,{type:"primary",htmlType:"submit",children:"Submit"})})]}))}),r&&Object(R.jsx)(je.a,{status:"success",title:"Success!",subTitle:"Staff Account Created",extra:[Object(R.jsx)(P.a,{type:"primary",onClick:x,children:"Back"},"console")]})]})})]})},_e=n(311);_e.config({allowPassphrases:!1,maxLength:128,minLength:10,minPhraseLength:20,minOptionalTestsToPass:7});var we=function(e){var t=k(),n=Object(l.h)().username,c=Object(a.useState)(!1),r=Object(o.a)(c,2),s=r[0],i=r[1],d=Object(a.useState)(),j=Object(o.a)(d,2),u=j[0],b=j[1],h=Object(a.useState)(),O=Object(o.a)(h,2),m=O[0],x=O[1],f=function(e){var t=Object(a.useState)(e),n=Object(o.a)(t,2),c=n[0],r=n[1];return{value:c,onChange:function(e){r(e.target.value);var t=_e.test(e.target.value);x(t.requiredTestErrors)}}}("");function y(){e.history.push("/")}return Object(a.useEffect)((function(){t?g.a.get("".concat("https://epcr-backend.lentorresidence.com","/users/verifyToken?token=").concat(t)).then((function(e){})).catch((function(e){N()})):e.history.push("/login")}),[]),Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(P.a,{style:{margin:"10px"},onClick:y,type:"default",children:"Back"}),Object(R.jsx)(J.a,{className:"site-page-header",title:"Reset Password"}),Object(R.jsx)("div",{style:{padding:"30px"},children:Object(R.jsxs)(D.b,{direction:"vertical",size:"middle",children:[u&&Object(R.jsx)(R.Fragment,{children:Object(R.jsx)(p.a,{message:"Error",description:u,type:"error",showIcon:!0})}),!s&&Object(R.jsx)("div",{children:Object(R.jsxs)(le.a,Object(C.a)(Object(C.a)({name:"validate_other"},{labelCol:{span:30,offset:0},wrapperCol:{span:50}}),{},{onFinish:function(e){0===m.length?g.a.post("".concat("https://epcr-backend.lentorresidence.com","/users/resetPassword"),{username:n,password:e.password},{headers:{token:t}}).then((function(e){i(!0),b(null)})).catch((function(e){console.log(e.response.data.message),b(e.response.data.message)})):alert("Password complexity requirements not met")},children:[Object(R.jsx)(le.a.Item,{name:"password",label:"Password",required:!0,children:Object(R.jsx)(A.a,Object(C.a)(Object(C.a)({},f),{},{type:"password",required:!0}))}),Object(R.jsx)("p",{children:m}),Object(R.jsx)(le.a.Item,{children:Object(R.jsx)(P.a,{type:"primary",htmlType:"submit",children:"Submit"})})]}))}),s&&Object(R.jsx)(je.a,{status:"success",title:"Success!",subTitle:"Password reset successful",extra:[Object(R.jsx)(P.a,{type:"primary",onClick:y,children:"Back"},"console")]})]})})]})},Fe=n(605);var Me=function(e){var t=e.pendingSubmission,n=t["0000"].map((function(e){return Object(R.jsx)("li",{children:Object(R.jsx)("a",{href:"/patient_profile/".concat(e),children:e})},e)})),a=t["0200"].map((function(e){return Object(R.jsx)("li",{children:Object(R.jsx)("a",{href:"/patient_profile/".concat(e),children:e})},e)})),c=t["0400"].map((function(e){return Object(R.jsx)("li",{children:Object(R.jsx)("a",{href:"/patient_profile/".concat(e),children:e})},e)})),r=t["0600"].map((function(e){return Object(R.jsx)("li",{children:Object(R.jsx)("a",{href:"/patient_profile/".concat(e),children:e})},e)})),s=t["0800"].map((function(e){return Object(R.jsx)("li",{children:Object(R.jsx)("a",{href:"/patient_profile/".concat(e),children:e})},e)})),i=t[1e3].map((function(e){return Object(R.jsx)("li",{children:Object(R.jsx)("a",{href:"/patient_profile/".concat(e),children:e})},e)})),o=t[1200].map((function(e){return Object(R.jsx)("li",{children:Object(R.jsx)("a",{href:"/patient_profile/".concat(e),children:e})},e)})),l=t[1400].map((function(e){return Object(R.jsx)("li",{children:Object(R.jsx)("a",{href:"/patient_profile/".concat(e),children:e})},e)})),d=t[1600].map((function(e){return Object(R.jsx)("li",{children:Object(R.jsx)("a",{href:"/patient_profile/".concat(e),children:e})},e)})),b=t[1800].map((function(e){return Object(R.jsx)("li",{children:Object(R.jsx)("a",{href:"/patient_profile/".concat(e),children:e})},e)})),h=t[2e3].map((function(e){return Object(R.jsx)("li",{children:Object(R.jsx)("a",{href:"/patient_profile/".concat(e),children:e})},e)})),p=t[2200].map((function(e){return Object(R.jsx)("li",{children:Object(R.jsx)("a",{href:"/patient_profile/".concat(e),children:e})},e)}));return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)("h3",{children:"Pending Submission for today (Restraints)"}),Object(R.jsxs)("div",{className:"site-card-wrapper",children:[Object(R.jsxs)(j.a,{gutter:16,children:[Object(R.jsx)(u.a,{span:8,children:Object(R.jsx)(Fe.a,{title:"0000H",bordered:!1,children:n})}),Object(R.jsx)(u.a,{span:8,children:Object(R.jsx)(Fe.a,{title:"0200H",bordered:!1,children:a})}),Object(R.jsx)(u.a,{span:8,children:Object(R.jsx)(Fe.a,{title:"0400H",bordered:!1,children:c})})]}),Object(R.jsx)("br",{}),Object(R.jsxs)(j.a,{gutter:16,children:[Object(R.jsx)(u.a,{span:8,children:Object(R.jsx)(Fe.a,{title:"0600H",bordered:!1,children:r})}),Object(R.jsx)(u.a,{span:8,children:Object(R.jsx)(Fe.a,{title:"0800H",bordered:!1,children:s})}),Object(R.jsx)(u.a,{span:8,children:Object(R.jsx)(Fe.a,{title:"1000H",bordered:!1,children:i})})]})," ",Object(R.jsx)("br",{}),Object(R.jsxs)(j.a,{gutter:16,children:[Object(R.jsx)(u.a,{span:8,children:Object(R.jsx)(Fe.a,{title:"1200H",bordered:!1,children:o})}),Object(R.jsx)(u.a,{span:8,children:Object(R.jsx)(Fe.a,{title:"1400H",bordered:!1,children:l})}),Object(R.jsx)(u.a,{span:8,children:Object(R.jsx)(Fe.a,{title:"1600H",bordered:!1,children:d})})]}),Object(R.jsx)("br",{}),Object(R.jsxs)(j.a,{gutter:16,children:[Object(R.jsx)(u.a,{span:8,children:Object(R.jsx)(Fe.a,{title:"1800H",bordered:!1,children:b})}),Object(R.jsx)(u.a,{span:8,children:Object(R.jsx)(Fe.a,{title:"2000H",bordered:!1,children:h})}),Object(R.jsx)(u.a,{span:8,children:Object(R.jsx)(Fe.a,{title:"2200H",bordered:!1,children:p})})]})]})]})};var De=function(e){var t=e.pendingSubmission,n=t.ND.map((function(e){return Object(R.jsx)("li",{children:Object(R.jsx)("a",{href:"/patient_profile/".concat(e),children:e})},e)})),a=t.AM.map((function(e){return Object(R.jsx)("li",{children:Object(R.jsx)("a",{href:"/patient_profile/".concat(e),children:e})},e)})),c=t.PM.map((function(e){return Object(R.jsx)("li",{children:Object(R.jsx)("a",{href:"/patient_profile/".concat(e),children:e})},e)}));return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)("h3",{children:"Pending Submission for today (Progress Record)"}),Object(R.jsxs)("div",{className:"site-card-wrapper",children:[Object(R.jsxs)(j.a,{gutter:16,children:[Object(R.jsx)(u.a,{span:8,children:Object(R.jsx)(Fe.a,{title:"ND",bordered:!1,children:n})}),Object(R.jsx)(u.a,{span:8,children:Object(R.jsx)(Fe.a,{title:"AM",bordered:!1,children:a})}),Object(R.jsx)(u.a,{span:8,children:Object(R.jsx)(Fe.a,{title:"PM",bordered:!1,children:c})})]}),Object(R.jsx)("br",{})]})]})};var Ae=function(e){var t=Object(a.useState)(),n=Object(o.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)(),i=Object(o.a)(s,2),l=i[0],d=i[1],j=Object(a.useState)(),u=Object(o.a)(j,2),b=u[0],h=u[1],p=Object(a.useState)(),O=Object(o.a)(p,2),m=O[0],x=O[1],f=Object(a.useState)(!1),y=Object(o.a)(f,2),v=y[0],S=y[1],C=Object(a.useState)(!1),I=Object(o.a)(C,2),_=I[0],w=I[1],F=function(){w(!1),S(!1)},M=function(){w(!1),S(!1)};Object(a.useEffect)((function(){var t=k();t?(g.a.get("".concat("https://epcr-backend.lentorresidence.com","/users/verifyToken?token=").concat(t)).then((function(e){})).catch((function(e){N()})),g.a.post("".concat("https://epcr-backend.lentorresidence.com","/completion_status/restraintsForm"),{date:E},{headers:{token:t}}).then((function(e){r(e.data)})).catch((function(e){console.log(e)})),g.a.post("".concat("https://epcr-backend.lentorresidence.com","/completion_status/progressForm"),{date:E},{headers:{token:t}}).then((function(e){h(e.data)})).catch((function(e){console.log(e)})),g.a.post("".concat("https://epcr-backend.lentorresidence.com","/residents/getRestraintsMonitoringStatus"),{},{headers:{token:t}}).then((function(e){console.log("restraints montor",e.data),d(e.data)})).catch((function(e){console.log(e)})),g.a.post("".concat("https://epcr-backend.lentorresidence.com","/residents/getProgressMonitoringStatus"),{},{headers:{token:t}}).then((function(e){console.log("restraints montor",e.data),x(e.data)})).catch((function(e){console.log(e)}))):e.history.push("/login")}),[]);var A=null===l||void 0===l?void 0:l.map((function(e){return Object(R.jsx)("li",{children:e.bed},e._id)})),T=null===m||void 0===m?void 0:m.map((function(e){return Object(R.jsx)("li",{children:e.bed},e._id)})),Y=Object(a.useState)(X()().add(0,"days").startOf("day")),V=Object(o.a)(Y,2),E=V[0];return V[1],Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(J.a,{className:"site-page-header",title:"Completion Status Module"}),Object(R.jsx)("div",{style:{padding:"30px"},children:Object(R.jsxs)(D.b,{direction:"vertical",size:"middle",children:[c&&Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(Me,{pendingSubmission:c}),Object(R.jsx)("br",{}),Object(R.jsx)(P.a,{type:"primary",onClick:function(){S(!0)},children:"Residents under Restraints Monitoring"}),Object(R.jsx)(me.a,{title:"Residents under Restraints Monitoring",visible:v,onOk:F,onCancel:M,children:l&&Object(R.jsx)(R.Fragment,{children:A})})]}),b&&Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(De,{pendingSubmission:b}),Object(R.jsx)("br",{}),Object(R.jsx)(P.a,{type:"primary",onClick:function(){w(!0)},children:"Residents under Progress Monitoring"}),Object(R.jsx)(me.a,{title:"Residents under Progress Monitoring",visible:_,onOk:F,onCancel:M,children:m&&Object(R.jsx)(R.Fragment,{children:T})})]})]})})]})};var Pe=function(){var e=Object(a.useState)(!0),t=Object(o.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)({username:null}),s=Object(o.a)(r,2),i=s[0],f=s[1],y=Object(a.useState)(!1),S=Object(o.a)(y,2),C=S[0],I=S[1],_=d.a.Header,F=d.a.Footer,D=d.a.Sider,A=d.a.Content,P=Object(l.g)(),T=v();return Object(a.useEffect)((function(){g.a.get("".concat("https://epcr-backend.lentorresidence.com","/networkTest"),{timeout:3e3}).then((function(e){console.log("IP Whitelisted"),I(!1)})).catch((function(e){I(!0)}));var e=k();e||"/login"===window.location.pathname||"/enroll"===window.location.pathname?g.a.get("".concat("https://epcr-backend.lentorresidence.com","/users/verifyToken?token=").concat(e),{timeout:4e3}).then((function(e){c(!1),f(T)})).catch((function(e){N(),c(!1)})):window.open("/login","_self")}),[]),n&&k()?Object(R.jsx)("div",{className:"content",children:"Checking Authentication..."}):Object(R.jsx)("div",{className:"App",children:Object(R.jsxs)(d.a,{style:{minHeight:"100vh"},children:[Object(R.jsxs)(_,{className:"header",children:[Object(R.jsx)("div",{className:"logo"}),Object(R.jsx)(j.a,{justify:"end",children:null!=i.username&&Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(u.a,{span:1,children:Object(R.jsx)(b.a,{size:40,children:i.username})}),Object(R.jsx)(u.a,{span:1})]})})]}),Object(R.jsxs)(d.a,{children:["/login"!==window.location.pathname?Object(R.jsx)(R.Fragment,{children:Object(R.jsxs)(D,{breakpoint:"lg",collapsedWidth:"0",onBreakpoint:function(e){console.log(e)},onCollapse:function(e,t){console.log(e,t)},children:[Object(R.jsx)("div",{className:"logo"}),Object(R.jsxs)(h.a,{theme:"dark",mode:"inline",defaultSelectedKeys:["1"],children:[Object(R.jsx)(h.a.Item,{icon:Object(R.jsx)(O.a,{}),onClick:function(){return P.push("/select_patient")},children:"Forms"},"1"),Object(R.jsx)(h.a.Item,{icon:Object(R.jsx)(m.a,{}),onClick:function(){return P.push("/residents_module")},children:"Residents Module"},"2"),"full"===i.role&&Object(R.jsx)(h.a.Item,{icon:Object(R.jsx)(m.a,{}),onClick:function(){return P.push("/users_module")},children:"Users Module"},"3"),Object(R.jsx)(h.a.Item,{icon:Object(R.jsx)(x.a,{}),onClick:function(){return P.push("/announcement")},children:"Announcements"},"4"),Object(R.jsx)(h.a.Item,{icon:Object(R.jsx)(x.a,{}),onClick:function(){return P.push("/settings")},children:"Settings"},"5"),Object(R.jsx)(h.a.Item,{icon:Object(R.jsx)(x.a,{}),onClick:function(){return P.push("/completion_status")},children:"Completion Status"},"6")]})]})}):Object(R.jsx)(R.Fragment,{}),Object(R.jsxs)(d.a,{children:[C?Object(R.jsx)(p.a,{message:"Network Error",description:"Please connect to TLR Wifi",type:"error",showIcon:!0,style:{textAlign:"left"}}):Object(R.jsx)(R.Fragment,{}),Object(R.jsx)(A,{children:Object(R.jsx)("div",{className:"content",children:Object(R.jsxs)(l.d,{children:[Object(R.jsx)(M,{path:"/login",component:E}),Object(R.jsx)(M,{path:"/enroll",component:Ne}),Object(R.jsx)(w,{path:"/settings",component:B}),Object(R.jsx)(w,{path:"/announcement",component:L}),Object(R.jsx)(w,{exact:!0,path:["/select_patient","/"],component:z}),Object(R.jsx)(w,{exact:!0,path:["/patient_profile/:bedNo","/"],component:ie}),Object(R.jsx)(w,{exact:!0,path:["/forms/restraints_form/:uuid","/"],component:he}),Object(R.jsx)(w,{exact:!0,path:["/forms/progress_record_form/:uuid","/"],component:ke}),Object(R.jsx)(w,{exact:!0,path:["/residents_module/","/"],component:xe}),Object(R.jsx)(w,{exact:!0,path:["/residents_module/admit","/"],component:fe}),Object(R.jsx)(w,{exact:!0,path:["/users_module","/"],component:Ce}),Object(R.jsx)(w,{exact:!0,path:["/users_module/addUser","/"],component:Re}),Object(R.jsx)(w,{exact:!0,path:["/users_module/reset_password/:username","/"],component:we}),Object(R.jsx)(w,{exact:!0,path:["/completion_status","/"],component:Ae})]})})}),Object(R.jsx)(F,{children:"ePCR"})]})]})]})})},Te=function(e){e&&e instanceof Function&&n.e(6).then(n.bind(null,992)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))};s.a.render(Object(R.jsx)(c.a.StrictMode,{children:Object(R.jsx)(i.a,{children:Object(R.jsx)(Pe,{})})}),document.getElementById("root")),Te()}},[[594,1,2]]]);
//# sourceMappingURL=main.45d37f99.chunk.js.map