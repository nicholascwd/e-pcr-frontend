(this["webpackJsonpepcr-frontend"]=this["webpackJsonpepcr-frontend"]||[]).push([[0],{318:function(e,t,n){},337:function(e,t,n){},344:function(e,t){},346:function(e,t){},356:function(e,t){},358:function(e,t){},385:function(e,t){},387:function(e,t){},388:function(e,t){},393:function(e,t){},395:function(e,t){},401:function(e,t){},403:function(e,t){},422:function(e,t){},434:function(e,t){},437:function(e,t){},543:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(35),s=n.n(r),i=n(115),o=(n(318),n(19)),l=n(32),d=n(550),j=n(134),u=n(70),b=n(307),h=n(81),p=n(561),O=(n(319),n(565)),m=n(566),x=n(567),f=n(21),g=n.n(f),y=(n(337),n(338),n(231)),v=function(){var e=localStorage.getItem("user");return e?JSON.parse(e):null},k=function(){localStorage.getItem("EncryptedSymmmetricKey")||"/enroll"===window.location.pathname||window.open("/enroll","_self");var e=localStorage.getItem("token");return e?(sessionStorage.getItem("AESKEY")||(localStorage.removeItem("token"),localStorage.removeItem("user"),window.open("/login","_self")),e):null},S=function(e){sessionStorage.getItem("AESKEY")||function(e){var t=localStorage.getItem("EncryptedSymmmetricKey"),n=y.AES.decrypt(t,e).toString(y.enc.Utf8);sessionStorage.setItem("AESKEY",n)}(e)},I=function(){localStorage.removeItem("token"),localStorage.removeItem("user")},N=n(28),C=n(182),w=n(1),R=["component"];var _=function(e){var t=e.component,n=Object(C.a)(e,R);return Object(w.jsx)(l.b,Object(N.a)(Object(N.a)({},n),{},{render:function(e){return k()?Object(w.jsx)(t,Object(N.a)({},e)):Object(w.jsx)(l.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},M=["component"];var A=function(e){var t=e.component,n=Object(C.a)(e,M);return Object(w.jsx)(l.b,Object(N.a)(Object(N.a)({},n),{},{render:function(e){return k()?Object(w.jsx)(l.a,{to:{pathname:"/dashboard"}}):Object(w.jsx)(t,Object(N.a)({},e))}}))},T=n(560),D=n(557),P=n(43),F=n(563),V=n(564);var Y=function(e){var t=Object(a.useState)(e),n=Object(o.a)(t,2),c=n[0],r=n[1];return{value:c,onChange:function(e){r(e.target.value)}}},E=function(e){var t=Object(a.useState)(!1),n=Object(o.a)(t,2),c=n[0],r=n[1],s=Y(""),i=Y(""),l=Object(a.useState)(null),d=Object(o.a)(l,2),j=d[0],u=d[1];return Object(w.jsx)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},children:Object(w.jsxs)(T.b,{direction:"vertical",size:"middle",style:{width:"400px"},children:[j?Object(w.jsx)(p.a,{message:"Login Failed",description:j,type:"error",showIcon:!0,style:{textAlign:"left"}}):Object(w.jsx)(w.Fragment,{}),Object(w.jsx)(D.a,Object(N.a)(Object(N.a)({},s),{},{size:"large",placeholder:"Username",prefix:Object(w.jsx)(F.a,{})})),Object(w.jsx)(D.a.Password,Object(N.a)(Object(N.a)({},i),{},{size:"large",placeholder:"Password",prefix:Object(w.jsx)(V.a,{})})),Object(w.jsx)(P.a,{type:"primary",size:"large",shape:"round",onClick:function(){u(null),r(!0),g.a.post("".concat("https://epcr-backend.lentorresidence.com","/users/signin"),{username:s.value,password:i.value}).then((function(e){var t,n;r(!1),t=e.data.token,n=e.data.user,localStorage.setItem("token",t),localStorage.setItem("user",JSON.stringify(n)),S(e.data.key),window.open("/select_patient","_self")})).catch((function(e){r(!1),e.reponse&&401===e.response.status?u(e.response.data.message):u("Something went wrong. Please try again later.")}))},loading:c,style:{width:"100%"},children:c?"Logging In...":"Login"})]})})},J=n(556);var B=function(e){var t=v();return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(J.a,{className:"site-page-header",title:"Settings"}),Object(w.jsxs)("div",{style:{padding:"30px"},children:[Object(w.jsx)(P.a,{type:"primary",onClick:function(){I(),window.open("/login","_self")},children:"Logout"},"console"),Object(w.jsx)("br",{}),Object(w.jsx)("br",{}),Object(w.jsx)(P.a,{type:"primary",onClick:function(){e.history.push("/users_module/reset_password/"+t.username)},children:"Change Password"},"console")]})]})},q=n(555),G=n(548);var z=function(e){var t=q.a.Text,n=Object(a.useState)(),c=Object(o.a)(n,2),r=c[0],s=c[1],i=Object(a.useState)(),l=Object(o.a)(i,2),d=l[0],j=l[1];return Object(a.useEffect)((function(){var t=k();t?(g.a.get("".concat("https://epcr-backend.lentorresidence.com","/users/verifyToken?token=").concat(t)).catch((function(e){I()})),g.a.post("".concat("https://epcr-backend.lentorresidence.com","/residents/listAdmitted"),{},{headers:{token:t}}).then((function(e){var t=e.data;t.map((function(e){e.value=e.bed,e.numeric=parseInt(e.bed.slice(0,-1))})),t.sort((function(e,t){return e.numeric<t.numeric?-1:e.numeric>t.numeric?1:0})),s(t)})).catch((function(e){console.log(e)}))):e.history.push("/login")}),[]),Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(J.a,{className:"site-page-header",title:"Select Patient"}),Object(w.jsx)("div",{style:{padding:"30px"},children:Object(w.jsxs)(T.b,{direction:"vertical",size:"middle",children:[Object(w.jsx)(t,{children:"Input Patient Bed"}),Object(w.jsx)(G.a,{style:{width:200},options:r,placeholder:"Select",onSelect:function(e,t){return function(e,t){j(t.value)}(0,t)},filterOption:function(e,t){return-1!==t.value.indexOf(e)},virtual:!1}),d&&Object(w.jsxs)("div",{children:[Object(w.jsxs)("p",{children:["Selected Bed: ",d]}),Object(w.jsx)(P.a,{type:"primary",onClick:function(){window.open("/patient_profile/".concat(d),"_self")},children:"Submit"})]})]})})]})};var U=function(){return Object(l.g)(),Object(a.useEffect)((function(){var e=k();e&&g.a.get("".concat("https://epcr-backend.lentorresidence.com","/users/verifyToken?token=").concat(e)).then((function(e){console.log(e)})).catch((function(e){I()}))}),[]),Object(w.jsx)("div",{children:Object(w.jsx)(J.a,{className:"site-page-header",title:"Announcements"})})},L=n(552),K=n(562),W=n(221),H=n(33),Q=n.n(H),X=n(231),Z=function(e){var t=sessionStorage.getItem("AESKEY");return X.AES.encrypt(e,t).toString()},$=function(e){var t=sessionStorage.getItem("AESKEY");return X.AES.encrypt(JSON.stringify(e),t).toString()},ee=function(e){var t=sessionStorage.getItem("AESKEY");return X.AES.decrypt(e,t).toString(X.enc.Utf8)},te=function(e){var t=sessionStorage.getItem("AESKEY");return X.AES.decrypt(JSON.parse(e),t).toString(X.enc.Utf8)},ne=n(143),ae=(n(287),[{title:"Date",key:"_id",dataIndex:"formVals",render:function(e){return Object(w.jsx)("p",{children:JSON.parse(e).date})}},{title:"Time",key:"_id",dataIndex:"formVals",render:function(e){return Object(w.jsx)("p",{children:JSON.parse(e).time})}},{title:"Restraints Applied Correctly",key:"_id",dataIndex:"formVals",render:function(e){return Object(w.jsx)("p",{children:JSON.parse(e).r1})}},{title:"Body & Limbs Comfortable",key:"_id",dataIndex:"formVals",render:function(e){return Object(w.jsx)("p",{children:JSON.parse(e).r2})}},{title:"Restrained Limbs",children:[{title:"Adequate Circulation",key:"_id",dataIndex:"formVals",render:function(e){return Object(w.jsx)("p",{children:JSON.parse(e).r3})}},{title:"Adequate ROM",key:"_id",dataIndex:"formVals",render:function(e){return Object(w.jsx)("p",{children:JSON.parse(e).r4})}}]},{title:"Skin Integrity Checked",key:"_id",dataIndex:"formVals",render:function(e){return Object(w.jsx)("p",{children:JSON.parse(e).r5})}},{title:"Type of Restraints",key:"_id",dataIndex:"formVals",render:function(e){return Object(w.jsx)("p",{children:JSON.parse(e)["r-restraints-type"]})}},{title:"Remarks",key:"_id",dataIndex:"formVals",render:function(e){return Object(w.jsx)("p",{children:JSON.parse(e)["r-remarks"]})}},{title:"Staff",key:"_id",dataIndex:"staff"},{title:"Submitted D/T",key:"_id",dataIndex:"creationDate",render:function(e){return Object(w.jsx)("p",{children:Q()(e).format("MMMM Do YYYY, h:mm:ss a")})}}]),ce=[{title:"Date",key:"_id",dataIndex:"formVals",render:function(e){return Object(w.jsx)("p",{children:JSON.parse(e).date})}},{title:"Time",key:"_id",dataIndex:"formVals",render:function(e){return Object(w.jsx)("p",{children:JSON.parse(e).time})}},{title:"General Condition",key:"_id",dataIndex:"formVals",render:function(e){return Object(w.jsx)("p",{children:JSON.parse(e).p1})}},{title:"Mental State",key:"_id",dataIndex:"formVals",render:function(e){return Object(w.jsx)("p",{children:JSON.parse(e).p2})}},{title:"Skin Care",key:"_id",dataIndex:"formVals",render:function(e){return Object(w.jsx)("p",{children:JSON.parse(e).p3})}},{title:"Hygiene/ Bathing",key:"_id",dataIndex:"formVals",render:function(e){return Object(w.jsx)("p",{children:JSON.parse(e).p4})}},{title:"Oral Care",key:"_id",dataIndex:"formVals",render:function(e){return Object(w.jsx)("p",{children:JSON.parse(e).p5})}},{title:"Feeding",key:"_id",dataIndex:"formVals",render:function(e){return Object(w.jsx)("p",{children:JSON.parse(e).p6})}},{title:"Bladder",key:"_id",dataIndex:"formVals",render:function(e){return Object(w.jsx)("p",{children:JSON.parse(e).p7})}},{title:"Bowel",key:"_id",dataIndex:"formVals",render:function(e){return Object(w.jsx)("p",{children:JSON.parse(e).p8})}},{title:"Mobility",key:"_id",dataIndex:"formVals",render:function(e){return Object(w.jsx)("p",{children:JSON.parse(e).p9})}},{title:"Rest at Night",key:"_id",dataIndex:"formVals",render:function(e){return Object(w.jsx)("p",{children:JSON.parse(e).p10})}},{title:"Therapy",key:"_id",dataIndex:"formVals",render:function(e){return Object(w.jsx)("p",{children:JSON.parse(e).p11})}},{title:"Visited",key:"_id",dataIndex:"formVals",render:function(e){return Object(w.jsx)("p",{children:JSON.parse(e).p12})}},{title:"Remarks",key:"_id",dataIndex:"formVals",render:function(e){return Object(w.jsx)("p",{children:JSON.parse(e)["r-remarks"]})}},{title:"Staff",key:"_id",dataIndex:"staff"},{title:"Submitted D/T",key:"_id",dataIndex:"creationDate",render:function(e){return Object(w.jsx)("p",{children:Q()(e).format("MMMM Do YYYY, h:mm:ss a")})}}];var re=function(e){return console.log("props ",e),Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)("h4",{children:["Bed: ",e.patientData.bed,Object(w.jsx)("br",{}),"Name: ",ee(e.patientData.name),Object(w.jsx)("br",{}),"NRIC: ",ee(e.patientData.NRIC),Object(w.jsx)("br",{}),"Profile Creation:"," ",Q()(e.patientData.creationDate).format("MMMM Do YYYY, h:mm:ss a"),Object(w.jsx)("br",{}),"Status: ",e.patientData.status]}),Object(w.jsxs)("p",{children:["Identifier: ",e.patientData.uuid]})]})};n.p;var se=function(e){var t=Object(a.useState)(),n=Object(o.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)(),i=Object(o.a)(s,2),d=i[0],j=i[1],u=Object(a.useState)(),b=Object(o.a)(u,2),h=b[0],p=b[1],O=Object(a.useState)([Q()().add(-2,"days").startOf("day"),Q()().endOf("day")]),m=Object(o.a)(O,2),x=m[0],f=m[1],y=Object(a.useState)(),v=Object(o.a)(y,2),S=v[0],N=v[1],C=L.a.RangePicker,R=Object(l.h)().bedNo,_=k();function M(e,t){return e.timeslot<t.timeslot?1:e.timeslot>t.timeslot?-1:0}function A(e,t){return e.dateTime<t.dateTime?1:e.dateTime>t.dateTime?-1:0}Object(a.useEffect)((function(){_?(g.a.get("".concat("https://epcr-backend.lentorresidence.com","/users/verifyToken?token=").concat(_)).then((function(e){})).catch((function(e){I()})),g.a.post("".concat("https://epcr-backend.lentorresidence.com","/residents/getByBed"),{bed:R},{headers:{token:_}}).then((function(e){r(e.data[0])})).catch((function(e){console.log(e),j(e.response.data.error)}))):e.history.push("/login")}),[]),Object(a.useEffect)((function(){c&&(g.a.post("".concat("https://epcr-backend.lentorresidence.com","/forms/restraintsForm/submissionHistory"),{uuid:c.uuid,restraintsDatePicker:x},{headers:{token:_}}).then((function(e){var t=e.data;t.map((function(e){e.formVals=te(e.formData),e.timeslot=parseInt(e.timeslot)})),t.sort(M),t.sort(A),p(t)})).catch((function(e){console.log(e)})),g.a.post("".concat("https://epcr-backend.lentorresidence.com","/forms/progressRecordForm/submissionHistory"),{uuid:c.uuid,restraintsDatePicker:x},{headers:{token:_}}).then((function(e){var t=e.data;t.map((function(e){e.formVals=te(e.formData)}));var n=["ND","AM","PM"];t.sort((function(e,t){return n.indexOf(t.timeslot)-n.indexOf(e.timeslot)})),t.sort(A),N(t)})).catch((function(e){console.log(e)})))}),[c,x]);var D=window.matchMedia("(max-width: 600px)").matches;return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(P.a,{style:{margin:"10px"},onClick:function(){e.history.push("/select_patient")},type:"default",children:"Back to patient selector"}),Object(w.jsx)(J.a,{className:"site-page-header",title:"Patient Profile"}),Object(w.jsx)("div",{style:{padding:"30px"},children:Object(w.jsxs)(T.b,{direction:"vertical",size:"middle",children:[c&&Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(re,{patientData:c}),Object(w.jsx)("br",{}),Object(w.jsx)(P.a,{type:"primary",onClick:function(){e.history.push("/forms/restraints_form/".concat(c.uuid))},children:"Submit Restraints Form"}),Object(w.jsx)(P.a,{type:"primary",onClick:function(){e.history.push("/forms/progress_record_form/".concat(c.uuid))},children:"Submit Progress Record Form"}),Object(w.jsx)("br",{}),Object(w.jsx)("h4",{children:"Monitoring Toggle"}),Object(w.jsx)("p",{children:"Restraints Monitoring:"}),Object(w.jsx)(K.a,{defaultChecked:c.restraintsMonitoring,onChange:function(e){g.a.post("".concat("https://epcr-backend.lentorresidence.com","/residents/setRestraintsMonitoringStatus"),{uuid:c.uuid,monitor:e},{headers:{token:_}}).catch((function(e){console.log(e)}))}}),"Progress Record Monitoring:",Object(w.jsx)(K.a,{defaultChecked:c.progressRecordMonitoring,onChange:function(e){g.a.post("".concat("https://epcr-backend.lentorresidence.com","/residents/setProgressRecordMonitoringStatus"),{uuid:c.uuid,monitor:e},{headers:{token:_}}).catch((function(e){console.log(e)}))}}),Object(w.jsx)("br",{}),Object(w.jsxs)(T.b,{direction:"vertical",size:12,children:[Object(w.jsx)("span",{children:"Select Date for Reports below"}),Object(w.jsx)(C,{defaultValue:[Q()().add(-2,"days").startOf("day"),Q()().startOf("day")],onChange:function(e){var t=e[1];t=Q()(t).endOf("day"),f([e[0],t])}})]}),Object(w.jsx)("h3",{children:"Restraints Form submission history"}),Object(w.jsx)(P.a,{style:{margin:"10px"},onClick:function(){!function(e,t){var n=new ne.default("landscape");n.text("Restraints Report",5,15),n.setFontSize(10),n.text("Resident Name: "+ee(e.name),5,30),n.text("Resident NRIC: "+ee(e.NRIC),5,35),n.text("Report Generated: "+Q()().toDate(),5,40);for(var a=[],c=0;c<t.length;c++){var r=[];console.log(JSON.parse(t[c].formVals).time),r.push(JSON.parse(t[c].formVals).date),r.push(JSON.parse(t[c].formVals).time),r.push(JSON.parse(t[c].formVals).r1),r.push(JSON.parse(t[c].formVals).r2),r.push(JSON.parse(t[c].formVals).r3),r.push(JSON.parse(t[c].formVals).r4),r.push(JSON.parse(t[c].formVals).r5),r.push(JSON.parse(t[c].formVals)["r-restraints-type"]),r.push(JSON.parse(t[c].formVals)["r-remarks"]),r.push(t[c].staff),a.push(r)}n.autoTable({theme:"grid",startY:50,head:[["Date","Time","Restraints Applied Correctly","Body & Limbs in Comfortable Position","Adequate Circulation (Restrained Limbs)","Adequate ROM (Restrained Limbs)","Skin Integrity Checked","Restraints Type","Remarks","Staff Signature"]],body:a}),n.save("table.pdf")}(c,h)},type:"default",children:"Export Restraints Data"}),Object(w.jsx)("div",{className:"pcf",children:Object(w.jsx)(W.a,{style:{width:D?400:1100},scroll:{x:300},columns:ae,className:"table",data:h})}),Object(w.jsx)("h3",{children:"Progress Record Form submission history"}),Object(w.jsx)(P.a,{style:{margin:"10px"},onClick:function(){!function(e,t){var n=new ne.default("landscape");n.text("Progress Record Report",5,15),n.setFontSize(10),n.text("Resident Name: "+ee(e.name),5,30),n.text("Resident NRIC: "+ee(e.NRIC),5,35),n.text("Report Generated: "+Q()().toDate(),5,40),n.setFontSize(7);for(var a=[],c=0;c<t.length;c++){var r=[];console.log(JSON.parse(t[c].formVals)),r.push(JSON.parse(t[c].formVals).date),r.push(JSON.parse(t[c].formVals).time),r.push(JSON.parse(t[c].formVals).p1),r.push(JSON.parse(t[c].formVals).p2),r.push(JSON.parse(t[c].formVals).p3),r.push(JSON.parse(t[c].formVals).p4),r.push(JSON.parse(t[c].formVals).p5),r.push(JSON.parse(t[c].formVals).p6),r.push(JSON.parse(t[c].formVals).p7),r.push(JSON.parse(t[c].formVals).p8),r.push(JSON.parse(t[c].formVals).p9),r.push(JSON.parse(t[c].formVals).p10),r.push(JSON.parse(t[c].formVals).p11),r.push(JSON.parse(t[c].formVals).p12),r.push(JSON.parse(t[c].formVals)["r-remarks"]),r.push(t[c].staff),a.push(r)}n.autoTable({theme:"grid",startY:50,styles:{fontSize:7},head:[["Date","Time","General Condition","Mental State\t","Skin Care","Hygiene/Bathing","Oral Care","Feeding","Bladder","Bowel","Mobility","Rest at Night","Therapy","Visited","Remarks","Staff Signature"]],body:a}),n.save("table.pdf")}(c,S)},type:"default",children:"Export Progress Record Data"}),Object(w.jsx)("div",{className:"pcf",children:Object(w.jsx)(W.a,{style:{width:D?400:1100},scroll:{x:300},columns:ce,data:S,className:"table"})})]}),d&&Object(w.jsx)("p",{children:d})]})})]})},ie=n(86),oe=n(554),le=n(180),de=n(559),je=ie.a.Option,ue={labelCol:{span:30,offset:0},wrapperCol:{span:50}};var be=function(e){var t=Object(a.useState)(),n=Object(o.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)(),i=Object(o.a)(s,2),d=i[0],j=i[1],u=Object(a.useState)(),b=Object(o.a)(u,2),h=b[0],p=b[1],O=Object(a.useState)(!1),m=Object(o.a)(O,2),x=m[0],f=m[1],y=Object(l.h)().uuid,S=k();function C(){e.history.push("/patient_profile/"+c.bed,"_self")}return Object(a.useEffect)((function(){S?(g.a.get("".concat("https://epcr-backend.lentorresidence.com","/users/verifyToken?token=").concat(S)).then((function(e){p(v().username)})).catch((function(e){I()})),g.a.post("".concat("https://epcr-backend.lentorresidence.com","/residents/getByUUID"),{uuid:y},{headers:{token:S}}).then((function(e){r(e.data[0])})).catch((function(e){console.log(e.response.data.error),j(e.response.data.error)}))):e.history.push("/login")}),[]),Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(P.a,{style:{margin:"10px"},onClick:C,type:"default",children:"Back to patient profile"}),Object(w.jsx)(J.a,{className:"site-page-header",title:"Restraints Form"}),Object(w.jsx)("div",{style:{padding:"30px"},children:Object(w.jsxs)(T.b,{direction:"vertical",size:"middle",children:[c&&h&&!x&&Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(re,{patientData:c}),Object(w.jsxs)(oe.a,Object(N.a)(Object(N.a)({name:"validate_other"},ue),{},{onFinish:function(e){if(e.time){var t=Q()(e.date).startOf("day");e.date=e.date.format("YYYY-MM-DD"),console.log("Received values of form: ",JSON.stringify(e)),g.a.post("".concat("https://epcr-backend.lentorresidence.com","/forms/restraintsForm/submit"),{resident:y,formData:$(e),bed:c.bed,dateTime:t,timeslot:e.time},{headers:{token:S}}).then((function(e){f(!0)})).catch((function(e){console.log(e.response.data.error),j(e.response.data.error)}))}else alert("Time is missing")},children:[Object(w.jsx)(oe.a.Item,{name:"date",label:"Date",required:!0,children:Object(w.jsx)(L.a,{})}),Object(w.jsx)(oe.a.Item,{name:"time",label:"Time",required:!0,children:Object(w.jsxs)(ie.a,{placeholder:"Select time of check",virtual:!1,children:[Object(w.jsx)(je,{value:"0000",children:"12am midnight"}),Object(w.jsx)(je,{value:"0200",children:"2am"}),Object(w.jsx)(je,{value:"0400",children:"4am"}),Object(w.jsx)(je,{value:"0600",children:"6am"}),Object(w.jsx)(je,{value:"0800",children:"8am"}),Object(w.jsx)(je,{value:"1000",children:"10am"}),Object(w.jsx)(je,{value:"1200",children:"12pm noon"}),Object(w.jsx)(je,{value:"1400",children:"2pm"}),Object(w.jsx)(je,{value:"1600",children:"4pm"}),Object(w.jsx)(je,{value:"1800",children:"6pm"}),Object(w.jsx)(je,{value:"2000",children:"8pm"}),Object(w.jsx)(je,{value:"2200",children:"10pm"})]})}),Object(w.jsx)(oe.a.Item,{name:"r1",label:"Restraints applied correctly",children:Object(w.jsxs)(le.a.Group,{children:[Object(w.jsx)(le.a,{value:"Y",children:"Yes"}),Object(w.jsx)(le.a,{value:"N",children:"No"}),Object(w.jsx)(le.a,{value:"",children:"NA"})]})}),Object(w.jsx)(oe.a.Item,{name:"r2",label:"Body & limbs in comfortable position",children:Object(w.jsxs)(le.a.Group,{children:[Object(w.jsx)(le.a,{value:"Y",children:"Yes"}),Object(w.jsx)(le.a,{value:"N",children:"No"}),Object(w.jsx)(le.a,{value:"",children:"NA"})]})}),Object(w.jsx)(oe.a.Item,{name:"r3",label:"(Restrained Extremities) Adequate circulation",children:Object(w.jsxs)(le.a.Group,{children:[Object(w.jsx)(le.a,{value:"Y",children:"Yes"}),Object(w.jsx)(le.a,{value:"N",children:"No"}),Object(w.jsx)(le.a,{value:"",children:"NA"})]})}),Object(w.jsx)(oe.a.Item,{name:"r4",label:"(Restrained Extremities) Adequate ROM",children:Object(w.jsxs)(le.a.Group,{children:[Object(w.jsx)(le.a,{value:"Y",children:"Yes"}),Object(w.jsx)(le.a,{value:"N",children:"No"}),Object(w.jsx)(le.a,{value:"",children:"NA"})]})}),Object(w.jsx)(oe.a.Item,{name:"r5",label:"Skin integrity checked",children:Object(w.jsxs)(le.a.Group,{children:[Object(w.jsx)(le.a,{value:"Y",children:"Yes"}),Object(w.jsx)(le.a,{value:"N",children:"No"}),Object(w.jsx)(le.a,{value:"",children:"NA"})]})}),Object(w.jsx)(oe.a.Item,{name:"r-restraints-type",label:"Type of Restraints",children:Object(w.jsx)(D.a,{})}),Object(w.jsx)(oe.a.Item,{name:"r-remarks",label:"Remarks",children:Object(w.jsx)(D.a,{})}),Object(w.jsx)(oe.a.Item,{name:"staff",label:"Submitted by",children:Object(w.jsx)("span",{className:"ant-form-text",children:h})}),Object(w.jsx)(oe.a.Item,{children:Object(w.jsx)(P.a,{type:"primary",htmlType:"submit",children:"Submit"})})]}))]}),x&&Object(w.jsx)(de.a,{status:"success",title:"Success!",subTitle:"You may view the submitted data on patient profile page",extra:[Object(w.jsx)(P.a,{type:"primary",onClick:function(){e.history.push("/select_patient/","_self")},children:"Select new patient"},"console"),Object(w.jsx)(P.a,{onClick:C,children:"Submit new form for same patient"},"buy")]}),d&&Object(w.jsx)("p",{children:d})]})})]})},he=n(549),pe=n(551),Oe=n(558);var me=function(e){q.a.Text,q.a.Link;var t=Object(a.useState)({username:null}),n=Object(o.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)(),i=Object(o.a)(s,2),l=i[0],d=i[1],j=Object(a.useState)(),u=Object(o.a)(j,2),b=u[0],h=u[1],O=Object(a.useState)(),m=Object(o.a)(O,2),x=m[0],f=m[1],y=Object(a.useState)(),S=Object(o.a)(y,2),N=S[0],C=S[1],R=Object(a.useState)(),_=Object(o.a)(R,2),M=_[0],A=_[1],F=k(),V=v();function Y(){g.a.post("".concat("https://epcr-backend.lentorresidence.com","/residents/listAdmittedFullDetails"),{},{headers:{token:F}}).then((function(e){var t=e.data;t.map((function(e){e.name=ee(e.name),e.NRIC=ee(e.NRIC),e.numeric=parseInt(e.bed)})),t.sort((function(e,t){return e.numeric<t.numeric?-1:e.numeric>t.numeric?1:0})),d(t)})).catch((function(e){console.log(e)}))}function E(){g.a.post("".concat("https://epcr-backend.lentorresidence.com","/residents/listDischargedFullDetails"),{},{headers:{token:F}}).then((function(e){var t=e.data;t.map((function(e){e.name=ee(e.name),e.NRIC=ee(e.NRIC)})),h(t)})).catch((function(e){console.log(e)}))}Object(a.useEffect)((function(){F?(g.a.get("".concat("https://epcr-backend.lentorresidence.com","/users/verifyToken?token=").concat(F)).then((function(e){r(V)})).catch((function(e){I()})),Y(),E()):e.history.push("/login")}),[]);var B=Object(a.useState)(!1),G=Object(o.a)(B,2),z=G[0],U=G[1];function L(e){}var W=[{title:"Name",key:"_id",dataIndex:"name"},{title:"NRIC",key:"_id",dataIndex:"NRIC"},{title:"Bed",key:"_id",dataIndex:"bed"},{title:"Initial admission",key:"_id",dataIndex:"creationDate",render:function(e){return Object(w.jsx)("p",{children:Q()(e).format("MMMM Do YYYY, h:mm:ss a")})}},{title:"Action",key:"action",width:100,render:function(t){return Object(w.jsxs)(T.b,{size:"middle",children:[Object(w.jsx)("a",{onClick:function(){e.history.push("/patient_profile/"+t.bed)},children:"View Patient"}),Object(w.jsx)(he.a,{title:"Are you sure to discharge this patient?",onConfirm:function(){return e=t.uuid,void g.a.post("".concat("https://epcr-backend.lentorresidence.com","/residents/discharge"),{uuid:e},{headers:{token:F}}).then((function(e){Y(),E()})).catch((function(e){console.log(e.error)}));var e},onCancel:"",okText:"Yes",cancelText:"No",children:Object(w.jsx)("a",{href:"#",children:"Discharge"})}),Object(w.jsx)(K.a,{checked:t.restraintsMonitoring,onChange:function(){console.log(t.restraintsMonitoring),function(e){var t;e.restraintsMonitoring?(t=!1,console.log("turn off")):(t=!0,console.log("turn on")),g.a.post("".concat("https://epcr-backend.lentorresidence.com","/residents/setRestraintsMonitoringStatus"),{uuid:e.uuid,monitor:t},{headers:{token:F}}).then((function(e){Y(),E()})).catch((function(e){console.log(e.error)}))}(t)},checkedChildren:"R",unCheckedChildren:"R"})," ",Object(w.jsx)(K.a,{checked:t.progressRecordMonitoring,onChange:function(){!function(e){var t;e.progressRecordMonitoring?(t=!1,console.log("turn off")):(t=!0,console.log("turn on")),g.a.post("".concat("https://epcr-backend.lentorresidence.com","/residents/setProgressRecordMonitoringStatus"),{uuid:e.uuid,monitor:t},{headers:{token:F}}).then((function(e){Y(),E()})).catch((function(e){console.log(e.error)}))}(t)},checkedChildren:"P",unCheckedChildren:"P"})]})}}],H=[{title:"Name",key:"_id",dataIndex:"name"},{title:"NRIC",key:"_id",dataIndex:"NRIC"},{title:"Bed",key:"_id",dataIndex:"bed"},{title:"Initial admission",key:"_id",dataIndex:"creationDate",render:function(e){return Object(w.jsx)("p",{children:Q()(e).format("MMMM Do YYYY, h:mm:ss a")})}},{title:"Action",key:"action",width:100,render:function(t){return Object(w.jsx)(T.b,{size:"middle",children:Object(w.jsx)("a",{onClick:function(){e.history.push("/patient_profile/"+t.bed)},children:"View Patient"})})}}],X=[{title:"Name",key:"_id",dataIndex:"name"},{title:"NRIC",key:"_id",dataIndex:"NRIC"},{title:"Initial admission",key:"_id",dataIndex:"creationDate",render:function(e){return Object(w.jsx)("p",{children:Q()(e).format("MMMM Do YYYY, h:mm:ss a")})}},{title:"Action",key:"action",width:100,render:function(t){return Object(w.jsxs)(T.b,{size:"middle",children:[Object(w.jsx)("a",{onClick:function(){e.history.push("/patient_profile/"+t.uuid)},children:"View Patient"}),Object(w.jsx)(P.a,{type:"secondary",onClick:function(){var e;C({uuid:(e=t).uuid,name:e.name}),A(null),U(!0)},children:"Re-admit"})]})}}];return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(J.a,{className:"site-page-header",title:"Residents Module"}),Object(w.jsxs)("div",{style:{padding:"30px"},children:[Object(w.jsxs)(T.b,{direction:"vertical",size:"middle",children:["full"==c.role&&Object(w.jsx)(P.a,{onClick:function(){e.history.push("/residents_module/admit")},children:"Admit New Patient"}),Object(w.jsx)("h3",{children:"Table of Admitted Patients"}),"full"==c.role&&Object(w.jsx)(pe.a,{columns:W,dataSource:l,onChange:L}),"restricted"==c.role&&Object(w.jsx)(pe.a,{columns:H,dataSource:l,onChange:L}),Object(w.jsx)("br",{}),"full"==c.role&&Object(w.jsxs)("div",{children:[Object(w.jsx)("h3",{children:"Table of Discharged Patients"}),Object(w.jsx)(pe.a,{columns:X,dataSource:b,onChange:L})]})]}),Object(w.jsxs)(Oe.a,{title:"Readmit Resident",visible:z,onOk:function(){g.a.post("".concat("https://epcr-backend.lentorresidence.com","/residents/readmit"),{uuid:N.uuid,bed:x},{headers:{token:F}}).then((function(e){Y(),E(),U(!1)})).catch((function(e){e.response.data.error&&A(e.response.data.error)}))},onCancel:function(){U(!1)},children:[N&&Object(w.jsx)("p",{children:N.name}),Object(w.jsx)(D.a,{name:"readmitNewBed",addonBefore:"Bed",onChange:function(e){f(e.target.value)}}),M&&Object(w.jsx)(p.a,{message:M,type:"error"})]})]})]})};var xe=function(e){var t=k(),n=Object(a.useState)(!1),c=Object(o.a)(n,2),r=c[0],s=c[1],i=Object(a.useState)(),l=Object(o.a)(i,2),d=l[0],j=l[1];function u(){e.history.push("/residents_module")}return Object(a.useEffect)((function(){t?g.a.get("".concat("https://epcr-backend.lentorresidence.com","/users/verifyToken?token=").concat(t)).catch((function(e){I()})):e.history.push("/login")}),[]),Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(P.a,{style:{margin:"10px"},onClick:u,type:"default",children:"Back"}),Object(w.jsx)(J.a,{className:"site-page-header",title:"Admit Patient"}),Object(w.jsx)("div",{style:{padding:"30px"},children:Object(w.jsxs)(T.b,{direction:"vertical",size:"middle",children:[d&&Object(w.jsx)(w.Fragment,{children:Object(w.jsx)(p.a,{message:"Error",description:d,type:"error",showIcon:!0})}),!r&&Object(w.jsx)("div",{children:Object(w.jsxs)(oe.a,Object(N.a)(Object(N.a)({name:"validate_other"},{labelCol:{span:30,offset:0},wrapperCol:{span:50}}),{},{onFinish:function(e){console.log("Received values of form: ",e),g.a.post("".concat("https://epcr-backend.lentorresidence.com","/residents/admit"),{bed:e.bed.toUpperCase(),name:Z(e.name.toUpperCase()),NRIC:Z(e.NRIC.toUpperCase())},{headers:{token:t}}).then((function(e){s(!0),j(null)})).catch((function(e){console.log(e.response.data.error),j(e.response.data.error)}))},children:[Object(w.jsx)(oe.a.Item,{name:"name",label:"Resident Name",required:!0,children:Object(w.jsx)(D.a,{required:!0})}),Object(w.jsx)(oe.a.Item,{name:"NRIC",label:"NRIC",required:!0,children:Object(w.jsx)(D.a,{required:!0})}),Object(w.jsx)(oe.a.Item,{name:"bed",label:"Resident Bed",required:!0,children:Object(w.jsx)(D.a,{required:!0})}),Object(w.jsx)(oe.a.Item,{children:Object(w.jsx)(P.a,{type:"primary",htmlType:"submit",children:"Submit"})})]}))}),r&&Object(w.jsx)(de.a,{status:"success",title:"Success!",subTitle:"Patient Admitted",extra:[Object(w.jsx)(P.a,{type:"primary",onClick:u,children:"Back"},"console")]})]})})]})},fe=n(150),ge=ie.a.Option,ye={labelCol:{span:30,offset:0},wrapperCol:{span:50}};var ve=function(e){var t=Object(a.useState)(),n=Object(o.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)(),i=Object(o.a)(s,2),d=i[0],j=i[1],u=Object(a.useState)(),b=Object(o.a)(u,2),h=b[0],p=b[1],O=Object(a.useState)(!1),m=Object(o.a)(O,2),x=m[0],f=m[1],y=Object(l.h)().uuid,S=k();function C(){e.history.push("/patient_profile/"+c.bed,"_self")}return Object(a.useEffect)((function(){S?(g.a.get("".concat("https://epcr-backend.lentorresidence.com","/users/verifyToken?token=").concat(S)).then((function(e){p(v().username)})).catch((function(e){I()})),g.a.post("".concat("https://epcr-backend.lentorresidence.com","/residents/getByUUID"),{uuid:y},{headers:{token:S}}).then((function(e){r(e.data[0])})).catch((function(e){console.log(e)}))):e.history.push("/login")}),[]),Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(P.a,{style:{margin:"10px"},onClick:C,type:"default",children:"Back to patient profile"}),Object(w.jsx)(J.a,{className:"site-page-header",title:"Progress Record Form"}),Object(w.jsx)("div",{style:{padding:"30px"},children:Object(w.jsxs)(T.b,{direction:"vertical",size:"middle",children:[c&&h&&!x&&Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(re,{patientData:c}),Object(w.jsxs)(oe.a,Object(N.a)(Object(N.a)({name:"validate_other"},ye),{},{onFinish:function(e){if(e.time){var t=Q()(e.date).startOf("day");e.date=e.date.format("YYYY-MM-DD"),console.log("Received values of form: ",e),g.a.post("".concat("https://epcr-backend.lentorresidence.com","/forms/progressRecordForm/submit"),{resident:y,formData:$(e),dateTime:t,timeslot:e.time,bed:c.bed},{headers:{token:S}}).then((function(e){f(!0)})).catch((function(e){console.log(e.response.data.error),j(e.response.data.error)}))}else alert("Time is missing")},initialValues:{},children:[Object(w.jsx)(oe.a.Item,{name:"date",label:"Date",required:!0,children:Object(w.jsx)(L.a,{})}),Object(w.jsx)(oe.a.Item,{name:"time",label:"Time",required:!0,children:Object(w.jsxs)(ie.a,{placeholder:"Select time of check",virtual:!1,children:[Object(w.jsx)(ge,{value:"ND",children:"ND"}),Object(w.jsx)(ge,{value:"AM",children:"AM"}),Object(w.jsx)(ge,{value:"PM",children:"PM"})]})}),Object(w.jsx)(oe.a.Item,{name:"p1",label:"General Condition",children:Object(w.jsxs)(le.a.Group,{children:[Object(w.jsx)(le.a,{value:"Satisfactory",children:"Satisfactory"}),Object(w.jsx)(le.a,{value:"Unwell",children:"Unwell"}),Object(w.jsx)(le.a,{value:"Poor",children:"Poor"}),Object(w.jsx)(le.a,{value:"",children:"NA"})]})}),Object(w.jsx)(oe.a.Item,{name:"p2",label:"Mental State",children:Object(w.jsxs)(le.a.Group,{children:[Object(w.jsx)(le.a,{value:"Oriented",children:"Oriented"}),Object(w.jsx)(le.a,{value:"Confused",children:"Confused"}),Object(w.jsx)(le.a,{value:"Behavioural Problem",children:"Behavioural Problem"}),Object(w.jsx)(le.a,{value:"Uncommunicative",children:"Uncommunicative"}),Object(w.jsx)(le.a,{value:"",children:"NA"})]})}),Object(w.jsx)(oe.a.Item,{name:"p3",label:"Skin Care",children:Object(w.jsxs)(le.a.Group,{children:[Object(w.jsx)(le.a,{value:"Intact",children:"Intact"}),Object(w.jsx)(le.a,{value:"Impaired/Rashes",children:"Impaired/Rashes"}),Object(w.jsx)(le.a,{value:"Wound Care",children:"Wound Care"}),Object(w.jsx)(le.a,{value:"",children:"NA"})]})}),Object(w.jsx)(oe.a.Item,{name:"p4",label:"Hygiene/Bathing",children:Object(w.jsxs)(le.a.Group,{children:[Object(w.jsx)(le.a,{value:"Self",children:"Self"}),Object(w.jsx)(le.a,{value:"Assisted Bath",children:"Assisted Bath"}),Object(w.jsx)(le.a,{value:"Bed Bath",children:"Bed Bath"}),Object(w.jsx)(le.a,{value:"",children:"NA"})]})}),Object(w.jsx)(oe.a.Item,{name:"p5",label:"Oral Care",children:Object(w.jsxs)(le.a.Group,{children:[Object(w.jsx)(le.a,{value:"Self",children:"Self"}),Object(w.jsx)(le.a,{value:"Assisted",children:"Assisted"}),Object(w.jsx)(le.a,{value:"Totally Dependent",children:"Totally Dependent"}),Object(w.jsx)(le.a,{value:"",children:"NA"})]})}),Object(w.jsx)(oe.a.Item,{name:"p6",label:"Feeding",children:Object(w.jsxs)(le.a.Group,{children:[Object(w.jsx)(le.a,{value:"Self",children:"Self"}),Object(w.jsx)(le.a,{value:"Assisted",children:"Assisted"}),Object(w.jsx)(le.a,{value:"NGT/PEG",children:"NGT/PEG"}),Object(w.jsx)(le.a,{value:"",children:"NA"})]})}),Object(w.jsx)(oe.a.Item,{name:"p7",label:"Bladder",children:Object(w.jsxs)(fe.a.Group,{children:[Object(w.jsx)(fe.a,{value:"Continent",children:"Continent"}),Object(w.jsx)(fe.a,{value:"Incontinent(Diaper)",children:"Incontinent(Diaper)"}),Object(w.jsx)(fe.a,{value:"IDC/IMC/SPC",children:"IDC/IMC/SPC"})]})}),Object(w.jsx)(oe.a.Item,{name:"p8",label:"Bowel",children:Object(w.jsxs)(fe.a.Group,{children:[Object(w.jsx)(fe.a,{value:"Bowel Opened ",children:"Bowel Opened"}),Object(w.jsx)(fe.a,{value:"Bowel Not Opened",children:"Bowel Not Opened"}),Object(w.jsx)(fe.a,{value:"Continent ",children:"Continent"}),Object(w.jsx)(fe.a,{value:"Incontinent (Diaper) ",children:"Incontinent (Diaper)"}),Object(w.jsx)(fe.a,{value:"Colostomy Care ",children:"Colostomy Care"})]})}),Object(w.jsx)(oe.a.Item,{name:"p9",label:"Mobility",children:Object(w.jsxs)(fe.a.Group,{children:[Object(w.jsx)(fe.a,{value:"Ambulant",children:"Ambulant"}),Object(w.jsx)(fe.a,{value:"Requires Wheelchair",children:"Requires Wheelchair"}),Object(w.jsx)(fe.a,{value:"Requires Walking Aides",children:"Requires Walking Aides"}),Object(w.jsx)(fe.a,{value:"Requires 2hrly Turning",children:"Requires 2hrly Turning"})]})}),Object(w.jsx)(oe.a.Item,{name:"p10",label:"Rest During Night",children:Object(w.jsxs)(le.a.Group,{children:[Object(w.jsx)(le.a,{value:"Good",children:"Good"}),Object(w.jsx)(le.a,{value:"Restless/Interrupted",children:"Restless/Interrupted"}),Object(w.jsx)(le.a,{value:"",children:"NA"})]})}),Object(w.jsx)(oe.a.Item,{name:"p11",label:"Therapy",children:Object(w.jsxs)(le.a.Group,{children:[Object(w.jsx)(le.a,{value:"Active Exercise",children:"Active Exercise"}),Object(w.jsx)(le.a,{value:"Passive Exercise",children:"Passive Exercise"}),Object(w.jsx)(le.a,{value:"",children:"NA"})]})}),Object(w.jsx)(oe.a.Item,{name:"p12",label:"Visited by Relatives/Friend",children:Object(w.jsxs)(le.a.Group,{children:[Object(w.jsx)(le.a,{value:"Yes",children:"Yes"}),Object(w.jsx)(le.a,{value:"No",children:"No"}),Object(w.jsx)(le.a,{value:"",children:"NA"})]})}),Object(w.jsx)(oe.a.Item,{name:"r-remarks",label:"Remarks",children:Object(w.jsx)(D.a,{})}),Object(w.jsx)(oe.a.Item,{name:"staff",label:"Submitted by",children:Object(w.jsx)("span",{className:"ant-form-text",children:h})}),Object(w.jsx)(oe.a.Item,{children:Object(w.jsx)(P.a,{type:"primary",htmlType:"submit",children:"Submit"})})]}))]}),x&&Object(w.jsx)(de.a,{status:"success",title:"Success!",subTitle:"You may view the submitted data on patient profile page",extra:[Object(w.jsx)(P.a,{type:"primary",onClick:function(){e.history.push("/select_patient/","_self")},children:"Select new patient"},"console"),Object(w.jsx)(P.a,{onClick:C,children:"Submit new form for same patient"},"buy")]}),d&&Object(w.jsx)("p",{children:d})]})})]})};var ke=function(e){var t=Object(a.useState)(e),n=Object(o.a)(t,2),c=n[0],r=n[1];return{value:c,onChange:function(e){r(e.target.value)}}},Se=function(e){var t=Object(a.useState)(!1),n=Object(o.a)(t,2),c=n[0],r=n[1],s=ke(""),i=Object(a.useState)(null),l=Object(o.a)(i,2),d=l[0],j=l[1];return Object(a.useEffect)((function(){k()||"/login"===window.location.pathname||"/enroll"===window.location.pathname||window.open("/login","_self")}),[]),Object(w.jsx)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},children:Object(w.jsxs)(T.b,{direction:"vertical",size:"middle",style:{width:"400px"},children:[d?Object(w.jsx)(p.a,{message:"Login Failed",description:d,type:"error",showIcon:!0,style:{textAlign:"left"}}):Object(w.jsx)(w.Fragment,{}),Object(w.jsx)("h4",{children:"Enrollment Secret"}),Object(w.jsx)("p",{children:"Contact admin to assist with keying in enrollment secret"}),Object(w.jsx)(D.a,Object(N.a)(Object(N.a)({},s),{},{size:"large",placeholder:"Enrollment Secret",type:"password",prefix:Object(w.jsx)(F.a,{})})),Object(w.jsx)(P.a,{type:"primary",size:"large",shape:"round",onClick:function(){j(null),r(!0),g.a.get("".concat("https://go.lentorresidence.com","/").concat(s.value),{timeout:1e3}).then((function(e){console.log(e.data),localStorage.setItem("EncryptedSymmmetricKey",e.data),window.open("/login","_self")})).catch((function(e){r(!1),e.reponse&&401===e.response.status?j(e.response.data.message):j("Enrollment Key Invalid. Please try again.")}))},loading:c,style:{width:"100%"},children:c?"Logging In...":"Login"})]})})};var Ie=function(e){var t=Object(a.useState)(),n=Object(o.a)(t,2),c=n[0],r=n[1];Object(a.useEffect)((function(){var t=k();t?(g.a.get("".concat("https://epcr-backend.lentorresidence.com","/users/verifyToken?token=").concat(t)).then((function(e){})).catch((function(e){I()})),g.a.post("".concat("https://epcr-backend.lentorresidence.com","/users/listStaff"),{},{headers:{token:t}}).then((function(e){r(e.data)})).catch((function(e){console.log(e)}))):e.history.push("/login")}),[]);var s=[{title:"Username",key:"_id",dataIndex:"username"},{title:"Email",key:"_id",dataIndex:"email"},{title:"Role",key:"_id",dataIndex:"role"},{title:"Date Created",key:"_id",dataIndex:"creationDate",render:function(e){return Object(w.jsx)("p",{children:Q()(e).format("MMMM Do YYYY, h:mm:ss a")})}},{title:"Action",key:"action",width:100,render:function(t){return Object(w.jsx)(T.b,{size:"middle",children:Object(w.jsx)("a",{onClick:function(){e.history.push("/users_module/reset_password/"+t.username)},children:"Reset Password"})})}}];return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(J.a,{className:"site-page-header",title:"User Management Module"}),Object(w.jsx)("div",{style:{padding:"30px"},children:Object(w.jsxs)(T.b,{direction:"vertical",size:"middle",children:[Object(w.jsx)(P.a,{onClick:function(){e.history.push("/users_module/addUser")},children:"Add new Staff"}),Object(w.jsx)("h3",{children:"Registed Staff List"}),Object(w.jsx)(pe.a,{columns:s,dataSource:c,onChange:function(e){console.log("params",e)}})]})})]})},Ne=n(297);Ne.config({allowPassphrases:!1,maxLength:128,minLength:10,minPhraseLength:20,minOptionalTestsToPass:7});var Ce=function(e){var t=k(),n=Object(a.useState)(!1),c=Object(o.a)(n,2),r=c[0],s=c[1],i=Object(a.useState)(),l=Object(o.a)(i,2),d=l[0],j=l[1],u=Object(a.useState)(),b=Object(o.a)(u,2),h=b[0],O=b[1],m=function(e){var t=Object(a.useState)(e),n=Object(o.a)(t,2),c=n[0],r=n[1];return{value:c,onChange:function(e){r(e.target.value);var t=Ne.test(e.target.value);O(t.requiredTestErrors)}}}("");function x(){e.history.push("/users_module")}return Object(a.useEffect)((function(){t?g.a.get("".concat("https://epcr-backend.lentorresidence.com","/users/verifyToken?token=").concat(t)).then((function(e){})).catch((function(e){I()})):e.history.push("/login")}),[]),Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(P.a,{style:{margin:"10px"},onClick:x,type:"default",children:"Back"}),Object(w.jsx)(J.a,{className:"site-page-header",title:"Add Staff User"}),Object(w.jsx)("div",{style:{padding:"30px"},children:Object(w.jsxs)(T.b,{direction:"vertical",size:"middle",children:[d&&Object(w.jsx)(w.Fragment,{children:Object(w.jsx)(p.a,{message:"Error",description:d,type:"error",showIcon:!0})}),!r&&Object(w.jsx)("div",{children:Object(w.jsxs)(oe.a,Object(N.a)(Object(N.a)({name:"validate_other"},{labelCol:{span:30,offset:0},wrapperCol:{span:50}}),{},{onFinish:function(e){console.log(h),console.log(h.length),0===h.length?g.a.post("".concat("https://epcr-backend.lentorresidence.com","/users/register"),{username:e.username.toUpperCase(),password:e.password,email:e.email,role:e.role},{headers:{token:t}}).then((function(e){s(!0),j(null)})).catch((function(e){console.log(e.response.data.message),j(e.response.data.message)})):alert("Password complexity requirements not met")},children:[Object(w.jsx)(oe.a.Item,{name:"username",label:"Username",required:!0,children:Object(w.jsx)(D.a,{required:!0})}),Object(w.jsx)(oe.a.Item,{name:"password",label:"Password",required:!0,children:Object(w.jsx)(D.a,Object(N.a)(Object(N.a)({},m),{},{type:"password",required:!0}))}),Object(w.jsx)("p",{children:h}),Object(w.jsx)(oe.a.Item,{name:"email",label:"Email Address",required:!0,children:Object(w.jsx)(D.a,{type:"email",required:!0})}),Object(w.jsx)(oe.a.Item,{name:"role",label:"Role",rules:[{required:!0}],children:Object(w.jsxs)(ie.a,{placeholder:"Select User Role",allowClear:!0,children:[Object(w.jsx)(Option,{value:"restricted",children:"Restricted (Staff)"}),Object(w.jsx)(Option,{value:"full",children:"Full (Admin)"})]})}),Object(w.jsx)(oe.a.Item,{children:Object(w.jsx)(P.a,{type:"primary",htmlType:"submit",children:"Submit"})})]}))}),r&&Object(w.jsx)(de.a,{status:"success",title:"Success!",subTitle:"Staff Account Created",extra:[Object(w.jsx)(P.a,{type:"primary",onClick:x,children:"Back"},"console")]})]})})]})},we=n(297);we.config({allowPassphrases:!1,maxLength:128,minLength:10,minPhraseLength:20,minOptionalTestsToPass:7});var Re=function(e){var t=k(),n=Object(l.h)().username,c=Object(a.useState)(!1),r=Object(o.a)(c,2),s=r[0],i=r[1],d=Object(a.useState)(),j=Object(o.a)(d,2),u=j[0],b=j[1],h=Object(a.useState)(),O=Object(o.a)(h,2),m=O[0],x=O[1],f=function(e){var t=Object(a.useState)(e),n=Object(o.a)(t,2),c=n[0],r=n[1];return{value:c,onChange:function(e){r(e.target.value);var t=we.test(e.target.value);x(t.requiredTestErrors)}}}("");function y(){e.history.push("/")}return Object(a.useEffect)((function(){t?g.a.get("".concat("https://epcr-backend.lentorresidence.com","/users/verifyToken?token=").concat(t)).then((function(e){})).catch((function(e){I()})):e.history.push("/login")}),[]),Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(P.a,{style:{margin:"10px"},onClick:y,type:"default",children:"Back"}),Object(w.jsx)(J.a,{className:"site-page-header",title:"Reset Password"}),Object(w.jsx)("div",{style:{padding:"30px"},children:Object(w.jsxs)(T.b,{direction:"vertical",size:"middle",children:[u&&Object(w.jsx)(w.Fragment,{children:Object(w.jsx)(p.a,{message:"Error",description:u,type:"error",showIcon:!0})}),!s&&Object(w.jsx)("div",{children:Object(w.jsxs)(oe.a,Object(N.a)(Object(N.a)({name:"validate_other"},{labelCol:{span:30,offset:0},wrapperCol:{span:50}}),{},{onFinish:function(e){0===m.length?g.a.post("".concat("https://epcr-backend.lentorresidence.com","/users/resetPassword"),{username:n,password:e.password},{headers:{token:t}}).then((function(e){i(!0),b(null)})).catch((function(e){console.log(e.response.data.message),b(e.response.data.message)})):alert("Password complexity requirements not met")},children:[Object(w.jsx)(oe.a.Item,{name:"password",label:"Password",required:!0,children:Object(w.jsx)(D.a,Object(N.a)(Object(N.a)({},f),{},{type:"password",required:!0}))}),Object(w.jsx)("p",{children:m}),Object(w.jsx)(oe.a.Item,{children:Object(w.jsx)(P.a,{type:"primary",htmlType:"submit",children:"Submit"})})]}))}),s&&Object(w.jsx)(de.a,{status:"success",title:"Success!",subTitle:"Password reset successful",extra:[Object(w.jsx)(P.a,{type:"primary",onClick:y,children:"Back"},"console")]})]})})]})},_e=n(553);var Me=function(e){var t=e.pendingSubmission,n=t["0000"].map((function(e){return Object(w.jsx)("li",{children:e},e)})),a=t["0200"].map((function(e){return Object(w.jsx)("li",{children:e},e)})),c=t["0400"].map((function(e){return Object(w.jsx)("li",{children:e},e)})),r=t["0600"].map((function(e){return Object(w.jsx)("li",{children:e},e)})),s=t["0800"].map((function(e){return Object(w.jsx)("li",{children:e},e)})),i=t[1e3].map((function(e){return Object(w.jsx)("li",{children:e},e)})),o=t[1200].map((function(e){return Object(w.jsx)("li",{children:e},e)})),l=t[1400].map((function(e){return Object(w.jsx)("li",{children:e},e)})),d=t[1600].map((function(e){return Object(w.jsx)("li",{children:e},e)})),b=t[1800].map((function(e){return Object(w.jsx)("li",{children:e},e)})),h=t[2e3].map((function(e){return Object(w.jsx)("li",{children:e},e)})),p=t[2200].map((function(e){return Object(w.jsx)("li",{children:e},e)}));return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("h3",{children:"Pending Submission for today (Restraints)"}),Object(w.jsxs)("div",{className:"site-card-wrapper",children:[Object(w.jsxs)(j.a,{gutter:16,children:[Object(w.jsx)(u.a,{span:8,children:Object(w.jsx)(_e.a,{title:"0000",bordered:!1,children:n})}),Object(w.jsx)(u.a,{span:8,children:Object(w.jsx)(_e.a,{title:"0200",bordered:!1,children:a})}),Object(w.jsx)(u.a,{span:8,children:Object(w.jsx)(_e.a,{title:"0400",bordered:!1,children:c})})]}),Object(w.jsx)("br",{}),Object(w.jsxs)(j.a,{gutter:16,children:[Object(w.jsx)(u.a,{span:8,children:Object(w.jsx)(_e.a,{title:"0600",bordered:!1,children:r})}),Object(w.jsx)(u.a,{span:8,children:Object(w.jsx)(_e.a,{title:"0800",bordered:!1,children:s})}),Object(w.jsx)(u.a,{span:8,children:Object(w.jsx)(_e.a,{title:"1000",bordered:!1,children:i})})]})," ",Object(w.jsx)("br",{}),Object(w.jsxs)(j.a,{gutter:16,children:[Object(w.jsx)(u.a,{span:8,children:Object(w.jsx)(_e.a,{title:"1200",bordered:!1,children:o})}),Object(w.jsx)(u.a,{span:8,children:Object(w.jsx)(_e.a,{title:"1400",bordered:!1,children:l})}),Object(w.jsx)(u.a,{span:8,children:Object(w.jsx)(_e.a,{title:"1600",bordered:!1,children:d})})]}),Object(w.jsx)("br",{}),Object(w.jsxs)(j.a,{gutter:16,children:[Object(w.jsx)(u.a,{span:8,children:Object(w.jsx)(_e.a,{title:"1800",bordered:!1,children:b})}),Object(w.jsx)(u.a,{span:8,children:Object(w.jsx)(_e.a,{title:"2000",bordered:!1,children:h})}),Object(w.jsx)(u.a,{span:8,children:Object(w.jsx)(_e.a,{title:"2200",bordered:!1,children:p})})]})]})]})};var Ae=function(e){var t=Object(a.useState)(),n=Object(o.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)(),i=Object(o.a)(s,2),l=i[0],d=i[1],j=Object(a.useState)(!1),u=Object(o.a)(j,2),b=u[0],h=u[1];Object(a.useEffect)((function(){var t=k();t?(g.a.get("".concat("https://epcr-backend.lentorresidence.com","/users/verifyToken?token=").concat(t)).then((function(e){})).catch((function(e){I()})),g.a.post("".concat("https://epcr-backend.lentorresidence.com","/completion_status/restraintsForm"),{date:x},{headers:{token:t}}).then((function(e){r(e.data)})).catch((function(e){console.log(e)})),g.a.post("".concat("https://epcr-backend.lentorresidence.com","/residents/getRestraintsMonitoringStatus"),{},{headers:{token:t}}).then((function(e){console.log("restraints montor",e.data),d(e.data)})).catch((function(e){console.log(e)}))):e.history.push("/login")}),[]);var p=null===l||void 0===l?void 0:l.map((function(e){return Object(w.jsx)("li",{children:e.bed},e._id)})),O=Object(a.useState)(Q()().add(0,"days").startOf("day")),m=Object(o.a)(O,2),x=m[0];return m[1],Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(J.a,{className:"site-page-header",title:"Completion Status Module"}),Object(w.jsx)("div",{style:{padding:"30px"},children:Object(w.jsx)(T.b,{direction:"vertical",size:"middle",children:c&&Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(Me,{pendingSubmission:c}),Object(w.jsx)("br",{}),Object(w.jsx)(P.a,{type:"primary",onClick:function(){h(!0)},children:"Residents under Restraints Monitoring"}),Object(w.jsx)(Oe.a,{title:"Residents under Restraints Monitoring",visible:b,onOk:function(){h(!1)},children:l&&Object(w.jsx)(w.Fragment,{children:p})})]})})})]})};var Te=function(){var e=Object(a.useState)(!0),t=Object(o.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)({username:null}),s=Object(o.a)(r,2),i=s[0],f=s[1],y=Object(a.useState)(!1),S=Object(o.a)(y,2),N=S[0],C=S[1],R=d.a.Header,M=d.a.Footer,T=d.a.Sider,D=d.a.Content,P=Object(l.g)(),F=v();return Object(a.useEffect)((function(){g.a.get("".concat("https://epcr-backend.lentorresidence.com","/networkTest"),{timeout:3e3}).then((function(e){console.log("IP Whitelisted"),C(!1)})).catch((function(e){C(!0)}));var e=k();e||"/login"===window.location.pathname||"/enroll"===window.location.pathname?g.a.get("".concat("https://epcr-backend.lentorresidence.com","/users/verifyToken?token=").concat(e),{timeout:4e3}).then((function(e){c(!1),f(F)})).catch((function(e){I(),c(!1)})):window.open("/login","_self")}),[]),n&&k()?Object(w.jsx)("div",{className:"content",children:"Checking Authentication..."}):Object(w.jsx)("div",{className:"App",children:Object(w.jsxs)(d.a,{style:{minHeight:"100vh"},children:[Object(w.jsxs)(R,{className:"header",children:[Object(w.jsx)("div",{className:"logo"}),Object(w.jsx)(j.a,{justify:"end",children:null!=i.username&&Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(u.a,{span:1,children:Object(w.jsx)(b.a,{size:40,children:i.username})}),Object(w.jsx)(u.a,{span:1})]})})]}),Object(w.jsxs)(d.a,{children:["/login"!==window.location.pathname?Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)(T,{breakpoint:"lg",collapsedWidth:"0",onBreakpoint:function(e){console.log(e)},onCollapse:function(e,t){console.log(e,t)},children:[Object(w.jsx)("div",{className:"logo"}),Object(w.jsxs)(h.a,{theme:"dark",mode:"inline",defaultSelectedKeys:["1"],children:[Object(w.jsx)(h.a.Item,{icon:Object(w.jsx)(O.a,{}),onClick:function(){return P.push("/select_patient")},children:"Forms"},"1"),Object(w.jsx)(h.a.Item,{icon:Object(w.jsx)(m.a,{}),onClick:function(){return P.push("/residents_module")},children:"Residents Module"},"2"),"full"===i.role&&Object(w.jsx)(h.a.Item,{icon:Object(w.jsx)(m.a,{}),onClick:function(){return P.push("/users_module")},children:"Users Module"},"3"),Object(w.jsx)(h.a.Item,{icon:Object(w.jsx)(x.a,{}),onClick:function(){return P.push("/announcement")},children:"Announcements"},"4"),Object(w.jsx)(h.a.Item,{icon:Object(w.jsx)(x.a,{}),onClick:function(){return P.push("/settings")},children:"Settings"},"5"),Object(w.jsx)(h.a.Item,{icon:Object(w.jsx)(x.a,{}),onClick:function(){return P.push("/completion_status")},children:"Completion Status"},"6")]})]})}):Object(w.jsx)(w.Fragment,{}),Object(w.jsxs)(d.a,{children:[N?Object(w.jsx)(p.a,{message:"Network Error",description:"Please connect to TLR Wifi",type:"error",showIcon:!0,style:{textAlign:"left"}}):Object(w.jsx)(w.Fragment,{}),Object(w.jsx)(D,{children:Object(w.jsx)("div",{className:"content",children:Object(w.jsxs)(l.d,{children:[Object(w.jsx)(A,{path:"/login",component:E}),Object(w.jsx)(A,{path:"/enroll",component:Se}),Object(w.jsx)(_,{path:"/settings",component:B}),Object(w.jsx)(_,{path:"/announcement",component:U}),Object(w.jsx)(_,{exact:!0,path:["/select_patient","/"],component:z}),Object(w.jsx)(_,{exact:!0,path:["/patient_profile/:bedNo","/"],component:se}),Object(w.jsx)(_,{exact:!0,path:["/forms/restraints_form/:uuid","/"],component:be}),Object(w.jsx)(_,{exact:!0,path:["/forms/progress_record_form/:uuid","/"],component:ve}),Object(w.jsx)(_,{exact:!0,path:["/residents_module/","/"],component:me}),Object(w.jsx)(_,{exact:!0,path:["/residents_module/admit","/"],component:xe}),Object(w.jsx)(_,{exact:!0,path:["/users_module","/"],component:Ie}),Object(w.jsx)(_,{exact:!0,path:["/users_module/addUser","/"],component:Ce}),Object(w.jsx)(_,{exact:!0,path:["/users_module/reset_password/:username","/"],component:Re}),Object(w.jsx)(_,{exact:!0,path:["/completion_status","/"],component:Ae})]})})}),Object(w.jsx)(M,{children:"ePCR"})]})]})]})})},De=function(e){e&&e instanceof Function&&n.e(6).then(n.bind(null,940)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))};s.a.render(Object(w.jsx)(c.a.StrictMode,{children:Object(w.jsx)(i.a,{children:Object(w.jsx)(Te,{})})}),document.getElementById("root")),De()}},[[543,1,2]]]);
//# sourceMappingURL=main.9a53bd73.chunk.js.map