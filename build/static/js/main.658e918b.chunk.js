(this["webpackJsonpepcr-frontend"]=this["webpackJsonpepcr-frontend"]||[]).push([[0],{340:function(e,t,n){},358:function(e,t,n){},365:function(e,t){},367:function(e,t){},377:function(e,t){},379:function(e,t){},406:function(e,t){},408:function(e,t){},409:function(e,t){},414:function(e,t){},416:function(e,t){},422:function(e,t){},424:function(e,t){},443:function(e,t){},455:function(e,t){},458:function(e,t){},609:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),c=n(34),r=n.n(c),i=n(112),o=(n(340),n(21)),l=n(32),d=n(617),j=n(618),u=n(619),b=n(327),h=n(82),p=n(628),O=(n(228),n(631)),m=n(632),x=n(633),f=n(24),g=n.n(f),y=(n(358),n(359),n(237)),v=function(){var e=localStorage.getItem("user");return e?JSON.parse(e):null},S=function(){localStorage.getItem("EncryptedSymmmetricKey")||"/enroll"===window.location.pathname||window.open("/enroll","_self");var e=localStorage.getItem("token");return e?(sessionStorage.getItem("AESKEY")||(localStorage.removeItem("token"),localStorage.removeItem("user"),window.open("/login","_self")),e):null},k=function(e){sessionStorage.getItem("AESKEY")||function(e){var t=localStorage.getItem("EncryptedSymmmetricKey"),n=y.AES.decrypt(t,e).toString(y.enc.Utf8);sessionStorage.setItem("AESKEY",n)}(e)},I=function(){localStorage.removeItem("token"),localStorage.removeItem("user")},N=n(28),C=n(176),w=n(3),_=["component"];var R=function(e){var t=e.component,n=Object(C.a)(e,_);return Object(w.jsx)(l.b,Object(N.a)(Object(N.a)({},n),{},{render:function(e){return S()?Object(w.jsx)(t,Object(N.a)({},e)):Object(w.jsx)(l.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},A=["component"];var Y=function(e){var t=e.component,n=Object(C.a)(e,A);return Object(w.jsx)(l.b,Object(N.a)(Object(N.a)({},n),{},{render:function(e){return S()?Object(w.jsx)(l.a,{to:{pathname:"/dashboard"}}):Object(w.jsx)(t,Object(N.a)({},e))}}))},T=n(627),D=n(625),P=n(58),V=n(629),M=n(630);var E=function(e){var t=Object(a.useState)(e),n=Object(o.a)(t,2),s=n[0],c=n[1];return{value:s,onChange:function(e){c(e.target.value)}}},J=function(e){var t=Object(a.useState)(!1),n=Object(o.a)(t,2),s=n[0],c=n[1],r=E(""),i=E(""),l=Object(a.useState)(null),d=Object(o.a)(l,2),j=d[0],u=d[1];return Object(w.jsx)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},children:Object(w.jsxs)(T.b,{direction:"vertical",size:"middle",style:{width:"400px"},children:[j?Object(w.jsx)(p.a,{message:"Login Failed",description:j,type:"error",showIcon:!0,style:{textAlign:"left"}}):Object(w.jsx)(w.Fragment,{}),Object(w.jsx)(D.a,Object(N.a)(Object(N.a)({},r),{},{size:"large",placeholder:"Username",prefix:Object(w.jsx)(V.a,{})})),Object(w.jsx)(D.a.Password,Object(N.a)(Object(N.a)({},i),{},{size:"large",placeholder:"Password",prefix:Object(w.jsx)(M.a,{})})),Object(w.jsx)(P.a,{type:"primary",size:"large",shape:"round",onClick:function(){u(null),c(!0),g.a.post("".concat("https://e-pcr-backend.sutdsh.xyz","/users/signin"),{username:r.value,password:i.value}).then((function(e){var t,n;c(!1),t=e.data.token,n=e.data.user,localStorage.setItem("token",t),localStorage.setItem("user",JSON.stringify(n)),k(e.data.key),window.open("/select_patient","_self")})).catch((function(e){c(!1),e.reponse&&401===e.response.status?u(e.response.data.message):u("Something went wrong. Please try again later.")}))},loading:s,style:{width:"100%"},children:s?"Logging In...":"Login"})]})})},F=n(624);var z=function(e){var t=v();return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(F.a,{className:"site-page-header",title:"Settings"}),Object(w.jsxs)("div",{style:{padding:"30px"},children:[Object(w.jsx)(P.a,{type:"primary",onClick:function(){I(),window.open("/login","_self")},children:"Logout"},"console"),Object(w.jsx)("br",{}),Object(w.jsx)("br",{}),Object(w.jsx)(P.a,{type:"primary",onClick:function(){e.history.push("/users_module/reset_password/"+t.username)},children:"Change Password"},"console")]})]})},B=n(623),q=n(615);var G=function(e){var t=B.a.Text,n=Object(a.useState)(),s=Object(o.a)(n,2),c=s[0],r=s[1],i=Object(a.useState)(),l=Object(o.a)(i,2),d=l[0],j=l[1];return Object(a.useEffect)((function(){var t=S();t?(g.a.get("".concat("https://e-pcr-backend.sutdsh.xyz","/users/verifyToken?token=").concat(t)).catch((function(e){I()})),g.a.post("".concat("https://e-pcr-backend.sutdsh.xyz","/residents/listAdmitted"),{},{headers:{token:t}}).then((function(e){var t=e.data;t.map((function(e){e.value=e.bed})),console.log(t),r(t)})).catch((function(e){console.log(e)}))):e.history.push("/login")}),[]),Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(F.a,{className:"site-page-header",title:"Select Patient"}),Object(w.jsx)("div",{style:{padding:"30px"},children:Object(w.jsxs)(T.b,{direction:"vertical",size:"middle",children:[Object(w.jsx)(t,{children:"Input Patient Bed"}),Object(w.jsx)(q.a,{style:{width:200},options:c,placeholder:"Select",onSelect:function(e,t){return function(e,t){j(t.value)}(0,t)},filterOption:function(e,t){return-1!==t.value.indexOf(e)},virtual:!1}),d&&Object(w.jsxs)("div",{children:[Object(w.jsxs)("p",{children:["Selected Bed: ",d]}),Object(w.jsx)(P.a,{type:"primary",onClick:function(){window.open("/patient_profile/"+d,"_self")},children:"Submit"})]})]})})]})};var U=function(){return Object(l.g)(),Object(a.useEffect)((function(){var e=S();e&&g.a.get("".concat("https://e-pcr-backend.sutdsh.xyz","/users/verifyToken?token=").concat(e)).then((function(e){console.log(e)})).catch((function(e){I()}))}),[]),Object(w.jsx)("div",{children:Object(w.jsx)(F.a,{className:"site-page-header",title:"Announcements"})})},L=n(621),K=(n(490),n(527),n(227)),W=n(35),H=n.n(W),Q=n(237),X=function(e){var t=sessionStorage.getItem("AESKEY");return Q.AES.encrypt(e,t).toString()},Z=function(e){var t=sessionStorage.getItem("AESKEY");return Q.AES.encrypt(JSON.stringify(e),t).toString()},$=function(e){var t=sessionStorage.getItem("AESKEY");return Q.AES.decrypt(e,t).toString(Q.enc.Utf8)},ee=function(e){var t=sessionStorage.getItem("AESKEY");return Q.AES.decrypt(JSON.parse(e),t).toString(Q.enc.Utf8)},te=n(135),ne=(n(306),[{title:"Date",key:"_id",dataIndex:"formVals",render:function(e){return Object(w.jsx)("p",{children:JSON.parse(e).date})}},{title:"Time",key:"_id",dataIndex:"formVals",render:function(e){return Object(w.jsx)("p",{children:JSON.parse(e).time})}},{title:"Restraints Applied Correctly",key:"_id",dataIndex:"formVals",render:function(e){return Object(w.jsx)("p",{children:JSON.parse(e).r1})}},{title:"Body & Limbs Comfortable",key:"_id",dataIndex:"formVals",render:function(e){return Object(w.jsx)("p",{children:JSON.parse(e).r2})}},{title:"Adequate Circulation",key:"_id",dataIndex:"formVals",render:function(e){return Object(w.jsx)("p",{children:JSON.parse(e).r3})}},{title:"Adequate ROM",key:"_id",dataIndex:"formVals",render:function(e){return Object(w.jsx)("p",{children:JSON.parse(e).r4})}},{title:"Skin Integrity Checked",key:"_id",dataIndex:"formVals",render:function(e){return Object(w.jsx)("p",{children:JSON.parse(e).r5})}},{title:"Type of Restraints",key:"_id",dataIndex:"formVals",render:function(e){return Object(w.jsx)("p",{children:JSON.parse(e)["r-restraints-type"]})}},{title:"Remarks",key:"_id",dataIndex:"formVals",render:function(e){return Object(w.jsx)("p",{children:JSON.parse(e)["r-remarks"]})}},{title:"Staff",key:"_id",dataIndex:"staff"},{title:"Submitted D/T",key:"_id",dataIndex:"creationDate",render:function(e){return Object(w.jsx)("p",{children:H()(e).format("MMMM Do YYYY, h:mm:ss a")})}}]),ae=[{title:"Date",key:"_id",dataIndex:"formVals",render:function(e){return Object(w.jsx)("p",{children:JSON.parse(e).date})}},{title:"Time",key:"_id",dataIndex:"formVals",render:function(e){return Object(w.jsx)("p",{children:JSON.parse(e).time})}},{title:"General Condition",key:"_id",dataIndex:"formVals",render:function(e){return Object(w.jsx)("p",{children:JSON.parse(e).p1})}},{title:"Mental State",key:"_id",dataIndex:"formVals",render:function(e){return Object(w.jsx)("p",{children:JSON.parse(e).p2})}},{title:"Skin Care",key:"_id",dataIndex:"formVals",render:function(e){return Object(w.jsx)("p",{children:JSON.parse(e).p3})}},{title:"Hygiene/ Bathing",key:"_id",dataIndex:"formVals",render:function(e){return Object(w.jsx)("p",{children:JSON.parse(e).p4})}},{title:"Oral Care",key:"_id",dataIndex:"formVals",render:function(e){return Object(w.jsx)("p",{children:JSON.parse(e).p5})}},{title:"Feeding",key:"_id",dataIndex:"formVals",render:function(e){return Object(w.jsx)("p",{children:JSON.parse(e).p6})}},{title:"Bladder",key:"_id",dataIndex:"formVals",render:function(e){return Object(w.jsx)("p",{children:JSON.parse(e).p7})}},{title:"Bowel",key:"_id",dataIndex:"formVals",render:function(e){return Object(w.jsx)("p",{children:JSON.parse(e).p8})}},{title:"Mobility",key:"_id",dataIndex:"formVals",render:function(e){return Object(w.jsx)("p",{children:JSON.parse(e).p9})}},{title:"Rest at Night",key:"_id",dataIndex:"formVals",render:function(e){return Object(w.jsx)("p",{children:JSON.parse(e).p10})}},{title:"Therapy",key:"_id",dataIndex:"formVals",render:function(e){return Object(w.jsx)("p",{children:JSON.parse(e).p11})}},{title:"Visited",key:"_id",dataIndex:"formVals",render:function(e){return Object(w.jsx)("p",{children:JSON.parse(e).p12})}},{title:"Remarks",key:"_id",dataIndex:"formVals",render:function(e){return Object(w.jsx)("p",{children:JSON.parse(e)["r-remarks"]})}},{title:"Staff",key:"_id",dataIndex:"staff"},{title:"Submitted D/T",key:"_id",dataIndex:"creationDate",render:function(e){return Object(w.jsx)("p",{children:H()(e).format("MMMM Do YYYY, h:mm:ss a")})}}];n.p;var se=function(e){var t=Object(a.useState)(),n=Object(o.a)(t,2),s=n[0],c=n[1],r=Object(a.useState)(),i=Object(o.a)(r,2),d=i[0],j=(i[1],Object(a.useState)()),u=Object(o.a)(j,2),b=u[0],h=u[1],p=Object(a.useState)([H()().add(-2,"days").startOf("day"),H()().endOf("day")]),O=Object(o.a)(p,2),m=O[0],x=O[1],f=Object(a.useState)(),y=Object(o.a)(f,2),v=y[0],k=y[1],N=L.a.RangePicker,C=Object(l.h)().bedNo,_=S();Object(a.useEffect)((function(){_?(g.a.get("".concat("https://e-pcr-backend.sutdsh.xyz","/users/verifyToken?token=").concat(_)).then((function(e){})).catch((function(e){I()})),g.a.post("".concat("https://e-pcr-backend.sutdsh.xyz","/residents/getByBed"),{bed:C},{headers:{token:_}}).then((function(e){c(e.data[0])})).catch((function(e){console.log(e)}))):e.history.push("/login")}),[]),Object(a.useEffect)((function(){s&&(g.a.post("".concat("https://e-pcr-backend.sutdsh.xyz","/forms/restraintsForm/submissionHistory"),{uuid:s.uuid,restraintsDatePicker:m},{headers:{token:_}}).then((function(e){var t=e.data;t.map((function(e){e.formVals=ee(e.formData)})),h(t),console.log(t)})).catch((function(e){console.log(e)})),g.a.post("".concat("https://e-pcr-backend.sutdsh.xyz","/forms/progressRecordForm/submissionHistory"),{uuid:s.uuid,restraintsDatePicker:m},{headers:{token:_}}).then((function(e){var t=e.data;t.map((function(e){e.formVals=ee(e.formData)})),k(t)})).catch((function(e){console.log(e)})))}),[s,m]);var R=window.matchMedia("(max-width: 600px)").matches;return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(P.a,{style:{margin:"10px"},onClick:function(){e.history.push("/select_patient","_self")},type:"default",children:"Back to patient selector"}),Object(w.jsx)(F.a,{className:"site-page-header",title:"Patient Profile"}),Object(w.jsx)("div",{style:{padding:"30px"},children:Object(w.jsxs)(T.b,{direction:"vertical",size:"middle",children:[s&&Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)("h4",{children:["Bed: ",s.bed,Object(w.jsx)("br",{}),"Name: ",$(s.name),Object(w.jsx)("br",{}),"NRIC: ",$(s.NRIC),Object(w.jsx)("br",{}),"Profile Creation:"," ",H()(s.creationDate).format("MMMM Do YYYY, h:mm:ss a"),Object(w.jsx)("br",{}),"Status: ",s.status]}),Object(w.jsxs)("p",{children:["Identifier: ",s.uuid]}),Object(w.jsx)(P.a,{type:"primary",onClick:function(){e.history.push("/forms/restraints_form/"+s.uuid,"_self")},children:"Submit Restraints Form"}),Object(w.jsx)(P.a,{type:"primary",onClick:function(){e.history.push("/forms/progress_record_form/"+s.uuid,"_self")},children:"Submit Progress Record Form"}),Object(w.jsx)("br",{}),Object(w.jsx)("br",{}),Object(w.jsxs)(T.b,{direction:"vertical",size:12,children:[Object(w.jsx)("span",{children:"Select Date for Reports below"}),Object(w.jsx)(N,{defaultValue:[H()().add(-2,"days").startOf("day"),H()().startOf("day")],onChange:function(e){var t=e[1];t=H()(t).endOf("day"),console.log(H()(t).format()),x([e[0],t])}})]}),Object(w.jsx)("h3",{children:"Restraints Form submission history"}),Object(w.jsx)(P.a,{style:{margin:"10px"},onClick:function(){!function(e,t){var n=new te.default("landscape");n.text("Restraints Report",5,15),n.setFontSize(10),n.text("Resident Name: "+$(e.name),5,30),n.text("Resident NRIC: "+$(e.NRIC),5,35),n.text("Report Generated: "+H()().toDate(),5,40);for(var a=[],s=0;s<t.length;s++){var c=[];console.log(JSON.parse(t[s].formVals).time),c.push(JSON.parse(t[s].formVals).date),c.push(JSON.parse(t[s].formVals).time),c.push(JSON.parse(t[s].formVals).r1),c.push(JSON.parse(t[s].formVals).r2),c.push(JSON.parse(t[s].formVals).r3),c.push(JSON.parse(t[s].formVals).r4),c.push(JSON.parse(t[s].formVals).r5),c.push(JSON.parse(t[s].formVals)["r-restraints-type"]),c.push(JSON.parse(t[s].formVals)["r-remarks"]),c.push(t[s].staff),a.push(c)}n.autoTable({startY:50,head:[["Date","Time","Restraints Applied Correctly","Body & Limbs in Comfortable Position","Adequate Circulation","Adequate ROM","Skin Integrity Checked","Restraints Type","Remarks","Staff Signature"]],body:a}),n.save("table.pdf")}(s,b)},type:"default",children:"Export Restraints Data"}),Object(w.jsx)("div",{className:"pcf",children:Object(w.jsx)(K.a,{style:{width:R?400:1100},scroll:{x:300},columns:ne,className:"table",data:b})}),Object(w.jsx)("h3",{children:"Progress Record Form submission history"}),Object(w.jsx)(P.a,{style:{margin:"10px"},onClick:function(){!function(e,t){var n=new te.default("landscape");n.text("Progress Record Report",5,15),n.setFontSize(10),n.text("Resident Name: "+$(e.name),5,30),n.text("Resident NRIC: "+$(e.NRIC),5,35),n.text("Report Generated: "+H()().toDate(),5,40),n.setFontSize(7);for(var a=[],s=0;s<t.length;s++){var c=[];console.log(JSON.parse(t[s].formVals)),c.push(JSON.parse(t[s].formVals).date),c.push(JSON.parse(t[s].formVals).time),c.push(JSON.parse(t[s].formVals).p1),c.push(JSON.parse(t[s].formVals).p2),c.push(JSON.parse(t[s].formVals).p3),c.push(JSON.parse(t[s].formVals).p4),c.push(JSON.parse(t[s].formVals).p5),c.push(JSON.parse(t[s].formVals).p6),c.push(JSON.parse(t[s].formVals).p7),c.push(JSON.parse(t[s].formVals).p8),c.push(JSON.parse(t[s].formVals).p9),c.push(JSON.parse(t[s].formVals).p10),c.push(JSON.parse(t[s].formVals).p11),c.push(JSON.parse(t[s].formVals).p12),c.push(JSON.parse(t[s].formVals)["r-remarks"]),c.push(t[s].staff),a.push(c)}n.autoTable({startY:50,styles:{fontSize:7},head:[["Date","Time","General Condition","Mental State\t","Skin Care","Hygiene/Bathing","Oral Care","Feeding","Bladder","Bowel","Mobility","Rest at Night","Therapy","Visited","Remarks","Staff Signature"]],body:a}),n.save("table.pdf")}(s,v)},type:"default",children:"Export Progress Record Data"}),Object(w.jsx)("div",{className:"pcf",children:Object(w.jsx)(K.a,{style:{width:R?400:1100},scroll:{x:300},columns:ae,data:v,className:"table"})})]}),d&&Object(w.jsx)("p",{children:d})]})})]})},ce=n(87),re=n(622),ie=n(174),oe=n(626),le=ce.a.Option,de={labelCol:{span:30,offset:0},wrapperCol:{span:50}};var je=function(e){var t=Object(a.useState)(),n=Object(o.a)(t,2),s=n[0],c=n[1],r=Object(a.useState)(),i=Object(o.a)(r,2),d=i[0],j=i[1],u=Object(a.useState)(),b=Object(o.a)(u,2),h=b[0],p=b[1],O=Object(a.useState)(!1),m=Object(o.a)(O,2),x=m[0],f=m[1],y=Object(l.h)().uuid,k=S();function C(){e.history.push("/patient_profile/"+s.bed,"_self")}return Object(a.useEffect)((function(){k?(g.a.get("".concat("https://e-pcr-backend.sutdsh.xyz","/users/verifyToken?token=").concat(k)).then((function(e){p(v().username)})).catch((function(e){I()})),g.a.post("".concat("https://e-pcr-backend.sutdsh.xyz","/residents/getByUUID"),{uuid:y},{headers:{token:k}}).then((function(e){c(e.data[0])})).catch((function(e){console.log(e.response.data.error),j(e.response.data.error)}))):e.history.push("/login")}),[]),Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(P.a,{style:{margin:"10px"},onClick:C,type:"default",children:"Back to patient profile"}),Object(w.jsx)(F.a,{className:"site-page-header",title:"Restraints Form"}),Object(w.jsx)("div",{style:{padding:"30px"},children:Object(w.jsxs)(T.b,{direction:"vertical",size:"middle",children:[s&&h&&!x&&Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)("h3",{children:["Bed: ",s.bed,Object(w.jsx)("br",{}),"Name: ",$(s.name),Object(w.jsx)("br",{}),"NRIC: ",$(s.NRIC),Object(w.jsx)("br",{}),"Profile Creation:"," ",H()(s.creationDate).format("MMMM Do YYYY, h:mm:ss a"),Object(w.jsx)("br",{}),"Status: ",s.status]}),Object(w.jsxs)("p",{children:["Identifier: ",s.uuid]}),Object(w.jsxs)(re.a,Object(N.a)(Object(N.a)({name:"validate_other"},de),{},{onFinish:function(e){var t=e.date;e.date=e.date.format("YYYY-MM-DD"),console.log("Received values of form: ",JSON.stringify(e)),g.a.post("".concat("https://e-pcr-backend.sutdsh.xyz","/forms/restraintsForm/submit"),{resident:y,formData:Z(e),bed:s.bed,dateTime:t},{headers:{token:k}}).then((function(e){f(!0)})).catch((function(e){console.log(e.response.data.error),j(e.response.data.error)}))},children:[Object(w.jsx)(re.a.Item,{name:"date",label:"Date",required:!0,children:Object(w.jsx)(L.a,{})}),Object(w.jsx)(re.a.Item,{name:"time",label:"Time",required:!0,children:Object(w.jsxs)(ce.a,{placeholder:"Select time of check",virtual:!1,children:[Object(w.jsx)(le,{value:"0000",children:"12am midnight"}),Object(w.jsx)(le,{value:"0200",children:"2am"}),Object(w.jsx)(le,{value:"0400",children:"4am"}),Object(w.jsx)(le,{value:"0600",children:"6am"}),Object(w.jsx)(le,{value:"0800",children:"8am"}),Object(w.jsx)(le,{value:"1000",children:"10am"}),Object(w.jsx)(le,{value:"1200",children:"12pm noon"}),Object(w.jsx)(le,{value:"1400",children:"2pm"}),Object(w.jsx)(le,{value:"1600",children:"4pm"}),Object(w.jsx)(le,{value:"1800",children:"6pm"}),Object(w.jsx)(le,{value:"2000",children:"8pm"}),Object(w.jsx)(le,{value:"2200",children:"10pm"})]})}),Object(w.jsx)(re.a.Item,{name:"r1",label:"Restraints applied correctly",children:Object(w.jsxs)(ie.a.Group,{children:[Object(w.jsx)(ie.a,{value:"Y",children:"Yes"}),Object(w.jsx)(ie.a,{value:"N",children:"No"}),Object(w.jsx)(ie.a,{value:"",children:"NA"})]})}),Object(w.jsx)(re.a.Item,{name:"r2",label:"Body & limbs in comfortable position",children:Object(w.jsxs)(ie.a.Group,{children:[Object(w.jsx)(ie.a,{value:"Y",children:"Yes"}),Object(w.jsx)(ie.a,{value:"N",children:"No"}),Object(w.jsx)(ie.a,{value:"",children:"NA"})]})}),Object(w.jsx)(re.a.Item,{name:"r3",label:"(Restrained Extremities) Adequate circulation",children:Object(w.jsxs)(ie.a.Group,{children:[Object(w.jsx)(ie.a,{value:"Y",children:"Yes"}),Object(w.jsx)(ie.a,{value:"N",children:"No"}),Object(w.jsx)(ie.a,{value:"",children:"NA"})]})}),Object(w.jsx)(re.a.Item,{name:"r4",label:"(Restrained Extremities) Adequate ROM",children:Object(w.jsxs)(ie.a.Group,{children:[Object(w.jsx)(ie.a,{value:"Y",children:"Yes"}),Object(w.jsx)(ie.a,{value:"N",children:"No"}),Object(w.jsx)(ie.a,{value:"",children:"NA"})]})}),Object(w.jsx)(re.a.Item,{name:"r5",label:"Skin integrity checked",children:Object(w.jsxs)(ie.a.Group,{children:[Object(w.jsx)(ie.a,{value:"Y",children:"Yes"}),Object(w.jsx)(ie.a,{value:"N",children:"No"}),Object(w.jsx)(ie.a,{value:"",children:"NA"})]})}),Object(w.jsx)(re.a.Item,{name:"r-restraints-type",label:"Type of Restraints",children:Object(w.jsx)(D.a,{})}),Object(w.jsx)(re.a.Item,{name:"r-remarks",label:"Remarks",children:Object(w.jsx)(D.a,{})}),Object(w.jsx)(re.a.Item,{name:"staff",label:"Submitted by",children:Object(w.jsx)("span",{className:"ant-form-text",children:h})}),Object(w.jsx)(re.a.Item,{children:Object(w.jsx)(P.a,{type:"primary",htmlType:"submit",children:"Submit"})})]}))]}),x&&Object(w.jsx)(oe.a,{status:"success",title:"Success!",subTitle:"You may view the submitted data on patient profile page",extra:[Object(w.jsx)(P.a,{type:"primary",onClick:function(){e.history.push("/select_patient/","_self")},children:"Select new patient"},"console"),Object(w.jsx)(P.a,{onClick:C,children:"Submit new form for same patient"},"buy")]}),d&&Object(w.jsx)("p",{children:d})]})})]})},ue=n(616),be=n(620);var he=function(e){B.a.Text,B.a.Link;var t=Object(a.useState)(),n=Object(o.a)(t,2),s=n[0],c=n[1],r=Object(a.useState)(),i=Object(o.a)(r,2),l=i[0],d=i[1],j=S();function u(){g.a.post("".concat("https://e-pcr-backend.sutdsh.xyz","/residents/listAdmittedFullDetails"),{},{headers:{token:j}}).then((function(e){var t=e.data;console.log(t),t.map((function(e){e.name=$(e.name),e.NRIC=$(e.NRIC)})),c(t)})).catch((function(e){console.log(e)}))}function b(e){g.a.post("".concat("https://e-pcr-backend.sutdsh.xyz","/residents/discharge"),{uuid:e},{headers:{token:j}}).then((function(e){u()})).catch((function(e){console.log(e)}))}function h(e){console.log("params",e)}Object(a.useEffect)((function(){j?(g.a.get("".concat("https://e-pcr-backend.sutdsh.xyz","/users/verifyToken?token=").concat(j)).then((function(e){})).catch((function(e){I()})),u(),g.a.post("".concat("https://e-pcr-backend.sutdsh.xyz","/residents/listDischargedFullDetails"),{},{headers:{token:j}}).then((function(e){var t=e.data;console.log(t),t.map((function(e){e.name=$(e.name),e.NRIC=$(e.NRIC)})),d(t)})).catch((function(e){console.log(e)}))):e.history.push("/login")}),[]);var p=[{title:"Name",key:"_id",dataIndex:"name"},{title:"NRIC",key:"_id",dataIndex:"NRIC"},{title:"Bed",key:"_id",dataIndex:"bed"},{title:"Initial admission",key:"_id",dataIndex:"creationDate",render:function(e){return Object(w.jsx)("p",{children:H()(e).format("MMMM Do YYYY, h:mm:ss a")})}},{title:"Action",key:"action",width:100,render:function(t){return Object(w.jsxs)(T.b,{size:"middle",children:[Object(w.jsx)("a",{onClick:function(){e.history.push("/patient_profile/"+t.bed)},children:"View Patient"}),Object(w.jsx)(ue.a,{title:"Are you sure to discharge this patient?",onConfirm:function(){return b(t.uuid)},onCancel:"",okText:"Yes",cancelText:"No",children:Object(w.jsx)("a",{href:"#",children:"Discharge"})})]})}}],O=[{title:"Name",key:"_id",dataIndex:"name"},{title:"NRIC",key:"_id",dataIndex:"NRIC"},{title:"Bed",key:"_id",dataIndex:"bed"},{title:"Initial admission",key:"_id",dataIndex:"creationDate",render:function(e){return Object(w.jsx)("p",{children:H()(e).format("MMMM Do YYYY, h:mm:ss a")})}},{title:"Action",key:"action",width:100,render:function(t){return Object(w.jsxs)(T.b,{size:"middle",children:[Object(w.jsx)("a",{onClick:function(){e.history.push("/patient_profile/"+t.bed)},children:"View Patient"}),Object(w.jsx)(ue.a,{title:"Feature in progress.",onConfirm:function(){return b(t.uuid)},onCancel:"",okText:"Yes",cancelText:"No",children:Object(w.jsx)("a",{href:"#",children:"Readmit"})})]})}}];return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(F.a,{className:"site-page-header",title:"Residents Module"}),Object(w.jsx)("div",{style:{padding:"30px"},children:Object(w.jsxs)(T.b,{direction:"vertical",size:"middle",children:[Object(w.jsx)(P.a,{onClick:function(){e.history.push("/residents_module/admit")},children:"Admit New Patient"}),Object(w.jsx)("h3",{children:"Table of Admitted Patients"}),Object(w.jsx)(be.a,{columns:p,dataSource:s,onChange:h}),Object(w.jsx)("br",{}),Object(w.jsx)("h3",{children:"Table of Discharged Patients (Re-admission function not implemented yet)"}),Object(w.jsx)(be.a,{columns:O,dataSource:l,onChange:h})]})})]})};var pe=function(e){var t=S(),n=Object(a.useState)(!1),s=Object(o.a)(n,2),c=s[0],r=s[1],i=Object(a.useState)(),l=Object(o.a)(i,2),d=l[0],j=l[1];function u(){e.history.push("/residents_module")}return Object(a.useEffect)((function(){t?g.a.get("".concat("https://e-pcr-backend.sutdsh.xyz","/users/verifyToken?token=").concat(t)).catch((function(e){I()})):e.history.push("/login")}),[]),Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(P.a,{style:{margin:"10px"},onClick:u,type:"default",children:"Back"}),Object(w.jsx)(F.a,{className:"site-page-header",title:"Admit Patient"}),Object(w.jsx)("div",{style:{padding:"30px"},children:Object(w.jsxs)(T.b,{direction:"vertical",size:"middle",children:[d&&Object(w.jsx)(w.Fragment,{children:Object(w.jsx)(p.a,{message:"Error",description:d,type:"error",showIcon:!0})}),!c&&Object(w.jsx)("div",{children:Object(w.jsxs)(re.a,Object(N.a)(Object(N.a)({name:"validate_other"},{labelCol:{span:30,offset:0},wrapperCol:{span:50}}),{},{onFinish:function(e){console.log("Received values of form: ",e),g.a.post("".concat("https://e-pcr-backend.sutdsh.xyz","/residents/admit"),{bed:e.bed.toUpperCase(),name:X(e.name.toUpperCase()),NRIC:X(e.NRIC.toUpperCase())},{headers:{token:t}}).then((function(e){r(!0),j(null)})).catch((function(e){console.log(e.response.data.message),j(e.response.data.message)}))},children:[Object(w.jsx)(re.a.Item,{name:"name",label:"Resident Name",required:!0,children:Object(w.jsx)(D.a,{required:!0})}),Object(w.jsx)(re.a.Item,{name:"NRIC",label:"NRIC",required:!0,children:Object(w.jsx)(D.a,{required:!0})}),Object(w.jsx)(re.a.Item,{name:"bed",label:"Resident Bed",required:!0,children:Object(w.jsx)(D.a,{required:!0})}),Object(w.jsx)(re.a.Item,{children:Object(w.jsx)(P.a,{type:"primary",htmlType:"submit",children:"Submit"})})]}))}),c&&Object(w.jsx)(oe.a,{status:"success",title:"Success!",subTitle:"Patient Admitted",extra:[Object(w.jsx)(P.a,{type:"primary",onClick:u,children:"Back"},"console")]})]})})]})},Oe=n(143),me=ce.a.Option,xe={labelCol:{span:30,offset:0},wrapperCol:{span:50}};var fe=function(e){var t=Object(a.useState)(),n=Object(o.a)(t,2),s=n[0],c=n[1],r=Object(a.useState)(),i=Object(o.a)(r,2),d=i[0],j=i[1],u=Object(a.useState)(),b=Object(o.a)(u,2),h=b[0],p=b[1],O=Object(a.useState)(!1),m=Object(o.a)(O,2),x=m[0],f=m[1],y=Object(l.h)().uuid,k=S();function C(){e.history.push("/patient_profile/"+s.bed,"_self")}return Object(a.useEffect)((function(){k?(g.a.get("".concat("https://e-pcr-backend.sutdsh.xyz","/users/verifyToken?token=").concat(k)).then((function(e){p(v().username)})).catch((function(e){I()})),g.a.post("".concat("https://e-pcr-backend.sutdsh.xyz","/residents/getByUUID"),{uuid:y},{headers:{token:k}}).then((function(e){c(e.data[0])})).catch((function(e){console.log(e)}))):e.history.push("/login")}),[]),Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(P.a,{style:{margin:"10px"},onClick:C,type:"default",children:"Back to patient profile"}),Object(w.jsx)(F.a,{className:"site-page-header",title:"Progress Record Form"}),Object(w.jsx)("div",{style:{padding:"30px"},children:Object(w.jsxs)(T.b,{direction:"vertical",size:"middle",children:[s&&h&&!x&&Object(w.jsxs)(w.Fragment,{children:[Object(w.jsxs)("h3",{children:["Bed: ",s.bed,Object(w.jsx)("br",{}),"Name: ",$(s.name),Object(w.jsx)("br",{}),"NRIC: ",$(s.NRIC),Object(w.jsx)("br",{}),"Profile Creation:"," ",H()(s.creationDate).format("MMMM Do YYYY, h:mm:ss a"),Object(w.jsx)("br",{}),"Status: ",s.status]}),Object(w.jsxs)("p",{children:["Identifier: ",s.uuid]}),Object(w.jsxs)(re.a,Object(N.a)(Object(N.a)({name:"validate_other"},xe),{},{onFinish:function(e){var t=e.date;e.date=e.date.format("YYYY-MM-DD"),console.log("Received values of form: ",e),g.a.post("".concat("https://e-pcr-backend.sutdsh.xyz","/forms/progressRecordForm/submit"),{resident:y,formData:Z(e),dateTime:t,bed:s.bed},{headers:{token:k}}).then((function(e){f(!0)})).catch((function(e){console.log(e.response.data.error),j(e.response.data.error)}))},initialValues:{},children:[Object(w.jsx)(re.a.Item,{name:"date",label:"Date",required:!0,children:Object(w.jsx)(L.a,{})}),Object(w.jsx)(re.a.Item,{name:"time",label:"Time",required:!0,children:Object(w.jsxs)(ce.a,{placeholder:"Select time of check",virtual:!1,children:[Object(w.jsx)(me,{value:"ND",children:"ND"}),Object(w.jsx)(me,{value:"AM",children:"AM"}),Object(w.jsx)(me,{value:"PM",children:"PM"})]})}),Object(w.jsx)(re.a.Item,{name:"p1",label:"General Condition",children:Object(w.jsxs)(ie.a.Group,{children:[Object(w.jsx)(ie.a,{value:"Satisfactory",children:"Satisfactory"}),Object(w.jsx)(ie.a,{value:"Unwell",children:"Unwell"}),Object(w.jsx)(ie.a,{value:"Poor",children:"Poor"}),Object(w.jsx)(ie.a,{value:"",children:"NA"})]})}),Object(w.jsx)(re.a.Item,{name:"p2",label:"Mental State",children:Object(w.jsxs)(ie.a.Group,{children:[Object(w.jsx)(ie.a,{value:"Oriented",children:"Oriented"}),Object(w.jsx)(ie.a,{value:"Confused",children:"Confused"}),Object(w.jsx)(ie.a,{value:"Behavioural Problem",children:"Behavioural Problem"}),Object(w.jsx)(ie.a,{value:"Uncommunicative",children:"Uncommunicative"}),Object(w.jsx)(ie.a,{value:"",children:"NA"})]})}),Object(w.jsx)(re.a.Item,{name:"p3",label:"Skin Care",children:Object(w.jsxs)(ie.a.Group,{children:[Object(w.jsx)(ie.a,{value:"Intact",children:"Intact"}),Object(w.jsx)(ie.a,{value:"Impaired/Rashes",children:"Impaired/Rashes"}),Object(w.jsx)(ie.a,{value:"Wound Care",children:"Wound Care"}),Object(w.jsx)(ie.a,{value:"",children:"NA"})]})}),Object(w.jsx)(re.a.Item,{name:"p4",label:"Hygiene/Bathing",children:Object(w.jsxs)(ie.a.Group,{children:[Object(w.jsx)(ie.a,{value:"Self",children:"Self"}),Object(w.jsx)(ie.a,{value:"Assisted Bath",children:"Assisted Bath"}),Object(w.jsx)(ie.a,{value:"Bed Bath",children:"Bed Bath"}),Object(w.jsx)(ie.a,{value:"",children:"NA"})]})}),Object(w.jsx)(re.a.Item,{name:"p5",label:"Oral Care",children:Object(w.jsxs)(ie.a.Group,{children:[Object(w.jsx)(ie.a,{value:"Self",children:"Self"}),Object(w.jsx)(ie.a,{value:"Assisted",children:"Assisted"}),Object(w.jsx)(ie.a,{value:"Totally Dependent",children:"Totally Dependent"}),Object(w.jsx)(ie.a,{value:"",children:"NA"})]})}),Object(w.jsx)(re.a.Item,{name:"p6",label:"Feeding",children:Object(w.jsxs)(ie.a.Group,{children:[Object(w.jsx)(ie.a,{value:"Self",children:"Self"}),Object(w.jsx)(ie.a,{value:"Assisted",children:"Assisted"}),Object(w.jsx)(ie.a,{value:"NGT/PEG",children:"NGT/PEG"}),Object(w.jsx)(ie.a,{value:"",children:"NA"})]})}),Object(w.jsx)(re.a.Item,{name:"p7",label:"Bladder",children:Object(w.jsxs)(ie.a.Group,{children:[Object(w.jsx)(ie.a,{value:"Continent",children:"Continent"}),Object(w.jsx)(ie.a,{value:"Incontinent(Diaper)",children:"Incontinent(Diaper)"}),Object(w.jsx)(ie.a,{value:"IDC/IMC/SPC",children:"IDC/IMC/SPC"}),Object(w.jsx)(ie.a,{value:"",children:"NA"})]})}),Object(w.jsx)(re.a.Item,{name:"p8",label:"Bowel",children:Object(w.jsxs)(Oe.a.Group,{children:[Object(w.jsx)(Oe.a,{value:"Bowel Opened ",children:"Bowel Opened"}),Object(w.jsx)(Oe.a,{value:"Bowel Not Opened",children:"Bowel Not Opened"}),Object(w.jsx)(Oe.a,{value:"Continent ",children:"Continent"}),Object(w.jsx)(Oe.a,{value:"Incontinent (Diaper) ",children:"Incontinent (Diaper)"}),Object(w.jsx)(Oe.a,{value:"Colostomy Care ",children:"Colostomy Care"})]})}),Object(w.jsx)(re.a.Item,{name:"p9",label:"Mobility",children:Object(w.jsxs)(Oe.a.Group,{children:[Object(w.jsx)(Oe.a,{value:"Ambulant",children:"Ambulant"}),Object(w.jsx)(Oe.a,{value:"Requires Wheelchair",children:"Requires Wheelchair"}),Object(w.jsx)(Oe.a,{value:"Requires Walking Aides",children:"Requires Walking Aides"}),Object(w.jsx)(Oe.a,{value:"Requires 2hrly Turning",children:"Requires 2hrly Turning"})]})}),Object(w.jsx)(re.a.Item,{name:"p10",label:"Rest During Night",children:Object(w.jsxs)(ie.a.Group,{children:[Object(w.jsx)(ie.a,{value:"Good",children:"Good"}),Object(w.jsx)(ie.a,{value:"Restless/Interrupted",children:"Restless/Interrupted"}),Object(w.jsx)(ie.a,{value:"",children:"NA"})]})}),Object(w.jsx)(re.a.Item,{name:"p11",label:"Therapy",children:Object(w.jsxs)(ie.a.Group,{children:[Object(w.jsx)(ie.a,{value:"Active Exercise",children:"Active Exercise"}),Object(w.jsx)(ie.a,{value:"Passive Exercise",children:"Passive Exercise"}),Object(w.jsx)(ie.a,{value:"",children:"NA"})]})}),Object(w.jsx)(re.a.Item,{name:"p12",label:"Visited by Relatives/Friend",children:Object(w.jsxs)(ie.a.Group,{children:[Object(w.jsx)(ie.a,{value:"Yes",children:"Yes"}),Object(w.jsx)(ie.a,{value:"No",children:"No"}),Object(w.jsx)(ie.a,{value:"",children:"NA"})]})}),Object(w.jsx)(re.a.Item,{name:"r-remarks",label:"Remarks",children:Object(w.jsx)(D.a,{})}),Object(w.jsx)(re.a.Item,{name:"staff",label:"Submitted by",children:Object(w.jsx)("span",{className:"ant-form-text",children:h})}),Object(w.jsx)(re.a.Item,{children:Object(w.jsx)(P.a,{type:"primary",htmlType:"submit",children:"Submit"})})]}))]}),x&&Object(w.jsx)(oe.a,{status:"success",title:"Success!",subTitle:"You may view the submitted data on patient profile page",extra:[Object(w.jsx)(P.a,{type:"primary",onClick:function(){e.history.push("/select_patient/","_self")},children:"Select new patient"},"console"),Object(w.jsx)(P.a,{onClick:C,children:"Submit new form for same patient"},"buy")]}),d&&Object(w.jsx)("p",{children:d})]})})]})};var ge=function(e){var t=Object(a.useState)(e),n=Object(o.a)(t,2),s=n[0],c=n[1];return{value:s,onChange:function(e){c(e.target.value)}}},ye=function(e){var t=Object(a.useState)(!1),n=Object(o.a)(t,2),s=n[0],c=n[1],r=ge(""),i=Object(a.useState)(null),l=Object(o.a)(i,2),d=l[0],j=l[1];return Object(a.useEffect)((function(){S()||"/login"===window.location.pathname||"/enroll"===window.location.pathname||window.open("/login","_self")}),[]),Object(w.jsx)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},children:Object(w.jsxs)(T.b,{direction:"vertical",size:"middle",style:{width:"400px"},children:[d?Object(w.jsx)(p.a,{message:"Login Failed",description:d,type:"error",showIcon:!0,style:{textAlign:"left"}}):Object(w.jsx)(w.Fragment,{}),Object(w.jsx)("h4",{children:"Enrollment Secret"}),Object(w.jsx)("p",{children:"Contact admin to assist with keying in enrollment secret"}),Object(w.jsx)(D.a,Object(N.a)(Object(N.a)({},r),{},{size:"large",placeholder:"Enrollment Secret",type:"password",prefix:Object(w.jsx)(V.a,{})})),Object(w.jsx)(P.a,{type:"primary",size:"large",shape:"round",onClick:function(){j(null),c(!0),g.a.get("https://go.lentorresidence.com/"+r.value,{timeout:1e3}).then((function(e){console.log(e.data),localStorage.setItem("EncryptedSymmmetricKey",e.data),window.open("/login","_self")})).catch((function(e){c(!1),e.reponse&&401===e.response.status?j(e.response.data.message):j("Enrollment Key Invalid. Please try again.")}))},loading:s,style:{width:"100%"},children:s?"Logging In...":"Login"})]})})};var ve=function(e){var t=Object(a.useState)(),n=Object(o.a)(t,2),s=n[0],c=n[1];Object(a.useEffect)((function(){var t=S();t?(g.a.get("".concat("https://e-pcr-backend.sutdsh.xyz","/users/verifyToken?token=").concat(t)).then((function(e){})).catch((function(e){I()})),g.a.post("".concat("https://e-pcr-backend.sutdsh.xyz","/users/listStaff"),{},{headers:{token:t}}).then((function(e){c(e.data)})).catch((function(e){console.log(e)}))):e.history.push("/login")}),[]);var r=[{title:"Username",key:"_id",dataIndex:"username"},{title:"Email",key:"_id",dataIndex:"email"},{title:"Role",key:"_id",dataIndex:"role"},{title:"Date Created",key:"_id",dataIndex:"creationDate",render:function(e){return Object(w.jsx)("p",{children:H()(e).format("MMMM Do YYYY, h:mm:ss a")})}},{title:"Action",key:"action",width:100,render:function(t){return Object(w.jsx)(T.b,{size:"middle",children:Object(w.jsx)("a",{onClick:function(){e.history.push("/users_module/reset_password/"+t.username)},children:"Reset Password"})})}}];return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(F.a,{className:"site-page-header",title:"User Management Module"}),Object(w.jsx)("div",{style:{padding:"30px"},children:Object(w.jsxs)(T.b,{direction:"vertical",size:"middle",children:[Object(w.jsx)(P.a,{onClick:function(){e.history.push("/users_module/addUser")},children:"Add new Staff"}),Object(w.jsx)("h3",{children:"Registed Staff List"}),Object(w.jsx)(be.a,{columns:r,dataSource:s,onChange:function(e){console.log("params",e)}})]})})]})},Se=n(316);Se.config({allowPassphrases:!1,maxLength:128,minLength:10,minPhraseLength:20,minOptionalTestsToPass:7});var ke=function(e){var t=S(),n=Object(a.useState)(!1),s=Object(o.a)(n,2),c=s[0],r=s[1],i=Object(a.useState)(),l=Object(o.a)(i,2),d=l[0],j=l[1],u=Object(a.useState)(),b=Object(o.a)(u,2),h=b[0],O=b[1],m=function(e){var t=Object(a.useState)(e),n=Object(o.a)(t,2),s=n[0],c=n[1];return{value:s,onChange:function(e){c(e.target.value);var t=Se.test(e.target.value);O(t.requiredTestErrors)}}}("");function x(){e.history.push("/users_module")}return Object(a.useEffect)((function(){t?g.a.get("".concat("https://e-pcr-backend.sutdsh.xyz","/users/verifyToken?token=").concat(t)).then((function(e){})).catch((function(e){I()})):e.history.push("/login")}),[]),Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(P.a,{style:{margin:"10px"},onClick:x,type:"default",children:"Back"}),Object(w.jsx)(F.a,{className:"site-page-header",title:"Add Staff User"}),Object(w.jsx)("div",{style:{padding:"30px"},children:Object(w.jsxs)(T.b,{direction:"vertical",size:"middle",children:[d&&Object(w.jsx)(w.Fragment,{children:Object(w.jsx)(p.a,{message:"Error",description:d,type:"error",showIcon:!0})}),!c&&Object(w.jsx)("div",{children:Object(w.jsxs)(re.a,Object(N.a)(Object(N.a)({name:"validate_other"},{labelCol:{span:30,offset:0},wrapperCol:{span:50}}),{},{onFinish:function(e){console.log(h),console.log(h.length),0===h.length?g.a.post("".concat("https://e-pcr-backend.sutdsh.xyz","/users/register"),{username:e.username.toUpperCase(),password:e.password,email:e.email,role:e.role},{headers:{token:t}}).then((function(e){r(!0),j(null)})).catch((function(e){console.log(e.response.data.message),j(e.response.data.message)})):alert("Password complexity requirements not met")},children:[Object(w.jsx)(re.a.Item,{name:"username",label:"Username",required:!0,children:Object(w.jsx)(D.a,{required:!0})}),Object(w.jsx)(re.a.Item,{name:"password",label:"Password",required:!0,children:Object(w.jsx)(D.a,Object(N.a)(Object(N.a)({},m),{},{type:"password",required:!0}))}),Object(w.jsx)("p",{children:h}),Object(w.jsx)(re.a.Item,{name:"email",label:"Email Address",required:!0,children:Object(w.jsx)(D.a,{type:"email",required:!0})}),Object(w.jsx)(re.a.Item,{name:"role",label:"Role",rules:[{required:!0}],children:Object(w.jsxs)(ce.a,{placeholder:"Select User Role",allowClear:!0,children:[Object(w.jsx)(Option,{value:"restricted",children:"Restricted (Staff)"}),Object(w.jsx)(Option,{value:"full",children:"Full (Admin)"})]})}),Object(w.jsx)(re.a.Item,{children:Object(w.jsx)(P.a,{type:"primary",htmlType:"submit",children:"Submit"})})]}))}),c&&Object(w.jsx)(oe.a,{status:"success",title:"Success!",subTitle:"Staff Account Created",extra:[Object(w.jsx)(P.a,{type:"primary",onClick:x,children:"Back"},"console")]})]})})]})},Ie=n(316);Ie.config({allowPassphrases:!1,maxLength:128,minLength:10,minPhraseLength:20,minOptionalTestsToPass:7});var Ne=function(e){var t=S(),n=Object(l.h)().username,s=Object(a.useState)(!1),c=Object(o.a)(s,2),r=c[0],i=c[1],d=Object(a.useState)(),j=Object(o.a)(d,2),u=j[0],b=j[1],h=Object(a.useState)(),O=Object(o.a)(h,2),m=O[0],x=O[1],f=function(e){var t=Object(a.useState)(e),n=Object(o.a)(t,2),s=n[0],c=n[1];return{value:s,onChange:function(e){c(e.target.value);var t=Ie.test(e.target.value);x(t.requiredTestErrors)}}}("");function y(){e.history.push("/")}return Object(a.useEffect)((function(){t?g.a.get("".concat("https://e-pcr-backend.sutdsh.xyz","/users/verifyToken?token=").concat(t)).then((function(e){})).catch((function(e){I()})):e.history.push("/login")}),[]),Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(P.a,{style:{margin:"10px"},onClick:y,type:"default",children:"Back"}),Object(w.jsx)(F.a,{className:"site-page-header",title:"Reset Password"}),Object(w.jsx)("div",{style:{padding:"30px"},children:Object(w.jsxs)(T.b,{direction:"vertical",size:"middle",children:[u&&Object(w.jsx)(w.Fragment,{children:Object(w.jsx)(p.a,{message:"Error",description:u,type:"error",showIcon:!0})}),!r&&Object(w.jsx)("div",{children:Object(w.jsxs)(re.a,Object(N.a)(Object(N.a)({name:"validate_other"},{labelCol:{span:30,offset:0},wrapperCol:{span:50}}),{},{onFinish:function(e){0===m.length?g.a.post("".concat("https://e-pcr-backend.sutdsh.xyz","/users/resetPassword"),{username:n,password:e.password},{headers:{token:t}}).then((function(e){i(!0),b(null)})).catch((function(e){console.log(e.response.data.message),b(e.response.data.message)})):alert("Password complexity requirements not met")},children:[Object(w.jsx)(re.a.Item,{name:"password",label:"Password",required:!0,children:Object(w.jsx)(D.a,Object(N.a)(Object(N.a)({},f),{},{type:"password",required:!0}))}),Object(w.jsx)("p",{children:m}),Object(w.jsx)(re.a.Item,{children:Object(w.jsx)(P.a,{type:"primary",htmlType:"submit",children:"Submit"})})]}))}),r&&Object(w.jsx)(oe.a,{status:"success",title:"Success!",subTitle:"Password reset successful",extra:[Object(w.jsx)(P.a,{type:"primary",onClick:y,children:"Back"},"console")]})]})})]})};var Ce=function(){var e=Object(a.useState)(!0),t=Object(o.a)(e,2),n=t[0],s=t[1],c=Object(a.useState)({username:null}),r=Object(o.a)(c,2),i=r[0],f=r[1],y=Object(a.useState)(!1),k=Object(o.a)(y,2),N=k[0],C=k[1],_=d.a.Header,A=d.a.Footer,T=d.a.Sider,D=d.a.Content,P=Object(l.g)(),V=v();return Object(a.useEffect)((function(){g.a.get("".concat("https://e-pcr-backend.sutdsh.xyz","/networkTest"),{timeout:3e3}).then((function(e){console.log("IP Whitelisted"),C(!1)})).catch((function(e){C(!0)}));var e=S();e||"/login"===window.location.pathname||"/enroll"===window.location.pathname?g.a.get("".concat("https://e-pcr-backend.sutdsh.xyz","/users/verifyToken?token=").concat(e),{timeout:4e3}).then((function(e){s(!1),f(V)})).catch((function(e){I(),s(!1)})):window.open("/login","_self")}),[]),n&&S()?Object(w.jsx)("div",{className:"content",children:"Checking Authentication..."}):Object(w.jsx)("div",{className:"App",children:Object(w.jsxs)(d.a,{style:{minHeight:"100vh"},children:[Object(w.jsxs)(_,{className:"header",children:[Object(w.jsx)("div",{className:"logo"}),Object(w.jsx)(j.a,{justify:"end",children:null!=i.username&&Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)(u.a,{span:1,children:Object(w.jsx)(b.a,{size:40,children:i.username})}),Object(w.jsx)(u.a,{span:1})]})})]}),Object(w.jsxs)(d.a,{children:["/login"!==window.location.pathname?Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)(T,{breakpoint:"lg",collapsedWidth:"0",onBreakpoint:function(e){console.log(e)},onCollapse:function(e,t){console.log(e,t)},children:[Object(w.jsx)("div",{className:"logo"}),Object(w.jsxs)(h.a,{theme:"dark",mode:"inline",defaultSelectedKeys:["1"],children:[Object(w.jsx)(h.a.Item,{icon:Object(w.jsx)(O.a,{}),onClick:function(){return P.push("/select_patient")},children:"Forms"},"1"),Object(w.jsx)(h.a.Item,{icon:Object(w.jsx)(m.a,{}),onClick:function(){return P.push("/residents_module")},children:"Residents Module"},"2"),"full"===i.role&&Object(w.jsx)(h.a.Item,{icon:Object(w.jsx)(m.a,{}),onClick:function(){return P.push("/users_module")},children:"Users Module"},"3"),Object(w.jsx)(h.a.Item,{icon:Object(w.jsx)(x.a,{}),onClick:function(){return P.push("/announcement")},children:"Announcements"},"4"),Object(w.jsx)(h.a.Item,{icon:Object(w.jsx)(x.a,{}),onClick:function(){return P.push("/settings")},children:"Settings"},"5")]})]})}):Object(w.jsx)(w.Fragment,{}),Object(w.jsxs)(d.a,{children:[N?Object(w.jsx)(p.a,{message:"Network Error",description:"Please connect to TLR Wifi",type:"error",showIcon:!0,style:{textAlign:"left"}}):Object(w.jsx)(w.Fragment,{}),Object(w.jsx)(D,{children:Object(w.jsx)("div",{className:"content",children:Object(w.jsxs)(l.d,{children:[Object(w.jsx)(Y,{path:"/login",component:J}),Object(w.jsx)(Y,{path:"/enroll",component:ye}),Object(w.jsx)(R,{path:"/settings",component:z}),Object(w.jsx)(R,{path:"/announcement",component:U}),Object(w.jsx)(R,{exact:!0,path:["/select_patient","/"],component:G}),Object(w.jsx)(R,{exact:!0,path:["/patient_profile/:bedNo","/"],component:se}),Object(w.jsx)(R,{exact:!0,path:["/forms/restraints_form/:uuid","/"],component:je}),Object(w.jsx)(R,{exact:!0,path:["/forms/progress_record_form/:uuid","/"],component:fe}),Object(w.jsx)(R,{exact:!0,path:["/residents_module/","/"],component:he}),Object(w.jsx)(R,{exact:!0,path:["/residents_module/admit","/"],component:pe}),Object(w.jsx)(R,{exact:!0,path:["/users_module","/"],component:ve}),Object(w.jsx)(R,{exact:!0,path:["/users_module/addUser","/"],component:ke}),Object(w.jsx)(R,{exact:!0,path:["/users_module/reset_password/:username","/"],component:Ne})]})})}),Object(w.jsx)(A,{children:"ePCR"})]})]})]})})},we=function(e){e&&e instanceof Function&&n.e(6).then(n.bind(null,1006)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),a(e),s(e),c(e),r(e)}))};r.a.render(Object(w.jsx)(s.a.StrictMode,{children:Object(w.jsx)(i.a,{children:Object(w.jsx)(Ce,{})})}),document.getElementById("root")),we()}},[[609,1,2]]]);
//# sourceMappingURL=main.658e918b.chunk.js.map